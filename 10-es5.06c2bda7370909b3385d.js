!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{zdGO:function(e,r,a){"use strict";a.r(r),a.d(r,"FlightModule",(function(){return X}));var s,c=a("ofXK"),l=a("3Pt+"),u=a("tyNb"),b=a("L2Ov"),f=a("wjAv"),p=a("HDdC"),h=a("fXoL"),d=a("lJxs"),m=a("AytR"),v=a("tk/3"),g=a("Gv6l"),y=((s=function(){function t(e,i){n(this,t),this.http=e,this.serviceHelper=i,this.State={Latency:250,Urls:{Search:m.a.BaseApiHost+"/api/1.0/Flight"}}}return o(t,[{key:"Search",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.http.post(this.State.Urls.Search,t).pipe(this.serviceHelper.PipeNotification(e,this.State.Latency)).pipe(Object(d.a)((function(t){return t.Data.forEach((function(t,e){t.Options&&t.Options.forEach((function(t,e){t.Segments.forEach((function(t,e){var i="http://localhost/FlyUs.Test/Content/Images/AirLines/";switch(t.AirlineName){case"OnurAir":i+="Onur-Air.png";break;case"Atlasglobal":i+="Atlas-Global.png";break;case"Thy":case"Turkish Airlines":i+="Turkish-Airlines.png";break;case"THY AnadoluJet":i+="Anadolu-Jet.png";break;case"THY BoraJet":i+="Bora-Jet.png";break;case"Pegasus":case"Pegasus Airlines":i+="Pegasus-Airlines.png";break;case"SunExpress":i+="Sun-Express.png"}t.ImageSrc=i}))}))})),t})))}}]),t}()).\u0275fac=function(t){return new(t||s)(h.Tb(v.b),h.Tb(g.a))},s.\u0275prov=h.Fb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),x=a("hTRX"),F=a("R0Ic");function P(t,e){if(1&t){var i=h.Qb();h.Pb(0,"div",5),h.Pb(1,"div",6),h.Pb(2,"b"),h.Ac(3),h.Ob(),h.Pb(4,"span"),h.Ac(5),h.Ob(),h.Ob(),h.Pb(6,"div",7),h.Pb(7,"button",8),h.Wb("click",(function(){h.tc(i);var t=e.$implicit,n=h.qc(11),r=h.ac();return n.value=n.value!=t.Min?""+(+n.value-1):""+ +t.Min,r.GetFormControl(t.Code).setValue(+n.value)})),h.Zb(),h.Pb(8,"svg",9),h.Kb(9,"path",10),h.Ob(),h.Ob(),h.Yb(),h.Kb(10,"input",11,12),h.Pb(12,"button",13),h.Wb("click",(function(){h.tc(i);var t=e.$implicit,n=h.qc(11),r=h.ac();return n.value=n.value!=t.Max?""+(+n.value+1):""+ +t.Max,r.GetFormControl(t.Code).setValue(+n.value)})),h.Zb(),h.Pb(13,"svg",9),h.Kb(14,"path",14),h.Ob(),h.Ob(),h.Ob(),h.Ob()}if(2&t){var n=e.$implicit,r=h.qc(11);h.xb(3),h.Bc(n.Label),h.xb(2),h.Bc(n.SubLabel),h.xb(5),h.hc("min",n.Min.toString())("max",n.Max.toString())("formControlName",n.Code),h.xb(2),h.hc("disabled",+r.value===n.Max)}}var O,A,C,T,w=function(t){return{display:t}},k=Object(F.f)([Object(F.i)({opacity:0}),Object(F.e)("200ms",Object(F.i)({opacity:1}))]),S=Object(F.f)(Object(F.e)("200ms",Object(F.i)({opacity:0}))),M=Object(F.k)("fadeInOut",[Object(F.j)("void => *",Object(F.l)(k)),Object(F.j)("* => void",Object(F.l)(S))]),D=((C=function(){function t(){n(this,t),this.Id="Pax".concat("_",Math.random().toString(36).substring(2,15),"_",Math.random().toString(36).substring(2,15)),this.PaxList=[],this.CloseEvent=new h.n,this.ChangeEvent=new h.n,this.clickInside=!1,this.Visible=!0}return o(t,[{key:"ngOnInit",value:function(){this.PaxForm=new l.h({}),this.PaxList.length>0&&(this.InitializeForm(),this.EmitChanges(this.PaxForm.value))}},{key:"InitializeForm",value:function(){var t=this,e={};this.PaxList.forEach((function(t,i){return e[t.Code]=new l.f({value:t.Value,disabled:!0})})),this.PaxForm=new l.h(e),this.PaxForm.valueChanges.subscribe((function(e){t.EmitChanges(e)}))}},{key:"EmitChanges",value:function(t){var e=[];this.PaxList.forEach((function(i,n){return e.push({Code:i.Code,Value:t[i.Code]})})),e.push({Code:"Total",Value:e.map((function(t){return t.Value})).reduce((function(t,e){return t+e}))}),this.ChangeEvent.emit(e)}},{key:"GetFormControl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.PaxForm;return e.get(t)}},{key:"ListenerInside",value:function(){this.clickInside=!0}},{key:"ListenerOutside",value:function(){this.clickInside?this.clickInside=!1:this.Close()}},{key:"Show",value:function(t){t.stopPropagation(),this.Visible=!0}},{key:"Close",value:function(){this.Visible&&(this.Visible=!1,this.CloseEvent.emit({IsClosed:!0,Id:this.Id}))}}]),t}()).\u0275fac=function(t){return new(t||C)},C.\u0275cmp=h.Db({type:C,selectors:[["lb-pax"]],hostBindings:function(t,e){1&t&&h.Wb("click",(function(){return e.ListenerInside()}))("click",(function(){return e.ListenerOutside()}),!1,h.rc)},decls:6,vars:7,consts:[[1,"pax-container",3,"id","ngStyle"],[3,"formGroup"],[1,"pax-body"],["class","pax-row",4,"ngFor","ngForOf"],[1,"pax-footer"],[1,"pax-row"],[1,"pax-text"],[1,"pax-actions"],["type","button",1,"pax-btn",3,"click"],["viewBox","0 0 448 512","version","1.2",2,"display","inline-block","font-size","inherit","height","1em","overflow","visible","vertical-align","-.125em"],["d","M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"],["type","text",1,"pax-input",3,"min","max","formControlName"],["Count",""],["type","button",1,"pax-btn",3,"disabled","click"],["d","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]],template:function(t,e){1&t&&(h.Pb(0,"div",0),h.Pb(1,"form",1),h.Pb(2,"div",2),h.yc(3,P,15,6,"div",3),h.Ob(),h.Pb(4,"div",4),h.Ac(5," TODO: warning! "),h.Ob(),h.Ob(),h.Ob()),2&t&&(h.hc("id",e.Id)("@fadeInOut",void 0)("ngStyle",h.lc(5,w,e.Visible?"block":"none")),h.xb(1),h.hc("formGroup",e.PaxForm),h.xb(2),h.hc("ngForOf",e.PaxList))},directives:[c.m,l.y,l.n,l.i,c.k,l.b,l.m,l.g],styles:['.pax-container{z-index:1029;position:absolute;box-shadow:0 5px 5px 0 rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.18),0 3px 14px 2px rgba(0,0,0,.12);font-family:Roboto,"Helvetica Neue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:15px;line-height:1;min-width:300px;max-width:300px;color:#000;background-color:#fff;padding:15px!important}.pax-container .pax-body .pax-row{display:flex;flex-wrap:wrap;margin-bottom:.5rem!important}.pax-container .pax-body .pax-row .pax-text{margin-top:auto!important;margin-bottom:auto!important;flex:0 0 calc(100% / 12 * 8);max-width:calc(100% / 12 * 8)}.pax-container .pax-body .pax-row .pax-text span{padding-left:5px;font-size:x-small;color:gray}.pax-container .pax-body .pax-row .pax-actions{flex:0 0 calc(100% / 12 * 4);max-width:calc(100% / 12 * 4);display:flex;flex-wrap:wrap}.pax-container .pax-body .pax-row .pax-actions .pax-input{flex:0 0 calc(100% / 12 * 2);max-width:calc(100% / 12 * 2);padding:0!important;text-align:center;line-height:1;background-color:transparent;border:solid transparent}.pax-container .pax-body .pax-row .pax-actions .pax-btn{flex:0 0 calc(100% / 12 * 4.6);max-width:calc(100% / 12 * 4.6);background-color:transparent;border:1px solid transparent;padding:.25rem!important;font-size:1rem;border-radius:.5rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.pax-container .pax-footer{padding:5px!important;background-color:#ff0}'],encapsulation:2,data:{animation:[M]}}),C),I=((A=function(){function t(e,i,r,o){n(this,t),this.elementRef=e,this.componentFactoryResolver=i,this.appRef=r,this.injector=o,this.ChangeEvent=new h.n,this.PaxList=[],this.paxPickers=[],this.el=this.elementRef.nativeElement}return o(t,[{key:"clicked",value:function(t){this.current||this.Show(this.el.value),this.current.instance.Show(t)}},{key:"Show",value:function(t){var e=this,i=this.GetComponentRef();return i.instance.PaxList=this.PaxList,i.instance.ChangeEvent.subscribe((function(t){e.el.innerText=t.find((function(t){return"Total"===t.Code})).Value.toString()+" "+e.Passengers,e.ChangeEvent.emit(t)})),i.instance.CloseEvent.subscribe((function(t){t.IsClosed&&e.Hide(t.Id)})),this.current=i,this.paxPickers.push({Id:i.instance.Id,Ref:i}),i.instance.Id}},{key:"Hide",value:function(t){var e=this.paxPickers.find((function(e){return e.Id===t}));e&&e.Ref&&(this.current=void 0,e.Ref.destroy(),this.paxPickers.splice(this.paxPickers.indexOf(e),1))}},{key:"GetComponentRef",value:function(){var t=this.componentFactoryResolver.resolveComponentFactory(D).create(this.injector);return this.appRef.attachView(t.hostView),this.el.parentNode.insertBefore(t.hostView.rootNodes[0],this.el.nextSibling),t}},{key:"CLear",value:function(){var t=this;this.paxPickers.forEach((function(e,i){return t.Hide(e.Id)})),this.paxPickers=[]}},{key:"ngOnDestroy",value:function(){this.CLear()}}]),t}()).\u0275fac=function(t){return new(t||A)(h.Jb(h.l),h.Jb(h.j),h.Jb(h.g),h.Jb(h.r))},A.\u0275dir=h.Eb({type:A,selectors:[["span","lbPaxPicker",""],["div","lbPaxPicker",""]],hostBindings:function(t,e){1&t&&h.Wb("click",(function(t){return e.clicked(t)}))},inputs:{PaxList:"PaxList",Passengers:"Passengers"},outputs:{ChangeEvent:"ChangeEvent"}}),A),R=((O=function t(){n(this,t)}).\u0275mod=h.Hb({type:O}),O.\u0275inj=h.Gb({factory:function(t){return new(t||O)},imports:[[c.c,l.t]]}),O),L=a("qPkN"),E=function(){return{locale:"tr",formatDate:"YYYY/MM/D"}},N=((T=function(){function t(){n(this,t),this.RequestReady=new h.n,this.PaxList=[{Code:"adult",Label:"Yeti\u015fkin",SubLabel:"",Min:1,Max:9,Value:1},{Code:"young",Label:"Gen\xe7",SubLabel:"12-17",Min:0,Max:7,Value:0},{Code:"child",Label:"\xc7ocuk",SubLabel:"2-11",Min:0,Max:7,Value:0},{Code:"infant-1",Label:"Koltukta Bebek",SubLabel:"2 ya\u015f alt\u0131",Min:0,Max:7,Value:0},{Code:"infant-2",Label:"Kucakta Bebek",SubLabel:"2 ya\u015f alt\u0131",Min:0,Max:7,Value:0}]}return o(t,[{key:"ngOnInit",value:function(){this.InitializeForm()}},{key:"InitializeForm",value:function(){this.SearchForm=new l.h({DepartureAirportCode:new l.f("IST"),ArrivalAirportCode:new l.f("AYT"),CabinTypes:new l.f("Economy"),FlightType:new l.f("Round trip"),DepartureDateTime:new l.f(null,l.w.required),ReturnDateTime:new l.f(null,l.w.required),FlightAdultCount:new l.f(1),FlightChildCount:new l.f(0),FlightInfantCount:new l.f(0)})}},{key:"GetFormControl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.SearchForm;return e.get(t)}},{key:"SwitchAirport",value:function(){var t=this.SearchForm.get("DepartureAirportCode").value,e=this.SearchForm.get("ArrivalAirportCode").value;this.SearchForm.patchValue({DepartureAirportCode:e,ArrivalAirportCode:t})}},{key:"onSubmit",value:function(){var t=new Date(this.SearchForm.get("DepartureDateTime").value),e=new Date(this.SearchForm.get("ReturnDateTime").value),i=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();e.getFullYear(),e.getMonth(),e.getDate(),console.log(this.SearchForm.value,this.SearchForm.get("DepartureDateTime").value),this.Request={Airlines:[x.a.Domestic],Travelers:[{Code:x.f.Adult,Quantity:this.SearchForm.get("FlightAdultCount").value||0},{Code:x.f.Child,Quantity:this.SearchForm.get("FlightChildCount").value||0},{Code:x.f.Infant,Quantity:this.SearchForm.get("FlightInfantCount").value||0}],Legs:[{FlightType:x.e.OneWay,Departure:{Code:this.SearchForm.get("DepartureAirportCode").value,DateTime:i,City:"",Time:"",TimeZoneOffset:""},Arrival:{Code:this.SearchForm.get("ArrivalAirportCode").value,DateTime:i,City:"",Time:"",TimeZoneOffset:""},DirectionType:x.c.Departure,CabinTypes:[x.b.Economy,x.b.Business]}]},this.RequestReady.emit(this.Request),console.log(this.Request,this.SearchForm.value)}},{key:"PaxChanged",value:function(t){var e=t.find((function(t){return"adult"===t.Code})).Value,i=t.find((function(t){return"young"===t.Code})).Value,n=t.find((function(t){return"child"===t.Code})).Value,r=t.find((function(t){return"infant-1"===t.Code})).Value;this.SearchForm.get("FlightAdultCount").setValue(e),this.SearchForm.get("FlightChildCount").setValue(i+n),this.SearchForm.get("FlightInfantCount").setValue(r),this.PaxList.forEach((function(e,i){var n=t.find((function(t){return t.Code===e.Code}));n&&(e.Value=n.Value)})),console.log(t.filter((function(t){return"Total"!==t.Code&&t.Value>0})))}}]),t}()).\u0275fac=function(t){return new(t||T)},T.\u0275cmp=h.Db({type:T,selectors:[["app-flight-searcher"]],outputs:{RequestReady:"RequestReady"},decls:75,vars:14,consts:[[1,"card","card-body","mb-2"],[3,"formGroup","submit"],[1,"form-row","mb-2"],[1,"col-lg-2"],["for","FlightType"],["id","FlightType","name","FlightType",1,"custom-select",3,"formControlName"],["FlightType",""],[1,"col-lg-3"],["lbPaxPicker","",3,"PaxList","ChangeEvent"],["for","CabinType"],["id","CabinType","name","CabinType",1,"custom-select",3,"formControlName"],[1,"col-12","col-lg-7"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-plane-departure"],["for","DepartureAirportCode"],["type","text","placeholder","AirportCode","autocomplete","off","id","DepartureAirportCode",1,"form-control",3,"formControlName"],[1,"btn","btn-sm","btn-outline-dark","ml-1","mr-1",3,"click"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-plane-arrival"],["for","ArrivalAirportCode"],["type","text","placeholder","AirportCode","autocomplete","off","id","ArrivalAirportCode",1,"form-control",3,"formControlName"],[1,"col-12","col-lg-5"],[1,"fas","fa-calendar-alt"],["type","text","lbDatePicker","","id","DepartureDateTime","autocomplete","off",1,"form-control",3,"Options","formControlName"],["type","text","lbDatePicker","","id","ReturnDateTime","autocomplete","off",1,"form-control",3,"Options","formControlName"],[1,"form-row","mb-2","justify-content-end"],["for","Stops"],["id","Stops","name","Stops",1,"custom-select"],["for","Airlines"],["id","Airlines","name","Airlines",1,"custom-select"],[1,"form-row","justify-content-center"],["type","submit",1,"btn","btn-sm","btn-primary","mb-2"]],template:function(t,e){if(1&t&&(h.Pb(0,"div",0),h.Pb(1,"form",1),h.Wb("submit",(function(){return e.onSubmit()})),h.Pb(2,"div",2),h.Pb(3,"div",3),h.Kb(4,"label",4),h.Pb(5,"select",5,6),h.Pb(7,"option"),h.Ac(8,"Round trip"),h.Ob(),h.Pb(9,"option"),h.Ac(10,"One-way"),h.Ob(),h.Pb(11,"option"),h.Ac(12,"Multi-city"),h.Ob(),h.Ob(),h.Ob(),h.Pb(13,"div",7),h.Pb(14,"span",8),h.Wb("ChangeEvent",(function(t){return e.PaxChanged(t)})),h.Ac(15,"Passengers"),h.Ob(),h.Ob(),h.Pb(16,"div",3),h.Kb(17,"label",9),h.Pb(18,"select",10),h.Pb(19,"option"),h.Ac(20,"Economy"),h.Ob(),h.Pb(21,"option"),h.Ac(22,"Premium Economy"),h.Ob(),h.Pb(23,"option"),h.Ac(24,"Business"),h.Ob(),h.Pb(25,"option"),h.Ac(26,"First Class"),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Pb(27,"div",2),h.Pb(28,"div",11),h.Pb(29,"div",12),h.Pb(30,"div",13),h.Pb(31,"span",14),h.Kb(32,"i",15),h.Ob(),h.Ob(),h.Kb(33,"label",16),h.Kb(34,"input",17),h.Pb(35,"div",18),h.Wb("click",(function(){return e.SwitchAirport()})),h.Kb(36,"i",19),h.Ob(),h.Pb(37,"div",13),h.Pb(38,"span",14),h.Kb(39,"i",20),h.Ob(),h.Ob(),h.Kb(40,"label",21),h.Kb(41,"input",22),h.Ob(),h.Ob(),h.Pb(42,"div",23),h.Pb(43,"div",12),h.Pb(44,"div",13),h.Pb(45,"span",14),h.Kb(46,"i",24),h.Ob(),h.Ob(),h.Kb(47,"input",25),h.Kb(48,"input",26),h.Ob(),h.Ob(),h.Ob(),h.Pb(49,"div",27),h.Pb(50,"div",3),h.Ac(51," bags "),h.Ob(),h.Pb(52,"div",3),h.Kb(53,"label",28),h.Pb(54,"select",29),h.Pb(55,"option"),h.Ac(56,"Any number of stops"),h.Ob(),h.Pb(57,"option"),h.Ac(58,"Non-stop only"),h.Ob(),h.Pb(59,"option"),h.Ac(60,"1 stop or fewer"),h.Ob(),h.Pb(61,"option"),h.Ac(62,"2 stop or fewer"),h.Ob(),h.Ob(),h.Ob(),h.Pb(63,"div",3),h.Kb(64,"label",30),h.Pb(65,"select",31),h.Pb(66,"option"),h.Ac(67,"THY"),h.Ob(),h.Pb(68,"option"),h.Ac(69,"Pegasus"),h.Ob(),h.Ob(),h.Ob(),h.Pb(70,"div",3),h.Ac(71," price times "),h.Ob(),h.Ob(),h.Pb(72,"div",32),h.Pb(73,"button",33),h.Ac(74,"Search"),h.Ob(),h.Ob(),h.Ob(),h.Ob()),2&t){var i=h.qc(6);h.xb(1),h.hc("formGroup",e.SearchForm),h.xb(4),h.hc("formControlName","FlightType"),h.xb(9),h.hc("PaxList",e.PaxList),h.xb(4),h.hc("formControlName","CabinTypes"),h.xb(16),h.hc("formControlName","DepartureAirportCode"),h.xb(7),h.hc("formControlName","ArrivalAirportCode"),h.xb(6),h.hc("Options",h.kc(12,E))("formControlName","DepartureDateTime"),h.xb(1),h.Bb("d-none","One-way"===i.value),h.hc("Options",h.kc(13,E))("formControlName","ReturnDateTime")}},directives:[l.y,l.n,l.i,l.v,l.m,l.g,l.q,l.x,I,l.b,L.a],styles:[""]}),T),K=a("OKDp");function B(t,e){if(1&t&&(h.Pb(0,"div",17),h.Pb(1,"div",18),h.Kb(2,"input",19),h.Pb(3,"label",20),h.Ac(4),h.Ob(),h.Ob(),h.Ob()),2&t){var i=e.$implicit,n=e.index,r=h.ac();h.hc("formArrayName","Airlines"),h.xb(1),h.hc("formGroupName",n.toString()),h.xb(1),h.ic("id","Air_"+i.Airline),h.hc("formControlName","Air_"+r.Filter.Airlines[n].Airline),h.xb(1),h.ic("for","Air_"+i.Airline),h.xb(1),h.Dc(" ",i.Name," (",i.Count,")")}}function V(t,e){if(1&t&&(h.Pb(0,"div",17),h.Pb(1,"div",18),h.Kb(2,"input",19),h.Pb(3,"label",20),h.Ac(4),h.Ob(),h.Ob(),h.Ob()),2&t){var i=e.$implicit,n=e.index;h.hc("formArrayName","FlightTimes"),h.xb(1),h.hc("formGroupName",n.toString()),h.xb(1),h.ic("id","FT_"+i.FlightTime),h.hc("formControlName","FT_"+i.FlightTime),h.xb(1),h.ic("for","FT_"+i.FlightTime),h.xb(1),h.Bc(i.Name)}}function j(t,e){if(1&t&&(h.Pb(0,"div",17),h.Pb(1,"div",21),h.Kb(2,"input",19),h.Pb(3,"label",20),h.Ac(4),h.Ob(),h.Ob(),h.Ob()),2&t){var i=e.index;h.hc("formArrayName","Transfer"),h.xb(2),h.ic("id","Tra_"+i),h.hc("formControlName",i),h.xb(1),h.ic("for","Tra_"+i),h.xb(1),h.Bc(0===i?"Non-Stop":"Transfer")}}var q,H=((q=function(){function e(){n(this,e),this.Options=[],this.FilterReady=new h.n,this.Filter={}}return o(e,[{key:"ngOnChanges",value:function(){var t=this;this.Options.length>0&&(this.Filter.Airlines=[],this.Filter.FlightTimes=[],this.Filter.Transfer=[],this.Filter.Min=0,this.Filter.Max=0,this.Filter.Max=Math.max.apply(Math,this.Options.map((function(t){return t.BestAmount}))),this.Filter.Min=Math.min.apply(Math,this.Options.map((function(t){return t.BestAmount}))),this.Options.forEach((function(e,i){t.Filter.Airlines.find((function(t){return t.Airline===e.Airline}))||t.Filter.Airlines.push({Airline:e.Airline,Name:x.a[e.Airline],Count:t.Options.filter((function(t){return t.Airline===e.Airline})).length}),e.Segments.forEach((function(e,i){t.Filter.FlightTimes.find((function(t){return t.FlightTime===e.FlightTime}))||t.Filter.FlightTimes.push({FlightTime:e.FlightTime,Name:x.d[e.FlightTime]}),t.Filter.Transfer.find((function(t){return t===(e.IsTransfer?"Transfer":"Non-Stop")}))||t.Filter.Transfer.push(e.IsTransfer?"Transfer":"Non-Stop")}))})),this.FilterReady.emit(this.Options),this.Initialize())}},{key:"ngOnInit",value:function(){}},{key:"Initialize",value:function(){var t=this;this.FilterForm=new l.h({PriceMin:new l.f,PriceMax:new l.f,Airlines:new l.d([]),FlightTimes:new l.d([]),Transfer:new l.d([])}),this.FilterForm.get("PriceMin").valueChanges.subscribe((function(e){var i=t.FilterForm.get("PriceMax").value;i&&i.toFixed(0)===t.Filter.Max.toFixed(0)&&(i=t.Filter.Max)})),this.FilterForm.get("PriceMax").valueChanges.subscribe((function(e){t.FilterForm.get("PriceMin"),e.toFixed(0)===t.Filter.Max.toFixed(0)&&(e=t.Filter.Max)})),this.Filter.Transfer.forEach((function(e,i){t.FilterForm.get("Transfer").push(new l.f(!1))})),this.Filter.Airlines.forEach((function(e){var n=new l.h(i({},"Air_"+e.Airline,new l.f(!1)));t.FilterForm.get("Airlines").push(n)})),this.Filter.FlightTimes.forEach((function(e){var n=new l.h(i({},"FT_"+e.FlightTime,new l.f(!1)));t.FilterForm.get("FlightTimes").push(n)}))}},{key:"onSubmit",value:function(){var e=this,i=[],n=[],r=[],o=this.FilterForm.get("PriceMin").value,a=this.FilterForm.get("PriceMax").value;a.toFixed(0)===this.Filter.Max.toFixed(0)&&(a=this.Filter.Max),this.Filter.Airlines.forEach((function(t,n){e.FilterForm.get("Airlines."+n+".Air_"+t.Airline).value&&i.push(t.Airline)})),this.Filter.FlightTimes.forEach((function(t,i){e.FilterForm.get("FlightTimes."+i+".FT_"+t.FlightTime).value&&n.push(t.FlightTime)})),this.Filter.Transfer.forEach((function(t,i){e.FilterForm.get("Transfer."+i).value&&r.push(t)}));var s=this.Options;i.length>0&&(s=s.filter((function(t){return i.find((function(e){return e===t.Airline}))}))),n.length>0&&(s=s.filter((function(t){return n.find((function(e){return t.Segments.findIndex((function(t){return t.FlightTime===e}))>-1}))}))),r.length>0&&(s=s.filter((function(t){return r.find((function(e){return t.Segments.findIndex((function(t){return t.IsTransfer===("Transfer"===e)}))>-1}))}))),(null!==o&&o!==this.Filter.Min||null!==a&&a!==this.Filter.Max)&&(s=s.filter((function(t){return t.BestAmount>=o&&t.BestAmount<=a}))),null!=s&&0!==s.length||(s=this.Options),console.log("FlightFilter",this.Filter),this.FilterReady.emit(t(s))}}]),e}()).\u0275fac=function(t){return new(t||q)},q.\u0275cmp=h.Db({type:q,selectors:[["app-flight-filter"]],inputs:{Options:"Options"},outputs:{FilterReady:"FilterReady"},features:[h.vb],decls:47,vars:15,consts:[[1,"card","mb-2"],[1,"card-body","p-2"],[1,"fas","fa-search"],[3,"formGroup","ngSubmit"],["type","submit",1,"w-100","m-0","btn","btn-sm","btn-outline-primary","mb-2"],[1,"fas","fa-filter"],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col-12","mb-1"],["id","Price-Range",1,""],[1,"col-6"],["type","number","id","PriceMin",1,"form-control","form-control-sm",3,"min","max","step","formControlName"],["PriceMin",""],["type","number","id","PriceMax",1,"form-control","form-control-sm",3,"min","max","step","formControlName"],["PriceMax",""],[3,"formArrayName",4,"ngFor","ngForOf"],[3,"formArrayName"],[1,"custom-control","custom-checkbox",3,"formGroupName"],["type","checkbox",1,"custom-control-input",3,"formControlName","id"],[1,"custom-control-label",3,"for"],[1,"custom-control","custom-checkbox"]],template:function(t,e){if(1&t&&(h.Pb(0,"div",0),h.Pb(1,"div",1),h.Kb(2,"i",2),h.Ac(3),h.bc(4,"async"),h.Ob(),h.Ob(),h.Pb(5,"form",3),h.Wb("ngSubmit",(function(){return e.onSubmit()})),h.Pb(6,"button",4),h.Ac(7," Filter "),h.Kb(8,"i",5),h.Ob(),h.Pb(9,"div",0),h.Pb(10,"div",6),h.Pb(11,"h5",7),h.Ac(12," Price "),h.Ob(),h.Pb(13,"div",8),h.Pb(14,"div",9),h.Kb(15,"div",10),h.Ob(),h.Pb(16,"div",11),h.Pb(17,"label"),h.Kb(18,"input",12,13),h.Ob(),h.Ob(),h.Pb(20,"div",11),h.Pb(21,"label"),h.Kb(22,"input",14,15),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Pb(24,"div",0),h.Pb(25,"div",6),h.Pb(26,"h5",7),h.Ac(27," Airlines "),h.Ob(),h.yc(28,B,5,7,"div",16),h.Ob(),h.Ob(),h.Pb(29,"div",0),h.Pb(30,"div",6),h.Pb(31,"h5",7),h.Ac(32," Flight Type "),h.Ob(),h.Ac(33," Bussiness First class Economy "),h.Ob(),h.Ob(),h.Pb(34,"div",0),h.Pb(35,"div",6),h.Pb(36,"h5",7),h.Ac(37," When?.. "),h.Ob(),h.yc(38,V,5,6,"div",16),h.Ob(),h.Ob(),h.Pb(39,"div",0),h.Pb(40,"div",6),h.Pb(41,"h5",7),h.Ac(42," Transfer "),h.Ob(),h.yc(43,j,5,5,"div",16),h.Ob(),h.Ob(),h.Pb(44,"button",4),h.Ac(45," Filter "),h.Kb(46,"i",5),h.Ob(),h.Ob()),2&t){var i,n=h.qc(19),r=h.qc(23);h.xb(3),h.Cc(" ",(null==(i=h.cc(4,13,e.FilterReady))?null:i.length)||e.Options.length," Results Found. "),h.xb(2),h.hc("formGroup",e.FilterForm),h.xb(13),h.hc("min",e.Filter.Min.toString())("max",r.value.toString())("step",".01")("formControlName","PriceMin"),h.xb(4),h.hc("min",n.value.toString())("max",e.Filter.Max.toString())("step",".01")("formControlName","PriceMax"),h.xb(6),h.hc("ngForOf",e.Filter.Airlines),h.xb(10),h.hc("ngForOf",e.Filter.FlightTimes),h.xb(5),h.hc("ngForOf",e.Filter.Transfer)}},directives:[l.y,l.n,l.i,l.r,l.b,l.m,l.g,c.k,l.e,l.j,l.a],pipes:[c.b],styles:[""]}),q),G=["listContainer"];function W(t,e){if(1&t){var i=h.Qb();h.Pb(0,"app-flight-filter",32),h.Wb("FilterReady",(function(t){return h.tc(i),h.ac().onFilterReady(t)})),h.bc(1,"async"),h.Ob()}if(2&t){var n=h.ac();h.hc("Options",h.cc(1,1,n.Options))}}var z,Y,_,J,Q=[{path:"",children:[{path:"",component:(Y=function(){function e(t){n(this,e),this.flightService=t,this.Availabilities=[],this.Filtered=[],this.PagerOn=!0,this.Type="Default"}return o(e,[{key:"ngOnInit",value:function(){}},{key:"onRequestReady",value:function(e){var i=this;this.Subscription=this.flightService.Search(e).subscribe((function(e){i.Availabilities=e.Data,i.Options=new p.a((function(i){var n=[];e.Data.forEach((function(e,i){n.push.apply(n,t(e.Options))})),i.next(n)})),console.log("res",e,i.Options)}))}},{key:"onFilterReady",value:function(e){var i=this;setTimeout((function(){i.Filtered=t(e),i.container&&(i.container.Filtered=i.Filtered)}),100)}},{key:"SortBy",value:function(t,e){this.container&&(this.container.InfiniteScroll.CurrentPage=1,this.container.InfiniteScroll.Items=[],this.container.Pager.CurrentPage=1),this.Filtered.length>0&&("Default"===t?this.Filtered=this.Filtered.sort((function(t,e){return t.BestAmount>e.BestAmount?1:-1})):"Time"===t?"Asc"===e?this.Filtered=this.Filtered.sort((function(t,e){return t.Segments[0].ElapsedTime>e.Segments[0].ElapsedTime?1:-1})):"Des"===e&&(this.Filtered=this.Filtered.sort((function(t,e){return t.Segments[0].ElapsedTime<e.Segments[0].ElapsedTime?1:-1}))):"Cost"===t?"Asc"===e?this.Filtered=this.Filtered.sort((function(t,e){return t.BestAmount>e.BestAmount?1:-1})):"Des"===e&&(this.Filtered=this.Filtered.sort((function(t,e){return t.BestAmount<e.BestAmount?1:-1}))):"Airline"===t&&("ABC"===e?this.Filtered=this.Filtered.sort((function(t,e){return t.Airline>e.Airline?1:-1})):"ZYV"===e&&(this.Filtered=this.Filtered.sort((function(t,e){return t.Airline<e.Airline?1:-1}))))),this.container&&(this.container.pagination&&(this.container.pagination.Items=this.Filtered,this.container.pagination.SetPage(1)),this.container.ScrollLoadMore())}},{key:"ngOnDestroy",value:function(){this.Subscription&&this.Subscription.unsubscribe()}}]),e}(),Y.\u0275fac=function(t){return new(t||Y)(h.Jb(y))},Y.\u0275cmp=h.Db({type:Y,selectors:[["app-flight"]],viewQuery:function(t,e){var i;1&t&&h.Hc(G,!0),2&t&&h.pc(i=h.Xb())&&(e.container=i.first)},decls:51,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-12","p-md-1","mb-2"],[3,"RequestReady"],[1,"card","card-body"],[1,"container-fluid"],[1,"col-12","col-lg-3","p-md-1","mb-2"],[3,"Options","FilterReady",4,"ngIf"],[1,"col-12","col-lg-9","p-md-1","mb-2"],[1,"card","mb-2"],[1,"card-body","p-0"],[1,"btn-group","float-left","m-1"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","btn-outline-dark","dropdown-toggle"],["SortByButton",""],[1,"fa","fa-sort"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"fas","fa-sort"],[1,"dropdown-divider"],[1,"fas","fa-sort-numeric-up"],[1,"fas","fa-sort-numeric-down"],[1,"fas","fa-sort-amount-up"],[1,"fas","fa-sort-amount-down"],[1,"fas","fa-sort-alpha-up"],[1,"fas","fa-sort-alpha-down"],[1,"btn","btn-sm","btn-outline-secondary","m-1",3,"click"],[1,"float-right"],[1,"btn","btn-sm","btn-outline-secondary","pl-2","pr-2","m-1",3,"click"],[1,"fas","fa-list"],[1,"fas","fa-th-list"],[3,"Filtered","State","TypeArray","TypeGrid"],["listContainer",""],[3,"Options","FilterReady"]],template:function(t,e){if(1&t){var i=h.Qb();h.Pb(0,"div",0),h.Pb(1,"div",1),h.Pb(2,"div",2),h.Pb(3,"app-flight-searcher",3),h.Wb("RequestReady",(function(t){return e.onRequestReady(t)})),h.Ob(),h.Ob(),h.Pb(4,"div",2),h.Pb(5,"div",4),h.Pb(6,"div",5),h.Pb(7,"div",1),h.Pb(8,"div",6),h.yc(9,W,2,3,"app-flight-filter",7),h.bc(10,"async"),h.Ob(),h.Pb(11,"div",8),h.Pb(12,"div",9),h.Pb(13,"div",10),h.Pb(14,"div",11),h.Pb(15,"button",12,13),h.Kb(17,"i",14),h.Ob(),h.Pb(18,"div",15),h.Pb(19,"div",16),h.Wb("click",(function(){h.tc(i);var t=h.qc(16);return e.SortBy("Default",""),t.innerHTML="<i class='fas fa-sort'></i>"})),h.Kb(20,"i",17),h.Ob(),h.Kb(21,"div",18),h.Pb(22,"span",16),h.Wb("click",(function(){h.tc(i);var t=h.qc(16);return e.SortBy("Time","Asc"),t.innerHTML="Time <i class='fas fa-sort-numeric-up'></i>"})),h.Ac(23," Time "),h.Kb(24,"i",19),h.Ob(),h.Pb(25,"span",16),h.Wb("click",(function(){h.tc(i);var t=h.qc(16);return e.SortBy("Time","Des"),t.innerHTML="Time <i class='fas fa-sort-numeric-down'></i>"})),h.Ac(26," Time "),h.Kb(27,"i",20),h.Ob(),h.Kb(28,"div",18),h.Pb(29,"span",16),h.Wb("click",(function(){h.tc(i);var t=h.qc(16);return e.SortBy("Cost","Asc"),t.innerHTML="Cost <i class='fas fa-sort-amount-up'></i>"})),h.Ac(30," Cost "),h.Kb(31,"i",21),h.Ob(),h.Pb(32,"span",16),h.Wb("click",(function(){h.tc(i);var t=h.qc(16);return e.SortBy("Cost","Des"),t.innerHTML="Cost <i class='fas fa-sort-amount-down'></i>"})),h.Ac(33," Cost "),h.Kb(34,"i",22),h.Ob(),h.Kb(35,"div",18),h.Pb(36,"span",16),h.Wb("click",(function(){h.tc(i);var t=h.qc(16);return e.SortBy("Airline","ABC"),t.innerHTML="Airline <i class='fas fa-sort-alpha-up'></i>"})),h.Ac(37," Airline "),h.Kb(38,"i",23),h.Ob(),h.Pb(39,"span",16),h.Wb("click",(function(){h.tc(i);var t=h.qc(16);return e.SortBy("Airline","ZYV"),t.innerHTML="Airline <i class='fas fa-sort-alpha-down'></i>"})),h.Ac(40," Airline "),h.Kb(41,"i",24),h.Ob(),h.Ob(),h.Ob(),h.Pb(42,"span",25),h.Wb("click",(function(){return e.PagerOn=!e.PagerOn})),h.Ac(43),h.Ob(),h.Pb(44,"div",26),h.Pb(45,"span",27),h.Wb("click",(function(){return e.Type="Default"})),h.Kb(46,"i",28),h.Ob(),h.Pb(47,"span",27),h.Wb("click",(function(){return e.Type="Bigger"})),h.Kb(48,"i",29),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Kb(49,"app-list-container",30,31),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob(),h.Ob()}var n;2&t&&(h.xb(9),h.hc("ngIf",(null==(n=h.cc(10,6,e.Options))?null:n.length)>0),h.xb(34),h.Bc(e.PagerOn?"InfiniteScroll":"Pagination"),h.xb(6),h.hc("Filtered",e.Filtered)("State",e.PagerOn?"Pager":"Scroll")("TypeArray","Flights")("TypeGrid",e.Type))},directives:[N,c.l,K.a,H],pipes:[c.b],styles:[""]}),Y),children:[]},{path:"Details/:Id",component:(z=function(){function t(){n(this,t)}return o(t,[{key:"ngOnInit",value:function(){}}]),t}(),z.\u0275fac=function(t){return new(t||z)},z.\u0275cmp=h.Db({type:z,selectors:[["app-flight-details"]],decls:2,vars:0,template:function(t,e){1&t&&(h.Pb(0,"p"),h.Ac(1,"flight-details works!"),h.Ob())},styles:[""]}),z)},{path:"**",resolve:{path:b.c},component:f.c}]}],Z=((_=function t(){n(this,t)}).\u0275mod=h.Hb({type:_}),_.\u0275inj=h.Gb({factory:function(t){return new(t||_)},imports:[[u.h.forChild(Q)],u.h]}),_),$=[a("H8qh").a],U=[c.c,l.t],X=((J=function t(){n(this,t)}).\u0275mod=h.Hb({type:J}),J.\u0275inj=h.Gb({factory:function(t){return new(t||J)},providers:[y],imports:[[].concat(U,$,[Z,L.b,R])]}),J)}}])}();