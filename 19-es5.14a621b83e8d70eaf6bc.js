!function(){function t(t,n){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){a&&(t=a);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,s=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return c=t.done,t},e:function(t){s=!0,r=t},f:function(){try{c||null==a.return||a.return()}finally{if(s)throw r}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}(self.webpackChunkng_tourism=self.webpackChunkng_tourism||[]).push([[19],{9457:function(t,e){var n,a;void 0!==(a="function"==typeof(n=function(){"use strict";function e(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){r(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(n){}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,r){var c=o.URL||o.webkitURL,s=document.createElement("a");s.download=i=i||t.name||"download",s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?a(s):n(s.href)?e(t,i,r):a(s,s.target="_blank")):(s.href=c.createObjectURL(t),setTimeout(function(){c.revokeObjectURL(s.href)},4e4),setTimeout(function(){a(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,i){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),o);else if(n(t))e(t,o,i);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){a(r)})}}:function(t,n,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,a);var c="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||c&&s||i)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var f=o.URL||o.webkitURL,d=f.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});o.saveAs=r.saveAs=r,t.exports=r})?n.apply(e,[]):n)&&(t.exports=a)},7019:function(e,a,i){"use strict";i.r(a),i.d(a,{UploadModule:function(){return U}});var r,c=i(8583),s=i(5782),u=i(9457),l=i.n(u),f=i(7716),d=((r=function(){function e(){n(this,e),this.Types=["image/jpeg","image/png"],this.Changed=new f.vpe}return o(e,[{key:"ngOnInit",value:function(){}},{key:"GetReady",value:function(t){var e={Type:t.type,Size:t.size,Name:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),DataURI:""},n=new FileReader;return n.onload=function(t){e.DataURI=t.target.result},n.readAsDataURL(t),e}},{key:"onFileChange",value:function(e){var n=this,a=Array();if(e.target.files&&e.target.files.length>0){var o,i=t(e.target.files);try{var r=function(){var t=o.value;n.Types.find(function(e){return e===t.type})&&a.push(n.GetReady(t))};for(i.s();!(o=i.n()).done;)r()}catch(c){i.e(c)}finally{i.f()}e.target.value="",a.length>0&&this.Changed.emit(a)}}}]),e}()).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-uploader"]],inputs:{Types:"Types"},outputs:{Changed:"Changed"},decls:10,vars:0,consts:[[1,"card"],[1,"card-body"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-file"],["type","file","id","customFile","multiple","","accept","image/*",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"span",4),f._uU(5,"Upload"),f.qZA(),f.qZA(),f.TgZ(6,"div",5),f.TgZ(7,"input",6),f.NdJ("change",function(t){return e.onFileChange(t)}),f.qZA(),f.TgZ(8,"label",7),f._uU(9,"Choose file"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA())},styles:[""]}),r);function g(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",9),f.TgZ(1,"div",2),f._UZ(2,"img",10),f.TgZ(3,"button",11),f.NdJ("click",function(){var t=f.CHM(n).$implicit;return f.oxw().onDelete(t)}),f._UZ(4,"i",12),f.qZA(),f.TgZ(5,"button",13),f.NdJ("click",function(){var t=f.CHM(n).$implicit;return f.oxw().onSelect(t)}),f._UZ(6,"i",14),f.qZA(),f._uU(7),f.qZA(),f.qZA()}if(2&t){var a=e.$implicit;f.xp6(2),f.Q6J("src",a.DataURI,f.LSH),f.xp6(5),f.lnq(" ",a.Type," ",a.Name," ",a.Size," ")}}function h(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",9),f.TgZ(1,"div",2),f.TgZ(2,"button",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.onRotate(t.Selected,"Left")}),f._UZ(3,"i",16),f.qZA(),f.TgZ(4,"button",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.onRotate(t.Selected,"Right")}),f._UZ(5,"i",17),f.qZA(),f.TgZ(6,"button",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.onFlip(t.Selected,"H")}),f._UZ(7,"i",18),f.qZA(),f.TgZ(8,"button",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.onFlip(t.Selected,"V")}),f._UZ(9,"i",19),f.qZA(),f.TgZ(10,"button",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.onCrop(t.Selected)}),f._UZ(11,"i",20),f.qZA(),f.TgZ(12,"button",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.onSave(t.Selected)}),f._UZ(13,"i",21),f.qZA(),f.TgZ(14,"button",22),f._uU(15," Black & White"),f.qZA(),f.TgZ(16,"button",22),f._uU(17," Sepia"),f.qZA(),f.TgZ(18,"button",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.onNegative(t.Selected)}),f._uU(19," Negative"),f.qZA(),f.qZA(),f.TgZ(20,"div",23),f._UZ(21,"img",24),f.qZA(),f.qZA()}if(2&t){var a=f.oxw();f.xp6(21),f.Q6J("src",a.Selected.DataURI,f.LSH)}}var p=function(){var t=function(){function t(){n(this,t)}return o(t,[{key:"ngOnInit",value:function(){}},{key:"onChanged",value:function(t){this.Images=t,console.log(t)}},{key:"onDelete",value:function(t){var e=this.Images.indexOf(t);e>-1&&this.Images.splice(e,1)}},{key:"onSelect",value:function(t){this.Selected=t}},{key:"onRotate",value:function(t,e){var n=new v(t.DataURI);"Left"===e?n.Rotate(-90):"Right"===e&&n.Rotate(90),t.DataURI=n.toDataURL(),console.log(n.DataURItoBlob(t.DataURI)),this.update(t)}},{key:"update",value:function(t){var e=this.Images.indexOf(t);e>-1&&this.Images.splice(e,1),this.Images.push(t)}},{key:"onFlip",value:function(t,e){var n=new v(t.DataURI);"H"===e?n.Flip():"V"===e&&n.Flip(!0),t.DataURI=n.toDataURL(),console.log(n.DataURItoBlob(t.DataURI)),this.update(t)}},{key:"onNegative",value:function(t){var e=new v(t.DataURI);e.Negative(),t.DataURI=e.toDataURL(),console.log(e.DataURItoBlob(t.DataURI)),this.update(t)}},{key:"onCrop",value:function(t){console.log("onCrop"),$("#target").Jcrop({aspectRatio:2/3,minSize:[2,100],maxSize:[500,750]})}},{key:"onSave",value:function(t){var e=new v(t.DataURI).DataURItoBlob(t.DataURI);l().saveAs(e,"Test.jpg")}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-image"]],decls:12,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"card","mb-2"],[1,"card-body"],[1,"btn","btn-outline-primary"],["class","row m-1",4,"ngFor","ngForOf"],["class","row m-1",4,"ngIf"],[3,"Changed"],[1,"row","m-1"],["width","180",1,"img-thumbnail","mb-3","mr-1",3,"src"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"btn","btn-info",3,"click"],["aria-hidden","true",1,"fa","fa-laptop"],[1,"btn","btn-lg","btn-outline-dark","mr-1",3,"click"],[1,"fas","fa-undo"],[1,"fas","fa-redo"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-arrows-alt-v"],[1,"fas","fa-crop"],[1,"fas","fa-save"],[1,"btn","btn-lg","btn-outline-dark","mr-1"],[1,"col-6","mx-auto","bg-dark",2,"max-height","800px"],["id","target",1,"img-fluid",3,"src"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"button",5),f._uU(6,"Resize"),f.qZA(),f.TgZ(7,"button",5),f._uU(8,"Edit"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(9,g,8,4,"div",6),f.YNc(10,h,22,1,"div",7),f.qZA(),f.TgZ(11,"app-uploader",8),f.NdJ("Changed",function(t){return e.onChanged(t)}),f.qZA(),f.qZA()),2&t&&(f.xp6(9),f.Q6J("ngForOf",e.Images),f.xp6(1),f.Q6J("ngIf",e.Selected))},directives:[c.sg,c.O5,d],styles:[""]}),t}(),v=function(){function t(e){n(this,t),this.canvas=document.createElement("canvas"),this.image=new Image,this.image.src=e,this.canvas.width=this.image.width,this.canvas.height=this.image.height,this.context=this.canvas.getContext("2d"),this.image.onload=function(){console.log(222)}}return o(t,[{key:"toDataURL",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/jpeg";return this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.context.restore(),this.canvas.toDataURL(t,.9)}},{key:"Flip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save();var e=this.canvas.width;t?(this.context.translate(0,this.canvas.height),this.context.scale(1,-1)):(this.context.translate(e,0),this.context.scale(-1,1))}},{key:"Rotate",value:function(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save();var e=this.canvas.width,n=this.canvas.height;this.newSize(e,n,t),-90===t?(this.context.rotate(-.5*Math.PI),this.context.translate(-e,0)):90===t&&(this.context.rotate(.5*Math.PI),this.context.translate(0,-n))}},{key:"Negative",value:function(){this.context.drawImage(this.image,0,0);for(var t=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),e=t.data,n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2];this.context.putImageData(t,0,0)}},{key:"newSize",value:function(t,e,n){var a=n*Math.PI/180,o=Math.cos(a),i=Math.sin(a);i<0&&(i=-i),o<0&&(o=-o),this.canvas.width=e*i+t*o,this.canvas.height=e*o+t*i}},{key:"DataURItoBlob",value:function(t){for(var e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(e.length),o=0;o<e.length;o++)a[o]=e.charCodeAt(o);return new Blob([a],{type:n})}}]),t}(),m=i(3057),b=i(5485),y=[{path:"",children:[{path:"Image",component:p,children:[]},{path:"",component:p,children:[]},{path:"**",resolve:{path:m.Rd},component:b.r}]}],w=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[s.Bz.forChild(y)],s.Bz]}),t}(),Z=[i(5326).m],U=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[c.ez].concat(Z,[w])]}),t}()}}])}();