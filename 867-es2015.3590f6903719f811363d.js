"use strict";(self.webpackChunkng_tourism=self.webpackChunkng_tourism||[]).push([[867],{6189:function(e,t,o){o.d(t,{E:function(){return a}});var a=(()=>{return(e=a||(a={}))[e.Tour=0]="Tour",e[e.Hotel=1]="Hotel",e[e.Flight=2]="Flight",e[e.Cruise=3]="Cruise",a;var e})()},8867:function(e,t,o){o.r(t),o.d(t,{SaleModule:function(){return he}});var a=o(8583),r=o(1535),n=o(4401),i=o(3092),s=o(5782),l=o(6163),u=o(6189),d=o(7238);const m=(0,d.X$)("flyInOut",[(0,d.SB)("in",(0,d.oB)({transform:"translateX(0)"})),(0,d.eR)("void => *",[(0,d.oB)({transform:"translateX(-100%)"}),(0,d.jt)(500)]),(0,d.eR)("* => void",[(0,d.jt)(500,(0,d.oB)({transform:"translateX(100%)"}))])]),p=(0,d.X$)("shrinkOut",[(0,d.SB)("in",(0,d.oB)({height:"*"})),(0,d.eR)("* => void",[(0,d.oB)({height:"*"}),(0,d.jt)(250,(0,d.oB)({height:0}))])]);var c=o(4781),g=o(3792);class Z{static GetDestinationOption(){return{Airline:g.J$.AtlasJet,DirectionType:0,BestAmount:122.44,Segments:[{Airline:g.J$.AtlasJet,FlightTime:g.Wb.Afternoon,AirlineName:"Atlasglobal",CompanyShortName:"",Departure:{City:"",Code:"IST",DateTime:"2018-09-21T00:00:00",Time:"00:00",TimeZoneOffset:""},Arrival:{City:"",Code:"AYT",DateTime:"2018-09-12T23:05:00",Time:"23:05",TimeZoneOffset:""},ElapsedTime:"01:10:00",IsTransfer:!1,VoyageCode:"20180921ATLJETISTAYTKK14",FlightNumber:"KK14",Equipment:{Content:"",AirEquipType:""}}],SegmentAvailabilities:[{ClassStatusCode:"ECONOMY",CabinType:2,ClassCode:"Y",AvailableSeats:"1",PricingInfos:[{PassengerType:0,CurrencyCode:"TRY",Taxes:null,BaseFare:null,TotalFare:{Amount:122.44,CurrencyCode:"TRY"}}],BestPricingInfo:{PassengerType:0,CurrencyCode:"TRY",Taxes:null,BaseFare:null,TotalFare:{Amount:122.44,CurrencyCode:"TRY"}}}]}}static GetTours(){return[{Package:null,PackageId:1,VariationId:1,Title:"Dummy Title",BaseCategory:{Id:1,Name:"Dummy BaseCategory"},Category:{Id:1,Name:"Dummy Category"},PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",Price:{Value:1453,ValueOld:0,Currency:{Code:"TRY",Name:"TL",Symbol:"\u20ba"}},Views:[{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x402",Caption:"Caption rsm1"},{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x403",Caption:"Caption rsm2"}],Tags:[]}]}static GetTourDetails(){return{Package:{TourId:1,Code:"Dummy Code",Name:"Dummy Name",Description:"Dummy Description",OperationTypeId:1,BaseCategory:{Id:1,Name:"Dummy BaseCategory"},Category:{Id:1,Name:"Dummy Category"},RegionId:1},ActionPlain:{ExcludedServices:"ExcludedServices",IncludedServices:"IncludedServices",Itineraries:[]},MapValues:[{Title:"",Latitude:"",Longitude:""}],VariationId:1,Title:"Dummy Title",PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",Price:{Currency:{Code:"TRY",Name:"TL",Symbol:"\u20ba"},Value:100},Views:[{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x402",Caption:"Caption rsm1"},{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x403",Caption:"Caption rsm2"}],Tags:["new"]}}static GetRoomAvailability(){return{Id:1,PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",UseType:"",Availability:9,MaxAdultCount:2,MaxChildCount:1,Room:{Id:0,RoomType:"0",Pansion:"0",BedType:"0",Facilities:[],Views:[{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x401",Caption:"Caption rsm2"}],Hotel:{Name:"Fairmont Quasar Istanbul",Code:"Code ",Description:"\u015ei\u015fli Florence Nightingale Hastanesi yak\u0131n\u0131nda, tam donan\u0131ml\u0131 spa olan l\xfcks otel.",Location:{Address:"B\xfcy\xfckdere Caddesi No.: 76 Mecidiyekoy 34394 \u0130stanbul TUR"},Views:[{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x401",Caption:"Caption rsm2"}]}},RoomPrices:[{AgeType:0,AgeRange:0,Price:{Value:1453,Currency:{Code:"TRY",Name:"TL",Symbol:"\u20ba"}}}]}}static GetRoomAvailabilities(){const e=[];for(let t=1;t<=10;t++)e.push({Id:t,PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",UseType:"",Availability:9,MaxAdultCount:2,MaxChildCount:1,Room:{Id:0,RoomType:"0",Pansion:"0",BedType:"0",Hotel:{Id:1,Name:"Fairmont Quasar Istanbul"+t,Code:"Code ",Description:"\u015ei\u015fli Florence Nightingale Hastanesi yak\u0131n\u0131nda, tam donan\u0131ml\u0131 spa olan l\xfcks otel.",Location:{Address:"B\xfcy\xfckdere Caddesi No.: 76 Mecidiyekoy 34394 \u0130stanbul TUR"},Facilities:[],Views:[{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:c.bW.Image,Source:"https://source.unsplash.com/random/960x400"+t,Caption:"Caption rsm2"}]}},RoomPrices:[{AgeType:0,AgeRange:0,Price:{Value:1453,Currency:{Code:"TRY",Name:"TL",Symbol:"\u20ba"}}}]});return e}}var C=o(7716),h=o(9046);function T(e,t){if(1&e&&C._UZ(0,"app-list-item",28),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit,a=C.oxw(2);C.Q6J("Type","Sale")("IsOdd",t)("Tour",a.GetSale(o.Type,o.Sale))}}function f(e,t){if(1&e&&C._UZ(0,"app-list-item",29),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit,a=C.oxw(2);C.Q6J("Type","Sale")("IsOdd",t)("Room",a.GetSale(o.Type,o.Sale))}}function y(e,t){if(1&e&&C._UZ(0,"app-list-item",30),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit,a=C.oxw(2);C.Q6J("Type","Sale")("IsOdd",t)("Option",a.GetSale(o.Type,o.Sale))}}function v(e,t){if(1&e){const e=C.EpF();C.TgZ(0,"div",22),C.TgZ(1,"div",23),C.TgZ(2,"button",24),C.NdJ("click",function(){const t=C.CHM(e).$implicit;return C.oxw(2).OnDelete(t.Type,t.Id)}),C.qZA(),C.qZA(),C.YNc(3,T,1,3,"app-list-item",25),C.YNc(4,f,1,3,"app-list-item",26),C.YNc(5,y,1,3,"app-list-item",27),C.qZA()}if(2&e){const e=t.$implicit,o=C.oxw(2);C.Q6J("@flyInOut","in"),C.xp6(3),C.Q6J("ngIf",e.Type===o.CartType().Tour),C.xp6(1),C.Q6J("ngIf",e.Type===o.CartType().Hotel),C.xp6(1),C.Q6J("ngIf",e.Type===o.CartType().Flight)}}function A(e,t){if(1&e&&(C.TgZ(0,"div",1),C.YNc(1,v,6,4,"div",21),C.ALo(2,"async"),C.qZA()),2&e){const e=C.oxw();C.Q6J("@shrinkOut","in"),C.xp6(1),C.Q6J("ngForOf",C.lcZ(2,2,e.Cart).Sales)}}function _(e,t){1&e&&(C.TgZ(0,"div",1),C.TgZ(1,"div",22),C.TgZ(2,"div",12),C.TgZ(3,"div",4),C._uU(4," Shopping Cart is Empty! "),C._UZ(5,"i",31),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&e&&C.Q6J("@shrinkOut","in")}const q=function(){return["/Sale/Basket"]};function N(e,t){1&e&&(C.TgZ(0,"a",32),C._uU(1,"Checkout"),C.qZA()),2&e&&C.Q6J("routerLink",C.DdM(1,q))}let b=(()=>{class e{constructor(e){this.store=e,this.TotalAmount=0,this.Currency="",this.CartType=()=>u.E}GetSale(e,t){switch(e){case u.E.Tour:case u.E.Hotel:case u.E.Flight:return t}return null}ngOnInit(){this.Cart=this.store.select("Cart"),this.Cart.subscribe(e=>{const t=e.Sales.map(e=>{let t;switch(e.Type){case u.E.Cruise:break;case u.E.Flight:const o=e.Sale.SegmentAvailabilities[0].PricingInfos[0];t={Type:e.Type,Currency:{Name:o.TotalFare.CurrencyCode},Value:o.TotalFare.Amount};break;case u.E.Hotel:const a=e.Sale.RoomPrices[0];t={Type:e.Type,Currency:a.Price.Currency,Value:a.Price.Value};break;case u.E.Tour:const r=e.Sale.Price;t={Type:e.Type,Currency:r.Currency,Value:r.Value}}return t});if(console.log(e.Sales,t),t.length>0){const e=t.map(e=>e.Value).reduce((e,t)=>e+t,0).toFixed(2);this.TotalAmount=Number(e),this.Currency=t[0].Currency.Symbol||"\u20ba"}else this.TotalAmount=0})}Test(){this.store.dispatch(l.mm({Cart:{Type:u.E.Tour,PassengerCount:3,Sale:Object.assign({},Z.GetTourDetails())}})),this.store.dispatch(l.mm({Cart:{Type:u.E.Hotel,PassengerCount:2,Sale:Object.assign({},Z.GetRoomAvailability())}})),this.store.dispatch(l.mm({Cart:{Type:u.E.Flight,PassengerCount:1,Sale:Object.assign({},Z.GetDestinationOption())}}))}OnDelete(e,t){this.store.dispatch(l.HG({Type:e,Id:t}))}}return e.\u0275fac=function(t){return new(t||e)(C.Y36(n.yh))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-cart"]],decls:37,vars:15,consts:[[1,"container"],[1,"row","mb-2"],[1,"col-12","p-md-1"],[1,"card","mb-2"],[1,"card-body"],[1,"card-title"],[1,"fas","fa-shopping-cart"],[1,"float-right"],[1,"btn","btn-outline-info","btn-sm","pull-right","mr-3",3,"routerLink"],[1,"btn","btn-outline-dark","btn-sm",3,"click"],["class","row mb-2",4,"ngIf"],[1,"col-12","p-md-1","mb-2"],[1,"card"],[1,"col-md-5","col-sm-5","float-left"],[1,"form-row"],[1,"md-form","input-group","m-0"],["type","text","placeholder","coupon code",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-mdb-color","waves-effect","m-0"],["class"," btn btn-outline-primary float-right",3,"routerLink",4,"ngIf"],[1,"float-left",2,"margin","5px"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[2,"position","absolute","right","20px","top","5px","z-index","1000"],[1,"Btn-close","Svg-bg","Svg-s-cross",3,"click"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Room",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Room"],[3,"Type","IsOdd","Option"],[1,"fas","fa-battery-empty"],[1,"btn","btn-outline-primary","float-right",3,"routerLink"]],template:function(e,t){1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"div",1),C.TgZ(2,"div",2),C.TgZ(3,"div",3),C.TgZ(4,"div",4),C.TgZ(5,"h5",5),C._UZ(6,"i",6),C._uU(7," Shopping Cart"),C.qZA(),C.TgZ(8,"span",7),C._uU(9),C.ALo(10,"async"),C.qZA(),C.TgZ(11,"a",8),C._uU(12,"Continue shopping"),C.qZA(),C.TgZ(13,"button",9),C.NdJ("click",function(){return t.Test()}),C._uU(14,"Add Dummy Data"),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.YNc(15,A,3,4,"div",10),C.ALo(16,"async"),C.YNc(17,_,6,1,"div",10),C.ALo(18,"async"),C.TgZ(19,"div",1),C.TgZ(20,"div",11),C.TgZ(21,"div",12),C.TgZ(22,"div",4),C.TgZ(23,"div",13),C.TgZ(24,"div",14),C.TgZ(25,"div",15),C._UZ(26,"input",16),C.TgZ(27,"div",17),C.TgZ(28,"button",18),C._uU(29,"Use coupon"),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(30,"div",7),C.YNc(31,N,2,2,"a",19),C.ALo(32,"async"),C.TgZ(33,"div",20),C._uU(34,"Total price: "),C.TgZ(35,"b"),C._uU(36),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&e&&(C.xp6(9),C.hij("Count: ",C.lcZ(10,7,t.Cart).Length,""),C.xp6(2),C.Q6J("routerLink","/Tour/"),C.xp6(4),C.Q6J("ngIf",C.lcZ(16,9,t.Cart).Length>0),C.xp6(2),C.Q6J("ngIf",0===C.lcZ(18,11,t.Cart).Length),C.xp6(14),C.Q6J("ngIf",C.lcZ(32,13,t.Cart).Length>0),C.xp6(5),C.AsE("",t.TotalAmount,"",t.Currency,""))},directives:[s.yS,a.O5,a.sg,h.G],pipes:[a.Ov],styles:[""],data:{animation:[m,p]}}),e})();var I=o(5207),S=o(6889),x=o(1776),U=o(2340),P=o(1841),F=o(3159);let w=(()=>{class e{constructor(e,t){this.http=e,this.serviceHelper=t,this.SaleChanged=new S.x,this.State={Latency:250,Urls:{Save:`${U.N.BaseApiHost}/api/1.0/Sale/Save`,PayPrepare:`${U.N.BaseApiHost}/api/1.0/Sale/SecurePrepare`,PayConfirm:`${U.N.BaseApiHost}/api/1.0/Sale/SecureConfirm`}}}Save(e,t=!0){return this.http.post(this.State.Urls.Save,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency)).subscribe(e=>{console.log(e),this.SaleChanged.next(e.Data)})}SecurePrepare(e,t=!1){return this.http.post(this.State.Urls.PayPrepare,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency))}SecureConfirm(e,t=!1){return this.http.post(this.State.Urls.PayConfirm,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency))}BankCardControl(e){return new x.y(e=>{e.next(null)})}}return e.\u0275fac=function(t){return new(t||e)(C.LFG(P.eN),C.LFG(F.Y))},e.\u0275prov=C.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=o(7812),J=o(3057),G=o(7773),O=o(2588);function Q(e,t){if(1&e&&(C.TgZ(0,"option",48),C._uU(1),C.qZA()),2&e){const e=t.$implicit;C.Q6J("value",e.Id),C.xp6(1),C.Oqu(e.Name)}}function R(e,t){if(1&e&&(C.TgZ(0,"option",48),C._uU(1),C.qZA()),2&e){const e=t.$implicit;C.Q6J("value",e.Id),C.xp6(1),C.Oqu(e.Name)}}let B=(()=>{class e{constructor(e){this.locationService=e,this.Countries=[],this.Cities=[]}ngOnInit(){this.locationService.GetCountries().subscribe(e=>{this.Countries=e})}FillDummyData(){this.GroupReservation.patchValue({Reservation:{Gender:"Female",FirstName:"-+ FirstName",LastName:"-+ LastName",Birthday:"1990/12/24",IdentificationNumber:"54516102821",ContactInformation:{Email:"Email@mail.com",PhoneCell:"-+ PhoneCell",Phone:"-+ Phone"},Address:{Line1:"-+ Line1",Line2:"-+ Line2",PostalCode:"-+ 34900"}}}),this.GroupReservation.get("Reservation.Address.Country").valueChanges.subscribe(e=>{this.onCountryChange(e),this.GroupReservation.get("Reservation.Address.City").setValue("2")}),this.GroupReservation.get("Reservation.Address.Country").setValue("2")}FillCustomerData(e,t){if(t){console.log("FillCustomerData",t);let o,a,r=new Date;t.Birthday&&(r=new Date(t.Birthday)),t.ContactInfos&&(o=t.ContactInfos[0],a=o.Addresses[0]),e.patchValue({Gender:t.Gender,FirstName:t.FirstName,LastName:t.LastName,Birthday:t.Birthday,IdentificationNumber:t.IdentificationNumber}),e.get("Birthday").setValue(r.getFullYear()+"/"+r.getMonth()+"/"+r.getDay()),e.get("Birthday").setValue(t.Birthday),o&&(e.patchValue({ContactInformation:{Email:t.Email,PhoneCell:o.CellPhone,Phone:o.Phone}}),a&&(e.patchValue({Address:{Line1:a.Line1,Line2:a.Line2,PostalCode:a.PostalCode}}),e.get("Address.Country").valueChanges.subscribe(t=>{this.onCountryChange(t),e.get("Address.City").setValue(a.City)}),e.get("Address.Country").setValue(a.Country),e.get("Address.District").setValue(a.District),e.get("Address.Neighborhood").setValue(a.Neighborhood)))}}GetFormControl(e,t=this.GroupReservation){return t.get(e)}GetFormArray(e,t=this.GroupReservation){return t.get(e)}onCountryChange(e){this.locationService.GetCities(e).subscribe(e=>{this.Cities=e})}}return e.\u0275fac=function(t){return new(t||e)(C.Y36(J.aU))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-reservation"]],inputs:{GroupReservation:"GroupReservation"},decls:100,vars:30,consts:[[1,"card","shadow","mb-2"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-outline-dark",3,"click"],[3,"formGroup"],[1,"col",3,"formGroupName"],[1,"row"],[1,"col-12","col-md-6"],[1,"form-group"],[1,"form-check","form-check-inline"],["type","radio","name","Gender","id","Gender_Male","value","Male",1,"form-check-input",3,"formControlName"],["for","Gender_Male",1,"form-check-label"],["type","radio","name","Gender","id","Gender_Female","value","Female",1,"form-check-input",3,"formControlName"],["for","Gender_Female",1,"form-check-label"],[1,"col-lg-6"],["for","FirstName"],["type","text","id","FirstName","placeholder","First Name",1,"form-control","form-control-sm",3,"formControlName"],[3,"Caption","ToCheck"],["for","LastName"],["type","text","id","LastName","placeholder","Last Name",1,"form-control","form-control-sm",3,"formControlName"],["for","IdentificationNumber"],["type","text","id","IdentificationNumber","placeholder","Identification Number",1,"form-control","form-control-sm",3,"formControlName"],["for","Birthday"],["type","text","id","Birthday","qlPickerDate","","autocomplete","off","placeholder","yy/mm/d",1,"form-control","form-control-sm",3,"formControlName"],[3,"formGroupName"],["for","Email"],[1,"fa","fa-envelope"],["type","email","id","Email","placeholder","Email",1,"form-control","form-control-sm",3,"formControlName"],["for","PhoneCell"],["type","text","id","PhoneCell","placeholder","Phone Cell",1,"form-control","form-control-sm",3,"formControlName"],["for","Phone"],["type","text","id","Phone","placeholder","Phone",1,"form-control","form-control-sm",3,"formControlName"],[1,"col-12"],["for","Line1"],["type","text","id","Line1","placeholder","1234 Main St",1,"form-control","form-control-sm",3,"formControlName"],["for","Line2"],["type","text","id","Line2","placeholder","Apartment, studio, or floor",1,"form-control","form-control-sm",3,"formControlName"],[1,"form-group","col-md-6"],["for","inputState"],["id","inputState",1,"form-select","form-select-sm",3,"formControlName","change"],["selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-md-4"],["for","inputCity"],["id","inputCity",1,"form-select","form-select-sm",3,"formControlName"],[1,"form-group","col-md-2"],["for","inputZip"],["type","text","id","inputZip",1,"form-control","form-control-sm",3,"formControlName"],[3,"value"]],template:function(e,t){1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"div",1),C.TgZ(2,"h2",2),C._uU(3,"Fatura M\xfc\u015fteri Bilgileri"),C.qZA(),C.TgZ(4,"span",3),C.NdJ("click",function(){return t.FillDummyData()}),C._uU(5,"Fill Dummy Data"),C.qZA(),C.ynx(6,4),C.TgZ(7,"div",5),C.TgZ(8,"div",6),C.TgZ(9,"div",7),C.TgZ(10,"div",8),C.TgZ(11,"label"),C._uU(12,"Gender:\xa0\xa0"),C.qZA(),C.TgZ(13,"div",9),C._UZ(14,"input",10),C.TgZ(15,"label",11),C._uU(16,"Male"),C.qZA(),C.qZA(),C.TgZ(17,"div",9),C._UZ(18,"input",12),C.TgZ(19,"label",13),C._uU(20,"Female"),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(21,"div",6),C.TgZ(22,"div",14),C.TgZ(23,"div",8),C.TgZ(24,"label",15),C._uU(25,"First Name"),C.qZA(),C._UZ(26,"input",16),C._UZ(27,"app-validation",17),C.qZA(),C.qZA(),C.TgZ(28,"div",14),C.TgZ(29,"div",8),C.TgZ(30,"label",18),C._uU(31,"Last Name"),C.qZA(),C._UZ(32,"input",19),C._UZ(33,"app-validation",17),C.qZA(),C.qZA(),C.qZA(),C.TgZ(34,"div",6),C.TgZ(35,"div",14),C.TgZ(36,"div",8),C.TgZ(37,"label",20),C._uU(38,"Identification Number"),C.qZA(),C._UZ(39,"input",21),C._UZ(40,"app-validation",17),C.qZA(),C.qZA(),C.TgZ(41,"div",14),C.TgZ(42,"div",8),C.TgZ(43,"label",22),C._uU(44,"Birthday"),C.qZA(),C._UZ(45,"input",23),C._UZ(46,"app-validation",17),C.qZA(),C.qZA(),C.qZA(),C.TgZ(47,"div",24),C.TgZ(48,"div",6),C.TgZ(49,"div",14),C.TgZ(50,"div",8),C.TgZ(51,"label",25),C._UZ(52,"i",26),C._uU(53," Email"),C.qZA(),C._UZ(54,"input",27),C._UZ(55,"app-validation",17),C.qZA(),C.qZA(),C.TgZ(56,"div",14),C._UZ(57,"div",8),C.qZA(),C.qZA(),C.TgZ(58,"div",6),C.TgZ(59,"div",14),C.TgZ(60,"div",8),C.TgZ(61,"label",28),C._uU(62,"Phone Cell"),C.qZA(),C._UZ(63,"input",29),C.qZA(),C.qZA(),C.TgZ(64,"div",14),C.TgZ(65,"div",8),C.TgZ(66,"label",30),C._uU(67,"Phone"),C.qZA(),C._UZ(68,"input",31),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(69,"div",24),C.TgZ(70,"div",6),C.TgZ(71,"div",32),C.TgZ(72,"div",8),C.TgZ(73,"label",33),C._uU(74,"Address"),C.qZA(),C._UZ(75,"input",34),C.qZA(),C.qZA(),C.TgZ(76,"div",32),C.TgZ(77,"div",8),C.TgZ(78,"label",35),C._uU(79,"Address 2"),C.qZA(),C._UZ(80,"input",36),C.qZA(),C.qZA(),C.qZA(),C.TgZ(81,"div",6),C.TgZ(82,"div",37),C.TgZ(83,"label",38),C._uU(84,"Country"),C.qZA(),C.TgZ(85,"select",39),C.NdJ("change",function(e){return t.onCountryChange(e.target.value)}),C.TgZ(86,"option",40),C._uU(87,"Choose..."),C.qZA(),C.YNc(88,Q,2,2,"option",41),C.qZA(),C.qZA(),C.TgZ(89,"div",42),C.TgZ(90,"label",43),C._uU(91,"City"),C.qZA(),C.TgZ(92,"select",44),C.TgZ(93,"option",40),C._uU(94,"Choose..."),C.qZA(),C.YNc(95,R,2,2,"option",41),C.qZA(),C.qZA(),C.TgZ(96,"div",45),C.TgZ(97,"label",46),C._uU(98,"Zip"),C.qZA(),C._UZ(99,"input",47),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.BQk(),C.qZA(),C.qZA()),2&e&&(C.xp6(6),C.Q6J("formGroup",t.GroupReservation),C.xp6(1),C.Q6J("formGroupName","Reservation"),C.xp6(7),C.Q6J("formControlName","Gender"),C.xp6(4),C.Q6J("formControlName","Gender"),C.xp6(8),C.Q6J("formControlName","FirstName"),C.xp6(1),C.Q6J("Caption","FirstName")("ToCheck",t.GetFormControl("Reservation.FirstName")),C.xp6(5),C.Q6J("formControlName","LastName"),C.xp6(1),C.Q6J("Caption","LastName")("ToCheck",t.GetFormControl("Reservation.LastName")),C.xp6(6),C.Q6J("formControlName","IdentificationNumber"),C.xp6(1),C.Q6J("Caption","IdentificationNumber")("ToCheck",t.GetFormControl("Reservation.IdentificationNumber")),C.xp6(5),C.Q6J("formControlName","Birthday"),C.xp6(1),C.Q6J("Caption","Birthday")("ToCheck",t.GetFormControl("Reservation.Birthday")),C.xp6(1),C.Q6J("formGroupName","ContactInformation"),C.xp6(7),C.Q6J("formControlName","Email"),C.xp6(1),C.Q6J("Caption","Email")("ToCheck",t.GetFormControl("Reservation.ContactInformation.Email")),C.xp6(8),C.Q6J("formControlName","PhoneCell"),C.xp6(5),C.Q6J("formControlName","Phone"),C.xp6(1),C.Q6J("formGroupName","Address"),C.xp6(6),C.Q6J("formControlName","Line1"),C.xp6(5),C.Q6J("formControlName","Line2"),C.xp6(5),C.Q6J("formControlName","Country"),C.xp6(3),C.Q6J("ngForOf",t.Countries),C.xp6(4),C.Q6J("formControlName","City"),C.xp6(3),C.Q6J("ngForOf",t.Cities),C.xp6(4),C.Q6J("formControlName","PostalCode"))},directives:[i.JL,i.sg,i.x0,i._,i.Fj,i.JJ,i.u,G.c,O.d,i.EJ,i.YN,i.Kr,a.sg],styles:[""],encapsulation:2}),e})();function L(e,t){if(1&e&&(C.TgZ(0,"div",7),C.TgZ(1,"div",8),C.TgZ(2,"h5",1),C._uU(3),C.qZA(),C.TgZ(4,"div",9),C.TgZ(5,"div",10),C.TgZ(6,"div",11),C._UZ(7,"input",12),C.TgZ(8,"label",13),C._uU(9,"Male"),C.qZA(),C.qZA(),C.TgZ(10,"div",11),C._UZ(11,"input",14),C.TgZ(12,"label",13),C._uU(13,"Female"),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(14,"div",15),C.TgZ(15,"label",16),C._uU(16,"Birthday"),C.qZA(),C._UZ(17,"input",17),C._UZ(18,"app-validation",18),C.qZA(),C.TgZ(19,"div",15),C.TgZ(20,"label",16),C._UZ(21,"i",19),C._uU(22," Email"),C.qZA(),C._UZ(23,"input",20),C._UZ(24,"app-validation",18),C.qZA(),C.TgZ(25,"div",15),C.TgZ(26,"label",16),C._uU(27,"Name"),C.qZA(),C._UZ(28,"input",21),C._UZ(29,"app-validation",18),C.qZA(),C.TgZ(30,"div",15),C.TgZ(31,"label",16),C._uU(32,"Last Name"),C.qZA(),C._UZ(33,"input",22),C._UZ(34,"app-validation",18),C.qZA(),C.TgZ(35,"div",15),C.TgZ(36,"label",16),C._uU(37,"IdentityNo"),C.qZA(),C._UZ(38,"input",23),C._UZ(39,"app-validation",18),C.qZA(),C.TgZ(40,"div",15),C.TgZ(41,"label",16),C._uU(42,"PassportNo"),C.qZA(),C._UZ(43,"input",24),C.qZA(),C.TgZ(44,"div",15),C.TgZ(45,"label",25),C._uU(46,"PassportType"),C.qZA(),C._UZ(47,"input",26),C.qZA(),C.TgZ(48,"ul",27),C.TgZ(49,"li",28),C._uU(50,"Additional Services"),C.qZA(),C.TgZ(51,"li",28),C._uU(52,"..."),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&e){const e=t.$implicit,o=t.index,a=C.oxw();C.Q6J("formGroupName",o.toString()),C.xp6(3),C.hij("Passenger ",o+1," "),C.xp6(4),C.MGl("name","Passenger_",a.CartModel.Id+"_"+o,"_Gender"),C.MGl("id","Passenger_",a.CartModel.Id+"_"+o,"_Male"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Gender"),C.xp6(1),C.MGl("for","Passenger_",a.CartModel.Id+"_"+o,"_Male"),C.xp6(3),C.MGl("name","Passenger_",a.CartModel.Id+"_"+o,"_Gender"),C.MGl("id","Passenger_",a.CartModel.Id+"_"+o,"_Female"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Gender"),C.xp6(1),C.MGl("for","Passenger_",a.CartModel.Id+"_"+o,"_Female"),C.xp6(3),C.s9C("for","Passenger_"+a.CartModel.Id+"_"+o+"_Birthday"),C.xp6(2),C.s9C("id","Passenger_"+a.CartModel.Id+"_"+o+"_Birthday"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Birthday"),C.xp6(1),C.Q6J("Caption","Birthday")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_Birthday",e)),C.xp6(2),C.s9C("for","Passenger_"+a.CartModel.Id+"_"+o+"_Email"),C.xp6(3),C.s9C("id","Passenger_"+a.CartModel.Id+"_"+o+"_Email"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Email"),C.xp6(1),C.Q6J("Caption","Email")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_Email",e)),C.xp6(2),C.s9C("for","Passenger_"+a.CartModel.Id+"_"+o+"_FirstName"),C.xp6(2),C.s9C("id","Passenger_"+a.CartModel.Id+"_"+o+"_FirstName"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_FirstName"),C.xp6(1),C.Q6J("Caption","FirstName")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_FirstName",e)),C.xp6(2),C.s9C("for","Passenger_"+a.CartModel.Id+"_"+o+"_LastName"),C.xp6(2),C.s9C("id","Passenger_"+a.CartModel.Id+"_"+o+"_LastName"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_LastName"),C.xp6(1),C.Q6J("Caption","LastName")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_LastName",e)),C.xp6(2),C.s9C("for","Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo"),C.xp6(2),C.s9C("id","Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo"),C.xp6(1),C.Q6J("Caption","IdentityNo")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo",e)),C.xp6(2),C.s9C("for","Passenger_"+a.CartModel.Id+"_"+o+"_PassportNo"),C.xp6(2),C.s9C("id","Passenger_"+a.CartModel.Id+"_"+o+"_PassportNo"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_PassportNo"),C.xp6(2),C.s9C("for","Passenger_"+a.CartModel.Id+"_"+o+"_PassportType"),C.xp6(2),C.s9C("id","Passenger_"+a.CartModel.Id+"_"+o+"_PassportType"),C.Q6J("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_PassportType")}}let E=(()=>{class e{constructor(){this.Passengers=[]}ngOnChanges(e){}ngOnInit(){}FillDummyData(){this.GroupPassengers.get("Passengers").controls.forEach((e,t)=>{const o="Passenger_"+this.CartModel.Id+"_"+t+"_";e.get(o+"Gender").setValue("Female"),e.get(o+"Birthday").setValue("1990/12/24"),e.get(o+"Email").setValue("Email@mail.com"),e.get(o+"FirstName").setValue("-+ FirstName"+t),e.get(o+"LastName").setValue("-+ LastName"+t),e.get(o+"IdentityNo").setValue("-+ IdentityNo"+t),e.get(o+"PassportNo").setValue("-+ PassportNo"+t),e.get(o+"PassportType").setValue("-+ PassportType"+t)})}GetFormControl(e,t=this.GroupPassengers){return t.get(e)}GetFormArray(e,t=this.GroupPassengers){return t.get(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-passengers"]],inputs:{CartModel:"CartModel",GroupPassengers:"GroupPassengers"},features:[C.TTD],decls:17,vars:5,consts:[[1,"card","card-body",3,"formGroup"],[1,"card-title"],[1,"btn","btn-outline-dark",3,"click"],[1,"row","mb-2"],[1,"col"],[1,"row","mb-2",3,"formArrayName"],["class","col-12 col-md-6 col-lg-4 p-md-1 mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4","p-md-1","mb-2",3,"formGroupName"],[1,"shadow","p-3","rounded"],[1,"form-row"],[1,"form-group","col-12"],[1,"form-check","form-check-inline"],["type","radio","value","Male",1,"form-check-input",3,"name","formControlName","id"],[1,"form-check-label",3,"for"],["type","radio","value","Female",1,"form-check-input",3,"name","formControlName","id"],[1,"form-group"],[3,"for"],["type","text","appDatePicker","","autocomplete","off","placeholder","yy/mm/d",1,"form-control","form-control-sm",3,"id","formControlName"],[3,"Caption","ToCheck"],[1,"fa","fa-envelope"],["type","text","placeholder","Email",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","Name",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","Last Name",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","IdentityNo",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","PassportNo",1,"form-control","form-control-sm",3,"id","formControlName"],[1,"active",3,"for"],["type","text","placeholder","PassportType",1,"form-control","form-control-sm",3,"id","formControlName"],[1,"list-group","list-group-flush"],[1,"list-group-item"]],template:function(e,t){1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"h2",1),C._uU(2,"Passengers"),C.qZA(),C.TgZ(3,"p"),C.TgZ(4,"span",2),C.NdJ("click",function(){return t.FillDummyData()}),C._uU(5,"Fill Dummy Data"),C.qZA(),C.qZA(),C.TgZ(6,"div",3),C.TgZ(7,"div",4),C.TgZ(8,"label"),C._uU(9,"Id:"),C.qZA(),C._uU(10),C.qZA(),C.TgZ(11,"div",4),C.TgZ(12,"label"),C._uU(13,"PassengerCount:"),C.qZA(),C._uU(14),C.qZA(),C.qZA(),C.TgZ(15,"div",5),C.YNc(16,L,53,41,"div",6),C.qZA(),C.qZA()),2&e&&(C.Q6J("formGroup",t.GroupPassengers),C.xp6(10),C.hij(" ",t.CartModel.Id," "),C.xp6(4),C.hij(" ",t.CartModel.PassengerCount," "),C.xp6(1),C.Q6J("formArrayName","Passengers"),C.xp6(1),C.Q6J("ngForOf",t.GetFormArray("Passengers").controls))},directives:[i.JL,i.sg,i.CE,a.sg,i.x0,i._,i.Fj,i.JJ,i.u,G.c],styles:[""]}),e})();function M(e,t){if(1&e&&C._UZ(0,"app-list-item",19),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit,a=C.oxw(3);C.Q6J("Type","Sale")("IsOdd",t)("Tour",a.GetSale(o.Type,o.Sale))}}function D(e,t){if(1&e&&C._UZ(0,"app-list-item",20),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit,a=C.oxw(3);C.Q6J("Type","Default")("IsOdd",t)("Room",a.GetSale(o.Type,o.Sale))}}function Y(e,t){if(1&e&&C._UZ(0,"app-list-item",21),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit,a=C.oxw(3);C.Q6J("Type","Default")("IsOdd",t)("Option",a.GetSale(o.Type,o.Sale))}}function V(e,t){if(1&e&&(C.TgZ(0,"div",2),C.ynx(1,14),C.YNc(2,M,1,3,"app-list-item",15),C.YNc(3,D,1,3,"app-list-item",16),C.YNc(4,Y,1,3,"app-list-item",17),C.ynx(5,14),C._UZ(6,"app-passengers",18),C.BQk(),C.BQk(),C._UZ(7,"hr"),C.qZA()),2&e){const e=t.$implicit,o=C.oxw(3);C.xp6(1),C.Q6J("formGroupName","Sales"),C.xp6(1),C.Q6J("ngIf",e.Type===o.CartType().Tour),C.xp6(1),C.Q6J("ngIf",e.Type===o.CartType().Hotel),C.xp6(1),C.Q6J("ngIf",e.Type===o.CartType().Flight),C.xp6(1),C.Q6J("formGroupName","Sale_"+e.Id),C.xp6(1),C.Q6J("CartModel",e)("GroupPassengers",o.GetFormGroup("Sales.Sale_"+e.Id))}}function H(e,t){if(1&e&&(C.ynx(0),C.YNc(1,V,8,7,"div",13),C.ALo(2,"async"),C.BQk()),2&e){const e=C.oxw(2);C.xp6(1),C.Q6J("ngForOf",C.lcZ(2,1,e.Cart).Sales)}}function $(e,t){1&e&&(C.TgZ(0,"div",22),C._uU(1,"Please enter a valid data!!"),C.qZA())}function j(e,t){if(1&e){const e=C.EpF();C.TgZ(0,"form",7),C.NdJ("ngSubmit",function(){return C.CHM(e),C.oxw().onSubmit()}),C._UZ(1,"app-reservation",8),C.YNc(2,H,3,3,"ng-container",9),C.ALo(3,"async"),C.TgZ(4,"div",10),C.TgZ(5,"div",3),C.TgZ(6,"div",4),C.TgZ(7,"button",11),C._uU(8,"Approve"),C.qZA(),C.YNc(9,$,2,0,"div",12),C.qZA(),C.qZA(),C.qZA(),C.qZA()}if(2&e){const e=C.oxw();C.Q6J("formGroup",e.FormBasket),C.xp6(1),C.Q6J("GroupReservation",e.FormBasket),C.xp6(1),C.Q6J("ngIf",C.lcZ(3,5,e.Cart).Length>0),C.xp6(5),C.Q6J("disabled",!e.FormBasket.valid),C.xp6(2),C.Q6J("ngIf",!e.FormBasket.valid&&e.FormBasket.touched)}}let W=(()=>{class e{constructor(e,t,o,a,r){this.route=e,this.router=t,this.saleService=o,this.store=a,this.dialogService=r,this.changedSaved=!1,this.CartType=()=>u.E}ngOnInit(){this.Cart=this.store.select("Cart"),this.supStore=this.store.select("Cart").subscribe(e=>{this.Sales=e.Sales,this.InitializeForm(e.Sales)}),this.supStore=this.store.select("Auth").pipe((0,I.U)(e=>e.User)).subscribe(e=>{this.User=e})}InitializeForm(e){this.FormBasket=new i.cw({Reservation:new i.cw({Gender:new i.NI(null,i.kI.required),FirstName:new i.NI(null,[i.kI.required]),LastName:new i.NI(null),Birthday:new i.NI(null,i.kI.required),IdentificationNumber:new i.NI(null,i.kI.required),ContactInformation:new i.cw({Email:new i.NI(null,[i.kI.required,i.kI.email]),PhoneCell:new i.NI(null),Phone:new i.NI(null)}),Address:new i.cw({Line1:new i.NI(null),Line2:new i.NI(null),PostalCode:new i.NI(null),Country:new i.NI(null),City:new i.NI(null),District:new i.NI(null),Neighborhood:new i.NI(null)})}),Sales:new i.cw({})}),e.forEach(e=>{const t=new i.cw({Id:new i.NI({value:e.Id,disabled:!0}),Passengers:new i.Oe([])});for(const o of[...Array(e.PassengerCount).keys()]){const a="Passenger_"+e.Id+"_"+o+"_",r=new i.cw({[a+"Gender"]:new i.NI("",i.kI.required),[a+"Birthday"]:new i.NI("",i.kI.required),[a+"Email"]:new i.NI("",[i.kI.required,i.kI.email]),[a+"FirstName"]:new i.NI("",[i.kI.required]),[a+"LastName"]:new i.NI("",i.kI.required),[a+"IdentityNo"]:new i.NI("",i.kI.required),[a+"PassportNo"]:new i.NI(""),[a+"PassportType"]:new i.NI("")});t.get("Passengers").push(r)}this.FormBasket.get("Sales").addControl("Sale_"+e.Id,t)})}GetSale(e,t){switch(e){case u.E.Tour:case u.E.Hotel:case u.E.Flight:return t}return null}GetFormGroup(e,t=this.FormBasket){return t.get(e)}GetCustomer(e){const t={Email:e.get("ContactInformation.Email").value,WhoIsName:"",Phone:e.get("ContactInformation.Phone").value,OtherPhones:"",CellPhone:e.get("ContactInformation.PhoneCell").value,Fax:"",SocialMediaLinks:"",WebAddress:"",Addresses:[{AddressType:"",Name:"",Line1:e.get("Address.Line1").value,Line2:e.get("Address.Line2").value,PostalCode:e.get("Address.PostalCode").value,Country:e.get("Address.Country").value,City:e.get("Address.City").value,District:e.get("Address.District").value,Neighborhood:e.get("Address.Neighborhood").value}]};return{FirstName:e.get("FirstName").value,LastName:e.get("LastName").value,Gender:e.get("Gender").value,Birthday:e.get("Birthday").value,Email:e.get("ContactInformation.Email").value,IdentificationNumber:e.get("IdentificationNumber").value,TaxIdentificationNumber:0,IsMember:!1,IsParent:!1,ContactInfos:[t]}}CalculateAge(e){let t=0;if(e){const o=new Date(e),a=Math.abs(Date.now()-+o);t=Math.floor(a/864e5/365)}return t}GetPassenger(e,t,o){const a="Passenger_"+t+"_"+o+"_";return{AgeType:0,Gender:e.get(a+"Gender").value,Birthday:e.get(a+"Birthday").value,Age:this.CalculateAge(e.get(a+"Birthday").value),Email:e.get(a+"Email").value,FirstName:e.get(a+"FirstName").value,LastName:e.get(a+"LastName").value,IdentityNo:e.get(a+"IdentityNo").value,PassportNo:e.get(a+"PassportNo").value,PassportType:e.get(a+"PassportType").value}}onSubmit(){this.changedSaved=!0,this.SaleRequest={AgencyCode:"B2C",BasketCode:"",User:this.User,Customers:[],Sales:[]},console.log(this.SaleRequest);const e=this.GetCustomer(this.FormBasket.get("Reservation"));this.SaleRequest.Customers.push(e),this.Sales.forEach(e=>{const t=[];this.FormBasket.get("Sales.Sale_"+e.Id+".Passengers").controls.forEach((o,a)=>{const r=this.GetPassenger(o,e.Id,a);t.push(r)});const o={};switch(o.Passengers=t,o.Type=u.E[e.Type].toString(),e.Type){case u.E.Hotel:o.Hotel=e.Sale;break;case u.E.Tour:o.Tour=e.Sale;break;case u.E.Flight:o.Flight=e.Sale}this.SaleRequest.Sales.push(o)}),this.saleService.Save(this.SaleRequest),console.log("BasketForm SaleRequest",this.SaleRequest),this.router.navigate(["/Sale/Payment"],{relativeTo:this.route}).then()}canDeactivate(){return!!this.changedSaved||this.dialogService.Prompt("Hey there!","Do you want to discard the changes?")}ngOnDestroy(){this.supStore&&this.supStore.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(C.Y36(s.gz),C.Y36(s.F0),C.Y36(w),C.Y36(n.yh),C.Y36(k.xA))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-basket"]],decls:17,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-3"],[1,"card","shadow"],[1,"card-body"],[1,"card-title"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"col-12","mb-3",3,"GroupReservation"],[4,"ngIf"],[1,"col-12","mb-2"],["type","submit",1,"btn","btn-primary","mb-2",3,"disabled"],["class","help-block",4,"ngIf"],["class","col-12 mb-3",4,"ngFor","ngForOf"],[3,"formGroupName"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Room",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[3,"CartModel","GroupPassengers"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Room"],[3,"Type","IsOdd","Option"],[1,"help-block"]],template:function(e,t){1&e&&(C.TgZ(0,"div",0),C.TgZ(1,"div",1),C.TgZ(2,"div",2),C.TgZ(3,"div",3),C.TgZ(4,"div",4),C.TgZ(5,"h2",5),C._uU(6,"Basket"),C.qZA(),C._uU(7),C._UZ(8,"hr"),C._uU(9," m\xfc\u015fteri bilgilerinin al\u0131nmas\u0131 "),C._UZ(10,"br"),C._uU(11,"carttan gelen sat\u0131\u015flar apiden sat\u0131\u015flar\u0131n sepet kodlar\u0131n\u0131 almas\u0131 "),C._UZ(12,"br"),C._uU(13,"sat\u0131\u015flar\u0131n yolcu bilgilerinin al\u0131nmas\u0131 "),C._UZ(14,"br"),C._uU(15,"dinamik yolcu say\u0131s\u0131??? "),C.qZA(),C.qZA(),C.qZA(),C.YNc(16,j,10,7,"form",6),C.qZA(),C.qZA()),2&e&&(C.xp6(7),C.hij(" ",t.SaleRequest?t.SaleRequest.BasketCode:"_local_"," "),C.xp6(9),C.Q6J("ngIf",t.FormBasket))},directives:[a.O5,i._Y,i.JL,i.sg,B,a.sg,i.x0,E,h.G],pipes:[a.Ov],styles:[""]}),e})();var X=o(9702);function z(e,t){if(1&e&&C._UZ(0,"app-list-item",54),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit;C.Q6J("Type","Sale")("IsOdd",t)("Tour",o.Tour)}}function K(e,t){if(1&e&&C._UZ(0,"app-list-item",55),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit;C.Q6J("Type","Default")("IsOdd",t)("Room",o.Hotel)}}function ee(e,t){if(1&e&&C._UZ(0,"app-list-item",56),2&e){const e=C.oxw(),t=e.odd,o=e.$implicit;C.Q6J("Type","Default")("IsOdd",t)("Option",o.Flight)}}function te(e,t){if(1&e&&(C.TgZ(0,"div",62),C.TgZ(1,"div",63),C.TgZ(2,"h5",59),C._uU(3),C.qZA(),C.TgZ(4,"ul",64),C.TgZ(5,"li",65),C.TgZ(6,"label"),C._uU(7,"Gender"),C.qZA(),C._uU(8,":"),C.TgZ(9,"strong"),C._uU(10),C.qZA(),C.qZA(),C.TgZ(11,"li",65),C.TgZ(12,"label"),C._uU(13,"Birthday"),C.qZA(),C._uU(14,":"),C.TgZ(15,"strong"),C._uU(16),C.qZA(),C.qZA(),C.TgZ(17,"li",65),C.TgZ(18,"label"),C._uU(19,"Email"),C.qZA(),C._uU(20,":"),C.TgZ(21,"strong"),C._uU(22),C.qZA(),C.qZA(),C.TgZ(23,"li",65),C.TgZ(24,"label"),C._uU(25,"Name "),C.qZA(),C._uU(26,":"),C.TgZ(27,"strong"),C._uU(28),C.qZA(),C.qZA(),C.TgZ(29,"li",65),C.TgZ(30,"label"),C._uU(31,"IdentityNo"),C.qZA(),C._uU(32,":"),C.TgZ(33,"strong"),C._uU(34),C.qZA(),C.qZA(),C.TgZ(35,"li",65),C.TgZ(36,"label"),C._uU(37,"PassportNo"),C.qZA(),C._uU(38,":"),C.TgZ(39,"strong"),C._uU(40),C.qZA(),C.qZA(),C.TgZ(41,"li",65),C.TgZ(42,"label"),C._uU(43,"PassportType"),C.qZA(),C._uU(44,":"),C.TgZ(45,"strong"),C._uU(46),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA()),2&e){const e=t.$implicit,o=t.index;C.xp6(3),C.hij("Passenger ",o+1," "),C.xp6(7),C.Oqu(e.Gender),C.xp6(6),C.Oqu(e.Birthday),C.xp6(6),C.Oqu(e.Email),C.xp6(6),C.AsE("",e.FirstName,"\xa0",e.LastName,""),C.xp6(6),C.Oqu(e.IdentityNo),C.xp6(6),C.Oqu(e.PassportNo),C.xp6(6),C.Oqu(e.PassportType)}}function oe(e,t){if(1&e&&(C.TgZ(0,"div",57),C.TgZ(1,"div",58),C.TgZ(2,"div",6),C.TgZ(3,"h5",59),C._uU(4,"Customer Info"),C.qZA(),C.TgZ(5,"label"),C._uU(6,"Gender"),C.qZA(),C._uU(7,":"),C.TgZ(8,"strong"),C._uU(9),C.qZA(),C._UZ(10,"br"),C.TgZ(11,"label"),C._uU(12,"Name"),C.qZA(),C._uU(13,":"),C.TgZ(14,"strong"),C._uU(15),C.qZA(),C._UZ(16,"br"),C.TgZ(17,"label"),C._uU(18,"Birthday"),C.qZA(),C._uU(19,":"),C.TgZ(20,"strong"),C._uU(21),C.qZA(),C.qZA(),C.qZA(),C._UZ(22,"br"),C.TgZ(23,"div",60),C.YNc(24,te,47,9,"div",61),C.qZA(),C.qZA()),2&e){const e=C.oxw().$implicit,t=C.oxw(2);C.xp6(9),C.Oqu(t.SaleRequest.Customers[0].Gender),C.xp6(6),C.AsE("",t.SaleRequest.Customers[0].FirstName,"\xa0",t.SaleRequest.Customers[0].LastName,""),C.xp6(6),C.Oqu(t.SaleRequest.Customers[0].Birthday),C.xp6(3),C.Q6J("ngForOf",e.Passengers)}}function ae(e,t){if(1&e&&(C.TgZ(0,"div",48),C.YNc(1,z,1,3,"app-list-item",49),C.YNc(2,K,1,3,"app-list-item",50),C.YNc(3,ee,1,3,"app-list-item",51),C.TgZ(4,"div",52),C.TgZ(5,"label"),C._uU(6,"SaleCode"),C.qZA(),C._uU(7,":"),C.TgZ(8,"strong"),C._uU(9),C.qZA(),C.TgZ(10,"label"),C._uU(11,"BusinessCode"),C.qZA(),C._uU(12,":"),C.TgZ(13,"strong"),C._uU(14),C.qZA(),C.qZA(),C.YNc(15,oe,25,5,"div",53),C.qZA()),2&e){const e=t.$implicit,o=C.oxw(2);C.xp6(1),C.Q6J("ngIf",e.Tour),C.xp6(1),C.Q6J("ngIf",e.Hotel),C.xp6(1),C.Q6J("ngIf",e.Flight),C.xp6(6),C.Oqu(e.SaleCode),C.xp6(5),C.Oqu(e.BusinessCode),C.xp6(1),C.Q6J("ngIf",o.SaleRequest.Customers[0])}}function re(e,t){if(1&e&&(C.TgZ(0,"div"),C._uU(1),C.qZA()),2&e){const e=C.oxw(2);C.xp6(1),C.xDo(" ",e.BinInfo.BinNo," ",e.BinInfo.CardBrand," ",e.BinInfo.CardLevel," ",e.BinInfo.ImageSrc," ",e.BinInfo.IssuingBank," ")}}function ne(e,t){if(1&e&&(C.TgZ(0,"option",66),C._uU(1),C.qZA()),2&e){const e=t.$implicit;C.s9C("value",e.toString().substring(2,4)),C.xp6(1),C.hij("",e," ")}}function ie(e,t){if(1&e){const e=C.EpF();C.TgZ(0,"div",1),C.TgZ(1,"div",2),C.TgZ(2,"h2"),C._uU(3,"Payment"),C.qZA(),C._uU(4),C.qZA(),C.YNc(5,ae,16,6,"div",3),C.TgZ(6,"div",4),C.TgZ(7,"div",5),C.TgZ(8,"div",6),C.TgZ(9,"span",7),C.NdJ("click",function(){return C.CHM(e),C.oxw().FillDummyData()}),C._uU(10,"Fill Dummy Data"),C.qZA(),C.qZA(),C.qZA(),C.TgZ(11,"nav"),C.TgZ(12,"div",8),C.TgZ(13,"a",9),C._uU(14,"Credit Card"),C.qZA(),C.TgZ(15,"a",10),C._uU(16,"Paypal"),C.qZA(),C.qZA(),C.qZA(),C.TgZ(17,"div",11),C.TgZ(18,"div",12),C.TgZ(19,"form",13),C.NdJ("ngSubmit",function(){return C.CHM(e),C.oxw().OnSubmit()}),C._UZ(20,"div"),C.TgZ(21,"div",14),C.TgZ(22,"div",15),C.TgZ(23,"div",16),C._UZ(24,"input",17),C.TgZ(25,"label",18),C._uU(26),C.qZA(),C._UZ(27,"app-validation",19),C.YNc(28,re,2,5,"div",20),C.qZA(),C.qZA(),C.TgZ(29,"div",15),C.TgZ(30,"div",16),C._UZ(31,"input",21),C.TgZ(32,"label",22),C._uU(33,"Card Holder Name:"),C.qZA(),C._UZ(34,"app-validation",19),C.qZA(),C.qZA(),C.qZA(),C.TgZ(35,"div",23),C.TgZ(36,"div",24),C.TgZ(37,"select",25),C.TgZ(38,"option",26),C._uU(39,"Jan (01)"),C.qZA(),C.TgZ(40,"option",27),C._uU(41,"Feb (02)"),C.qZA(),C.TgZ(42,"option",28),C._uU(43,"Mar (03)"),C.qZA(),C.TgZ(44,"option",29),C._uU(45,"Apr (04)"),C.qZA(),C.TgZ(46,"option",30),C._uU(47,"May (05)"),C.qZA(),C.TgZ(48,"option",31),C._uU(49,"June (06)"),C.qZA(),C.TgZ(50,"option",32),C._uU(51,"July (07)"),C.qZA(),C.TgZ(52,"option",33),C._uU(53,"Aug (08)"),C.qZA(),C.TgZ(54,"option",34),C._uU(55,"Sep (09)"),C.qZA(),C.TgZ(56,"option",35),C._uU(57,"Oct (10)"),C.qZA(),C.TgZ(58,"option",36),C._uU(59,"Nov (11)"),C.qZA(),C.TgZ(60,"option",37),C._uU(61,"Dec (12)"),C.qZA(),C.qZA(),C.TgZ(62,"label",38),C._uU(63,"Expiration Date: "),C.qZA(),C._UZ(64,"app-validation",19),C.qZA(),C.TgZ(65,"div",24),C.TgZ(66,"select",39),C.YNc(67,ne,2,2,"option",40),C.qZA(),C._UZ(68,"label",41),C._UZ(69,"app-validation",19),C.qZA(),C.TgZ(70,"div",15),C._UZ(71,"input",42),C.TgZ(72,"label",43),C._uU(73,"Card CVV:"),C.qZA(),C._UZ(74,"app-validation",19),C.qZA(),C.qZA(),C.TgZ(75,"div",23),C.TgZ(76,"div",15),C.TgZ(77,"div",16),C._UZ(78,"input",44),C.TgZ(79,"label",45),C._uU(80,"Amount:"),C.qZA(),C.qZA(),C.qZA(),C.TgZ(81,"div",15),C.TgZ(82,"button",46),C._uU(83,"Pay Now "),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.qZA(),C.TgZ(84,"div",47),C._uU(85,"..."),C.qZA(),C.qZA(),C.qZA(),C.qZA()}if(2&e){const e=C.oxw();C.xp6(4),C.lnq(" ",e.SaleRequest.BasketCode," ",e.SaleRequest.AgencyCode," ",null==e.SaleRequest.User?null:e.SaleRequest.User.Username," "),C.xp6(1),C.Q6J("ngForOf",e.SaleRequest.Sales),C.xp6(14),C.Q6J("formGroup",e.PaymentForm),C.xp6(5),C.Q6J("formControlName","CardNumber"),C.xp6(2),C.hij("Card Number (",e.CartType,")"),C.xp6(1),C.Q6J("Caption","CardNumber")("ToCheck",e.GetFormControl("CardNumber")),C.xp6(1),C.Q6J("ngIf",e.BinInfo),C.xp6(3),C.Q6J("formControlName","CardOwner"),C.xp6(3),C.Q6J("Caption","CardOwner")("ToCheck",e.GetFormControl("CardOwner")),C.xp6(3),C.Q6J("formControlName","ExpireMonth"),C.xp6(27),C.Q6J("Caption","ExpireMonth")("ToCheck",e.GetFormControl("ExpireMonth")),C.xp6(2),C.Q6J("formControlName","ExpireYear"),C.xp6(1),C.Q6J("ngForOf",e.years),C.xp6(2),C.Q6J("Caption","ExpireYear")("ToCheck",e.GetFormControl("ExpireYear")),C.xp6(2),C.Q6J("formControlName","Cvv2")("maxlength","16"),C.xp6(3),C.Q6J("Caption","Cvv2")("ToCheck",e.GetFormControl("Cvv2")),C.xp6(4),C.Q6J("formControlName","Amount"),C.xp6(4),C.Q6J("disabled",!e.PaymentForm.valid&&!e.PaymentForm.touched)}}let se=(()=>{class e{constructor(e,t,o,a){this.route=e,this.router=t,this.webStorage=o,this.saleService=a,this.TotalAmount=.56,this.years=[];const r=new Date;this.years=this.Range(r.getFullYear(),r.getFullYear()+10)}Range(e,t){return new Array(t-e+1).fill(void 0).map((t,o)=>o+e)}ngOnInit(){this.SaleRequest=this.webStorage.Get(X.Z1.Local,"SaleRequest"),this.saleService.SaleChanged.subscribe(e=>{this.SaleRequest=e,this.webStorage.Set(X.Z1.Local,"SaleRequest",e)}),console.log("Payment SaleRequest",this.SaleRequest),this.InitializeForm()}InitializeForm(){this.PaymentForm=new i.cw({Amount:new i.NI({value:this.TotalAmount,disabled:!0}),CardOwner:new i.NI(null,i.kI.required),CardNumber:new i.NI(null,[i.kI.required,i.kI.minLength(16),i.kI.maxLength(16)]),ExpireMonth:new i.NI(null,i.kI.required),ExpireYear:new i.NI(null,i.kI.required),Cvv2:new i.NI(null,i.kI.required)}),this.PaymentForm.get("CardNumber").valueChanges.subscribe(e=>{if(e&&e.toString().length>0){const t=e.toString().substring(0,1);if("4"===t?this.CartType="Visa":"5"===t?this.CartType="MasterCard":"6"===t&&(this.CartType="Discovery"),e.toString().length>=6){const t="0000000000000000",o=(e.toString()+t.substring(0,t.length-e.toString().length)).substring(0,6);this.saleService.BankCardControl({CardNo:o}).subscribe(e=>{this.BinInfo=e})}}})}FillDummyData(){this.PaymentForm.patchValue({CardOwner:"NAME LAST_NAME",CardNumber:"0000111122223333",ExpireMonth:"02",ExpireYear:"32",Cvv2:"123"})}OnSubmit(){this.Request={User:this.SaleRequest.User,AgencyCode:this.SaleRequest.AgencyCode,BasketCode:this.SaleRequest.BasketCode,Card:{CardOwner:this.PaymentForm.get("CardOwner").value,CardNumber:this.PaymentForm.get("CardNumber").value,ExpireYear:this.PaymentForm.get("ExpireYear").value,ExpireMonth:this.PaymentForm.get("ExpireMonth").value,Cvv2:this.PaymentForm.get("Cvv2").value},Installment:0,Amount:this.TotalAmount,UrlOk:"http://localhost:4224/Sale/Payment/Secure",UrlFail:"http://localhost:4224/Sale/Payment/Secure",SecurityLevel:"3D"},this.saleService.SecurePrepare(this.Request).subscribe(e=>{e&&(console.log("Payment SecurePrepare",e),this.webStorage.Set(X.Z1.Local,"SecureRequest",this.Request),this.webStorage.Set(X.Z1.Local,"SecureResponse",e),this.PaymentForm.reset(),this.router.navigate(["/Sale/Payment/Secure"],{relativeTo:this.route}).then())})}GetFormControl(e,t=this.PaymentForm){return t.get(e)}GetFormArray(e,t=this.PaymentForm){return t.get(e)}}return e.\u0275fac=function(t){return new(t||e)(C.Y36(s.gz),C.Y36(s.F0),C.Y36(X.VW),C.Y36(w))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-payment"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"card","card-body","shadow-lg","mb-3"],["class","shadow mb-3 p-2 bg-white rounded",4,"ngFor","ngForOf"],[1,"shadow-lg","p-3","mb-3","bg-white","rounded"],[1,"card","mb-2"],[1,"card-body"],[1,"btn","btn-outline-dark",3,"click"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","nav-home-tab","data-toggle","tab","href","#nav-home","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-item","nav-link","active"],["id","nav-paypal-tab","data-toggle","tab","href","#nav-paypal","role","tab","aria-controls","nav-paypal","aria-selected","false",1,"nav-item","nav-link"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","show","active"],[1,"",3,"formGroup","ngSubmit"],[1,"row","my-2"],[1,"col-12","col-lg-6"],[1,"mb-2"],["type","number","id","CardNumber","placeholder","Debit/Credit Card Number",1,"form-control",3,"formControlName"],["for","CardNumber",1,"active"],[3,"Caption","ToCheck"],[4,"ngIf"],["type","text","id","CardOwner","placeholder","Card Holder's Name",1,"form-control",3,"formControlName"],["for","CardOwner",1,"active"],[1,"row"],[1,"col-6","col-lg-3"],["id","ExpireMonth",1,"form-select",3,"formControlName"],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],["for","ExpireMonth",1,"active"],["id","ExpireYear",1,"form-select","ml-1",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["for","ExpireYear",1,"active"],["type","text","id","Cvv2","placeholder","Security Code",1,"form-control",3,"formControlName","maxlength"],["for","Cvv2",1,"active"],["type","text","id","Amount",1,"form-control",3,"formControlName"],["for","Amount",1,"active"],["type","submit",1,"btn","btn-outline-success",3,"disabled"],["id","nav-paypal","role","tabpanel","aria-labelledby","nav-paypal-tab",1,"tab-pane","fade"],[1,"shadow","mb-3","p-2","bg-white","rounded"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Room",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[1,"col-12","mt-2"],["class","col-12",4,"ngIf"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Room"],[3,"Type","IsOdd","Option"],[1,"col-12"],[1,"card"],[1,"card-title"],[1,"row","mb-2","p-2"],["class","col-12 col-md-4 p-md-1 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-md-4","p-md-1","mb-2"],[1,"shadow","p-3","bg-white","rounded"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"value"]],template:function(e,t){1&e&&C.YNc(0,ie,86,26,"div",0),2&e&&C.Q6J("ngIf",t.SaleRequest)},directives:[a.O5,a.sg,i._Y,i.JL,i.sg,i.wV,i.Fj,i.JJ,i.u,G.c,i.EJ,i.YN,i.Kr,i.nD,h.G],styles:[""]}),e})();const le=["SecureForm"];let ue=(()=>{class e{constructor(e,t){this.webStorage=e,this.saleService=t}ngOnInit(){this.SecureResponse=this.webStorage.Get(X.Z1.Local,"SecureResponse"),console.log("SecureResponse",this.SecureResponse),this.SecureForm.nativeElement.innerHTML=`\n    ${this.SecureResponse.Data.Form.HiddenInputs}\n    <div class="container">\n      <div class="row">\n        <table class="table table-hover">\n          <tr>\n            <td class='text-center'><p><span>${this.SecureResponse.Data.Title}</span></p></td>\n          </tr>\n        </table>\n      </div>\n    </div>\n    <button type="submit">Send</button>`}ngAfterViewInit(){this.SecureForm.nativeElement.submit().then(e=>{console.log(e)})}onSubmit(e,t){const o=this.webStorage.Get(X.Z1.Local,"SecureRequest"),a=[{test:"garanti"},{ddff:"ddd"}];console.log("ConfirmRequest",{User:o.User,AgencyCode:o.AgencyCode,BasketCode:o.BasketCode,Card:o.Card,Amount:this.SecureResponse.Data.Amount,OrderId:this.SecureResponse.Data.OrderId,ValueCollection:a},a)}}return e.\u0275fac=function(t){return new(t||e)(C.Y36(X.VW),C.Y36(w))},e.\u0275cmp=C.Xpm({type:e,selectors:[["app-payment-secure"]],viewQuery:function(e,t){if(1&e&&C.Gf(le,7),2&e){let e;C.iGM(e=C.CRH())&&(t.SecureForm=e.first)}},decls:2,vars:3,consts:[["novalidate","",3,"name","action","method","ngSubmit"],["SecureForm",""]],template:function(e,t){if(1&e){const e=C.EpF();C.TgZ(0,"form",0,1),C.NdJ("ngSubmit",function(o){C.CHM(e);const a=C.MAs(1);return t.onSubmit(a,o)}),C.qZA()}2&e&&C.Q6J("name",t.SecureResponse.Data.Form.Name)("action",t.SecureResponse.Data.Form.ActionUrl,C.LSH)("method",t.SecureResponse.Data.Form.Method)},directives:[i._Y,i.JL,i.F],styles:[""]}),e})();var de=o(2657),me=o(5485);const pe=[{path:"",children:[{path:"Cart",component:b},{path:"Basket",component:W,canDeactivate:[de.I]},{path:"Payment",component:se},{path:"Payment/Secure",component:ue},{path:"**",resolve:{path:J.Rd},component:me.r}]}];let ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({imports:[[s.Bz.forChild(pe)],s.Bz]}),e})();const ge=[o(5326).m,k.Su],Ze=[a.ez,i.u5,i.UX],Ce=[n.Aw.forFeature(l.AQ,l.j),r.sQ.forFeature([l.Lb])];let he=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C.oAB({type:e}),e.\u0275inj=C.cJS({providers:[w],imports:[[...Ze,...Ce,...ge,ce,O.v$]]}),e})()}}]);