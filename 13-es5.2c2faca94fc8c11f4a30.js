!function(){function e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{IyS3:function(a,r,i){"use strict";i.r(r),i.d(r,"SaleModule",(function(){return Fe}));var l=i("ofXK"),s=i("9jGm"),c=i("l7P3"),b=i("3Pt+"),u=i("tyNb"),d=i("7xuN"),m=i("ZmOG"),p=i("R0Ic"),f=Object(p.k)("flyInOut",[Object(p.h)("in",Object(p.i)({transform:"translateX(0)"})),Object(p.j)("void => *",[Object(p.i)({transform:"translateX(-100%)"}),Object(p.e)(500)]),Object(p.j)("* => void",[Object(p.e)(500,Object(p.i)({transform:"translateX(100%)"}))])]),h=Object(p.k)("shrinkOut",[Object(p.h)("in",Object(p.i)({height:"*"})),Object(p.j)("* => void",[Object(p.i)({height:"*"}),Object(p.e)(250,Object(p.i)({height:0}))])]),v=i("Vv5I"),y=i("hTRX"),g=function(){function e(){o(this,e)}return n(e,null,[{key:"GetDestinationOption",value:function(){return{Airline:y.a.AtlasJet,DirectionType:0,BestAmount:122.44,Segments:[{Airline:y.a.AtlasJet,FlightTime:y.d.Afternoon,AirlineName:"Atlasglobal",CompanyShortName:"",Departure:{City:"",Code:"IST",DateTime:"2018-09-21T00:00:00",Time:"00:00",TimeZoneOffset:""},Arrival:{City:"",Code:"AYT",DateTime:"2018-09-12T23:05:00",Time:"23:05",TimeZoneOffset:""},ElapsedTime:"01:10:00",IsTransfer:!1,VoyageCode:"20180921ATLJETISTAYTKK14",FlightNumber:"KK14",Equipment:{Content:"",AirEquipType:""}}],SegmentAvailabilities:[{ClassStatusCode:"ECONOMY",CabinType:2,ClassCode:"Y",AvailableSeats:"1",PricingInfos:[{PassengerType:0,CurrencyCode:"TRY",Taxes:null,BaseFare:null,TotalFare:{Amount:122.44,CurrencyCode:"TRY"}}],BestPricingInfo:{PassengerType:0,CurrencyCode:"TRY",Taxes:null,BaseFare:null,TotalFare:{Amount:122.44,CurrencyCode:"TRY"}}}]}}},{key:"GetTours",value:function(){return[{Package:null,PackageId:1,VariationId:1,Title:"Dummy Title",BaseCategory:{Id:1,Name:"Dummy BaseCategory"},Category:{Id:1,Name:"Dummy Category"},PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",Price:{Value:1453,ValueOld:0,Currency:{Symbol:"\u20ba",Name:"",Code:""}},Views:[{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x402",Caption:"Caption rsm1"},{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x403",Caption:"Caption rsm2"}],Tags:[]}]}},{key:"GetTourDetails",value:function(){return{Package:{TourId:1,Code:"Dummy Code",Name:"Dummy Name",Description:"Dummy Description",OperationTypeId:1,BaseCategory:{Id:1,Name:"Dummy BaseCategory"},Category:{Id:1,Name:"Dummy Category"},RegionId:1},ActionPlain:{ExcludedServices:"ExcludedServices",IncludedServices:"IncludedServices",Itineraries:[]},MapValues:[{Title:"",Latitude:"",Longitude:""}],VariationId:1,Title:"Dummy Title",PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",Price:{Currency:{Name:"TL"},Value:100},Views:[{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x402",Caption:"Caption rsm1"},{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x403",Caption:"Caption rsm2"}],Tags:["new"]}}},{key:"GetRoomAvailability",value:function(){return{Id:1,PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",UseType:"",Availability:9,MaxAdultCount:2,MaxChildCount:1,Room:{Id:0,RoomType:"0",Pansion:"0",BedType:"0",Facilities:[],Views:[{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x401",Caption:"Caption rsm2"}],Hotel:{Name:"Fairmont Quasar Istanbul",Code:"Code ",Description:"\u015ei\u015fli Florence Nightingale Hastanesi yak\u0131n\u0131nda, tam donan\u0131ml\u0131 spa olan l\xfcks otel.",Location:{Address:"B\xfcy\xfckdere Caddesi No.: 76 Mecidiyekoy 34394 \u0130stanbul TUR"},Views:[{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x401",Caption:"Caption rsm2"}]}},RoomPrices:[{AgeType:0,AgeRange:0,Price:{Value:1453}}]}}},{key:"GetRoomAvailabilities",value:function(){for(var e=[],t=1;t<=10;t++)e.push({Id:t,PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",UseType:"",Availability:9,MaxAdultCount:2,MaxChildCount:1,Room:{Id:0,RoomType:"0",Pansion:"0",BedType:"0",Hotel:{Id:1,Name:"Fairmont Quasar Istanbul"+t,Code:"Code ",Description:"\u015ei\u015fli Florence Nightingale Hastanesi yak\u0131n\u0131nda, tam donan\u0131ml\u0131 spa olan l\xfcks otel.",Location:{Address:"B\xfcy\xfckdere Caddesi No.: 76 Mecidiyekoy 34394 \u0130stanbul TUR"},Facilities:[],Views:[{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:v.a.Image,Source:"https://source.unsplash.com/random/960x400"+t,Caption:"Caption rsm2"}]}},RoomPrices:[{AgeType:0,AgeRange:0,Price:{Value:1453}}]});return e}}]),e}(),C=i("fXoL"),P=i("EELT");function O(e,t){if(1&e&&C.Kb(0,"app-list-item",28),2&e){var a=C.ac(),o=a.odd,r=a.$implicit,n=C.ac(2);C.hc("Type","Sale")("IsOdd",o)("Tour",n.GetSale(r.Type,r.Sale))}}function A(e,t){if(1&e&&C.Kb(0,"app-list-item",29),2&e){var a=C.ac(),o=a.odd,r=a.$implicit,n=C.ac(2);C.hc("Type","Default")("IsOdd",o)("Hotel",n.GetSale(r.Type,r.Sale))}}function N(e,t){if(1&e&&C.Kb(0,"app-list-item",30),2&e){var a=C.ac(),o=a.odd,r=a.$implicit,n=C.ac(2);C.hc("Type","Default")("IsOdd",o)("Option",n.GetSale(r.Type,r.Sale))}}function I(e,t){if(1&e){var a=C.Qb();C.Pb(0,"div",22),C.Pb(1,"div",23),C.Pb(2,"button",24),C.Wb("click",(function(){C.tc(a);var e=t.$implicit;return C.ac(2).OnDelete(e.Type,e.Id)})),C.Ac(3,"X"),C.Ob(),C.Ob(),C.yc(4,O,1,3,"app-list-item",25),C.yc(5,A,1,3,"app-list-item",26),C.yc(6,N,1,3,"app-list-item",27),C.Ob()}if(2&e){var o=t.$implicit,r=C.ac(2);C.hc("@flyInOut","in"),C.xb(4),C.hc("ngIf",o.Type===r.CartType().Tour),C.xb(1),C.hc("ngIf",o.Type===r.CartType().Hotel),C.xb(1),C.hc("ngIf",o.Type===r.CartType().Flight)}}function S(e,t){if(1&e&&(C.Pb(0,"div",1),C.yc(1,I,7,4,"div",21),C.bc(2,"async"),C.Ob()),2&e){var a=C.ac();C.hc("@shrinkOut","in"),C.xb(1),C.hc("ngForOf",C.cc(2,2,a.Cart).Sales)}}function T(e,t){1&e&&(C.Pb(0,"div",1),C.Pb(1,"div",22),C.Pb(2,"div",12),C.Pb(3,"div",4),C.Ac(4," Shopping Cart is Empty! "),C.Kb(5,"i",31),C.Ob(),C.Ob(),C.Ob(),C.Ob()),2&e&&C.hc("@shrinkOut","in")}var x=function(){return["/Sale/Basket"]};function F(e,t){1&e&&(C.Pb(0,"a",32),C.Ac(1,"Checkout"),C.Ob()),2&e&&C.hc("routerLink",C.kc(1,x))}var k,w,G=((k=function(){function e(t){o(this,e),this.store=t,this.TotalAmount=1453.13,this.Currency="\u20ba",this.CartType=function(){return m.a}}return n(e,[{key:"GetSale",value:function(e,t){switch(e){case m.a.Tour:case m.a.Hotel:case m.a.Flight:return t}return null}},{key:"ngOnInit",value:function(){this.Cart=this.store.select("Cart")}},{key:"Test",value:function(){this.store.dispatch(d.a({Cart:{Type:m.a.Tour,PassengerCount:3,Sale:Object.assign({},g.GetTourDetails())}})),this.store.dispatch(d.a({Cart:{Type:m.a.Hotel,PassengerCount:2,Sale:Object.assign({},g.GetRoomAvailability())}})),this.store.dispatch(d.a({Cart:{Type:m.a.Flight,PassengerCount:1,Sale:Object.assign({},g.GetDestinationOption())}}))}},{key:"OnDelete",value:function(e,t){this.store.dispatch(d.d({Type:e,Id:t}))}}]),e}()).\u0275fac=function(e){return new(e||k)(C.Jb(c.h))},k.\u0275cmp=C.Db({type:k,selectors:[["app-cart"]],decls:37,vars:15,consts:[[1,"container"],[1,"row","mb-2"],[1,"col-12","p-md-1"],[1,"card","mb-2"],[1,"card-body"],[1,"card-title"],[1,"fas","fa-shopping-cart"],[1,"float-right"],[1,"btn","btn-outline-info","btn-sm","pull-right","mr-3",3,"routerLink"],[1,"btn","btn-outline-dark","btn-sm",3,"click"],["class","row mb-2",4,"ngIf"],[1,"col-12","p-md-1","mb-2"],[1,"card"],[1,"col-md-5","col-sm-5","float-left"],[1,"form-row"],[1,"md-form","input-group","m-0"],["type","text","placeholder","coupon code",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-mdb-color","waves-effect","m-0"],["class"," btn btn-outline-primary float-right",3,"routerLink",4,"ngIf"],[1,"float-left",2,"margin","5px"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[2,"position","absolute","right","20px","top","5px","z-index","1000"],[1,"btn","btn-sm","btn-danger","waves-effect",3,"click"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Hotel",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Hotel"],[3,"Type","IsOdd","Option"],[1,"fas","fa-battery-empty"],[1,"btn","btn-outline-primary","float-right",3,"routerLink"]],template:function(e,t){1&e&&(C.Pb(0,"div",0),C.Pb(1,"div",1),C.Pb(2,"div",2),C.Pb(3,"div",3),C.Pb(4,"div",4),C.Pb(5,"h5",5),C.Kb(6,"i",6),C.Ac(7," Shopping Cart"),C.Ob(),C.Pb(8,"span",7),C.Ac(9),C.bc(10,"async"),C.Ob(),C.Pb(11,"a",8),C.Ac(12,"Continue shopping"),C.Ob(),C.Pb(13,"button",9),C.Wb("click",(function(){return t.Test()})),C.Ac(14,"Add Dummy Data"),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.yc(15,S,3,4,"div",10),C.bc(16,"async"),C.yc(17,T,6,1,"div",10),C.bc(18,"async"),C.Pb(19,"div",1),C.Pb(20,"div",11),C.Pb(21,"div",12),C.Pb(22,"div",4),C.Pb(23,"div",13),C.Pb(24,"div",14),C.Pb(25,"div",15),C.Kb(26,"input",16),C.Pb(27,"div",17),C.Pb(28,"button",18),C.Ac(29,"Use coupon"),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Pb(30,"div",7),C.yc(31,F,2,2,"a",19),C.bc(32,"async"),C.Pb(33,"div",20),C.Ac(34,"Total price: "),C.Pb(35,"b"),C.Ac(36),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob()),2&e&&(C.xb(9),C.Cc("Count: ",C.cc(10,7,t.Cart).Length,""),C.xb(2),C.hc("routerLink","/Tour/"),C.xb(4),C.hc("ngIf",C.cc(16,9,t.Cart).Length>0),C.xb(2),C.hc("ngIf",0===C.cc(18,11,t.Cart).Length),C.xb(14),C.hc("ngIf",C.cc(32,13,t.Cart).Length>0),C.xb(5),C.Dc("",t.TotalAmount,"",t.Currency,""))},directives:[u.g,l.l,l.k,P.a],pipes:[l.b],styles:[""],data:{animation:[f,h]}}),k),_=i("lJxs"),B=i("XNiG"),R=i("HDdC"),D=i("AytR"),M=i("tk/3"),L=i("Gv6l"),E=((w=function(){function e(t,a){o(this,e),this.http=t,this.serviceHelper=a,this.SaleChanged=new B.a,this.State={Latency:250,Urls:{Save:D.a.BaseApiHost+"/api/1.0/Sale/Save",PayPrepare:D.a.BaseApiHost+"/api/1.0/Sale/SecurePrepare",PayConfirm:D.a.BaseApiHost+"/api/1.0/Sale/SecureConfirm"}}}return n(e,[{key:"Save",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.http.post(this.State.Urls.Save,e).pipe(this.serviceHelper.PipeNotification(a,this.State.Latency)).subscribe((function(e){console.log(e),t.SaleChanged.next(e.Data)}))}},{key:"SecurePrepare",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.http.post(this.State.Urls.PayPrepare,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency))}},{key:"SecureConfirm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.http.post(this.State.Urls.PayConfirm,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency))}},{key:"BankCardControl",value:function(e){return new R.a((function(e){e.next(null)}))}}]),e}()).\u0275fac=function(e){return new(e||w)(C.Tb(M.b),C.Tb(L.a))},w.\u0275prov=C.Fb({token:w,factory:w.\u0275fac,providedIn:"root"}),w),K=i("Uk2f"),q=i("L2Ov"),j=i("JQXe");function V(e,t){if(1&e&&(C.Pb(0,"option",48),C.Ac(1),C.Ob()),2&e){var a=t.$implicit;C.hc("value",a.Id),C.xb(1),C.Bc(a.Name)}}function H(e,t){if(1&e&&(C.Pb(0,"option",48),C.Ac(1),C.Ob()),2&e){var a=t.$implicit;C.hc("value",a.Id),C.xb(1),C.Bc(a.Name)}}var J,U=((J=function(){function e(t){o(this,e),this.locationService=t,this.Countries=[],this.Cities=[]}return n(e,[{key:"ngOnInit",value:function(){var e=this;this.locationService.GetCountries().subscribe((function(t){e.Countries=t}))}},{key:"FillDummyData",value:function(){var e=this;this.GroupReservation.patchValue({Reservation:{Gender:"Female",FirstName:"-+ FirstName",LastName:"-+ LastName",Birthday:"1990/12/24",IdentificationNumber:"54516102821",ContactInformation:{Email:"Email@mail.com",PhoneCell:"-+ PhoneCell",Phone:"-+ Phone"},Address:{Line1:"-+ Line1",Line2:"-+ Line2",PostalCode:"-+ 34900"}}}),this.GroupReservation.get("Reservation.Address.Country").valueChanges.subscribe((function(t){e.onCountryChange(t),e.GroupReservation.get("Reservation.Address.City").setValue("2")})),this.GroupReservation.get("Reservation.Address.Country").setValue("2")}},{key:"FillCustomerData",value:function(e,t){var a=this;if(t){var o,r;console.log("FillCustomerData",t);var n=new Date;t.Birthday&&(n=new Date(t.Birthday)),t.ContactInfos&&(o=t.ContactInfos[0],r=o.Addresses[0]),e.patchValue({Gender:t.Gender,FirstName:t.FirstName,LastName:t.LastName,Birthday:t.Birthday,IdentificationNumber:t.IdentificationNumber}),e.get("Birthday").setValue(n.getFullYear()+"/"+n.getMonth()+"/"+n.getDay()),e.get("Birthday").setValue(t.Birthday),o&&(e.patchValue({ContactInformation:{Email:t.Email,PhoneCell:o.CellPhone,Phone:o.Phone}}),r&&(e.patchValue({Address:{Line1:r.Line1,Line2:r.Line2,PostalCode:r.PostalCode}}),e.get("Address.Country").valueChanges.subscribe((function(t){a.onCountryChange(t),e.get("Address.City").setValue(r.City)})),e.get("Address.Country").setValue(r.Country),e.get("Address.District").setValue(r.District),e.get("Address.Neighborhood").setValue(r.Neighborhood)))}}},{key:"GetFormControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.GroupReservation;return t.get(e)}},{key:"GetFormArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.GroupReservation;return t.get(e)}},{key:"onCountryChange",value:function(e){var t=this;this.locationService.GetCities(e).subscribe((function(e){t.Cities=e}))}}]),e}()).\u0275fac=function(e){return new(e||J)(C.Jb(q.a))},J.\u0275cmp=C.Db({type:J,selectors:[["app-reservation"]],inputs:{GroupReservation:"GroupReservation"},decls:100,vars:30,consts:[[1,"card","shadow-lg"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-outline-dark",3,"click"],[3,"formGroup"],[1,"col",3,"formGroupName"],[1,"form-row"],[1,"col-12","col-md-6"],[1,"form-group"],[1,"custom-control","custom-radio","custom-control-inline"],["type","radio","name","Gender","id","Gender_Male","value","Male",1,"custom-control-input",3,"formControlName"],["for","Gender_Male",1,"custom-control-label"],["type","radio","name","Gender","id","Gender_Female","value","Female",1,"custom-control-input",3,"formControlName"],["for","Gender_Female",1,"custom-control-label"],[1,"col-sm-6"],["for","FirstName"],["type","text","id","FirstName","placeholder","First Name",1,"form-control","form-control-sm",3,"formControlName"],[3,"Caption","ToCheck"],["for","LastName"],["type","text","id","LastName","placeholder","Last Name",1,"form-control","form-control-sm",3,"formControlName"],["for","IdentificationNumber"],["type","text","id","IdentificationNumber","placeholder","Identification Number",1,"form-control","form-control-sm",3,"formControlName"],["for","Birthday"],["type","text","id","Birthday","appDatePicker","","autocomplete","off","placeholder","yy/mm/d",1,"form-control","form-control-sm",3,"formControlName"],[3,"formGroupName"],["for","Email"],[1,"fa","fa-envelope"],["type","email","id","Email","placeholder","Email",1,"form-control","form-control-sm",3,"formControlName"],["for","PhoneCell"],["type","text","id","PhoneCell","placeholder","Phone Cell",1,"form-control","form-control-sm",3,"formControlName"],["for","Phone"],["type","text","id","Phone","placeholder","Phone",1,"form-control","form-control-sm",3,"formControlName"],[1,"col-12"],["for","Line1"],["type","text","id","Line1","placeholder","1234 Main St",1,"form-control","form-control-sm",3,"formControlName"],["for","Line2"],["type","text","id","Line2","placeholder","Apartment, studio, or floor",1,"form-control","form-control-sm",3,"formControlName"],[1,"form-group","col-md-6"],["for","inputState"],["id","inputState",1,"custom-select","custom-select-sm",3,"formControlName","change"],["selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-md-4"],["for","inputCity"],["id","inputCity",1,"custom-select","custom-select-sm",3,"formControlName"],[1,"form-group","col-md-2"],["for","inputZip"],["type","text","id","inputZip",1,"form-control","form-control-sm",3,"formControlName"],[3,"value"]],template:function(e,t){1&e&&(C.Pb(0,"div",0),C.Pb(1,"div",1),C.Pb(2,"h2",2),C.Ac(3,"Fatura M\xfc\u015fteri Bilgileri"),C.Ob(),C.Pb(4,"span",3),C.Wb("click",(function(){return t.FillDummyData()})),C.Ac(5,"Fill Dummy Data"),C.Ob(),C.Nb(6,4),C.Pb(7,"div",5),C.Pb(8,"div",6),C.Pb(9,"div",7),C.Pb(10,"div",8),C.Pb(11,"label"),C.Ac(12,"Gender:\xa0\xa0"),C.Ob(),C.Pb(13,"div",9),C.Kb(14,"input",10),C.Pb(15,"label",11),C.Ac(16,"Male"),C.Ob(),C.Ob(),C.Pb(17,"div",9),C.Kb(18,"input",12),C.Pb(19,"label",13),C.Ac(20,"Female"),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Pb(21,"div",6),C.Pb(22,"div",14),C.Pb(23,"div",8),C.Pb(24,"label",15),C.Ac(25,"First Name"),C.Ob(),C.Kb(26,"input",16),C.Kb(27,"app-validation",17),C.Ob(),C.Ob(),C.Pb(28,"div",14),C.Pb(29,"div",8),C.Pb(30,"label",18),C.Ac(31,"Last Name"),C.Ob(),C.Kb(32,"input",19),C.Kb(33,"app-validation",17),C.Ob(),C.Ob(),C.Ob(),C.Pb(34,"div",6),C.Pb(35,"div",14),C.Pb(36,"div",8),C.Pb(37,"label",20),C.Ac(38,"Identification Number"),C.Ob(),C.Kb(39,"input",21),C.Kb(40,"app-validation",17),C.Ob(),C.Ob(),C.Pb(41,"div",14),C.Pb(42,"div",8),C.Pb(43,"label",22),C.Ac(44,"Birthday"),C.Ob(),C.Kb(45,"input",23),C.Kb(46,"app-validation",17),C.Ob(),C.Ob(),C.Ob(),C.Pb(47,"div",24),C.Pb(48,"div",6),C.Pb(49,"div",14),C.Pb(50,"div",8),C.Pb(51,"label",25),C.Kb(52,"i",26),C.Ac(53," Email"),C.Ob(),C.Kb(54,"input",27),C.Kb(55,"app-validation",17),C.Ob(),C.Ob(),C.Pb(56,"div",14),C.Kb(57,"div",8),C.Ob(),C.Ob(),C.Pb(58,"div",6),C.Pb(59,"div",14),C.Pb(60,"div",8),C.Pb(61,"label",28),C.Ac(62,"Phone Cell"),C.Ob(),C.Kb(63,"input",29),C.Ob(),C.Ob(),C.Pb(64,"div",14),C.Pb(65,"div",8),C.Pb(66,"label",30),C.Ac(67,"Phone"),C.Ob(),C.Kb(68,"input",31),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Pb(69,"div",24),C.Pb(70,"div",6),C.Pb(71,"div",32),C.Pb(72,"div",8),C.Pb(73,"label",33),C.Ac(74,"Address"),C.Ob(),C.Kb(75,"input",34),C.Ob(),C.Ob(),C.Pb(76,"div",32),C.Pb(77,"div",8),C.Pb(78,"label",35),C.Ac(79,"Address 2"),C.Ob(),C.Kb(80,"input",36),C.Ob(),C.Ob(),C.Ob(),C.Pb(81,"div",6),C.Pb(82,"div",37),C.Pb(83,"label",38),C.Ac(84,"Country"),C.Ob(),C.Pb(85,"select",39),C.Wb("change",(function(e){return t.onCountryChange(e.target.value)})),C.Pb(86,"option",40),C.Ac(87,"Choose..."),C.Ob(),C.yc(88,V,2,2,"option",41),C.Ob(),C.Ob(),C.Pb(89,"div",42),C.Pb(90,"label",43),C.Ac(91,"City"),C.Ob(),C.Pb(92,"select",44),C.Pb(93,"option",40),C.Ac(94,"Choose..."),C.Ob(),C.yc(95,H,2,2,"option",41),C.Ob(),C.Ob(),C.Pb(96,"div",45),C.Pb(97,"label",46),C.Ac(98,"Zip"),C.Ob(),C.Kb(99,"input",47),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Mb(),C.Ob(),C.Ob()),2&e&&(C.xb(6),C.hc("formGroup",t.GroupReservation),C.xb(1),C.hc("formGroupName","Reservation"),C.xb(7),C.hc("formControlName","Gender"),C.xb(4),C.hc("formControlName","Gender"),C.xb(8),C.hc("formControlName","FirstName"),C.xb(1),C.hc("Caption","FirstName")("ToCheck",t.GetFormControl("Reservation.FirstName")),C.xb(5),C.hc("formControlName","LastName"),C.xb(1),C.hc("Caption","LastName")("ToCheck",t.GetFormControl("Reservation.LastName")),C.xb(6),C.hc("formControlName","IdentificationNumber"),C.xb(1),C.hc("Caption","IdentificationNumber")("ToCheck",t.GetFormControl("Reservation.IdentificationNumber")),C.xb(5),C.hc("formControlName","Birthday"),C.xb(1),C.hc("Caption","Birthday")("ToCheck",t.GetFormControl("Reservation.Birthday")),C.xb(1),C.hc("formGroupName","ContactInformation"),C.xb(7),C.hc("formControlName","Email"),C.xb(1),C.hc("Caption","Email")("ToCheck",t.GetFormControl("Reservation.ContactInformation.Email")),C.xb(8),C.hc("formControlName","PhoneCell"),C.xb(5),C.hc("formControlName","Phone"),C.xb(1),C.hc("formGroupName","Address"),C.xb(6),C.hc("formControlName","Line1"),C.xb(5),C.hc("formControlName","Line2"),C.xb(5),C.hc("formControlName","Country"),C.xb(3),C.hc("ngForOf",t.Countries),C.xb(4),C.hc("formControlName","City"),C.xb(3),C.hc("ngForOf",t.Cities),C.xb(4),C.hc("formControlName","PostalCode"))},directives:[b.n,b.i,b.j,b.s,b.b,b.m,b.g,j.a,b.v,b.q,b.x,l.k],styles:[""],encapsulation:2}),J);function Y(e,t){if(1&e&&(C.Pb(0,"div",7),C.Pb(1,"div",8),C.Pb(2,"h5",1),C.Ac(3),C.Ob(),C.Pb(4,"div",9),C.Pb(5,"div",10),C.Pb(6,"div",11),C.Kb(7,"input",12),C.Pb(8,"label",13),C.Ac(9,"Male"),C.Ob(),C.Ob(),C.Pb(10,"div",11),C.Kb(11,"input",14),C.Pb(12,"label",13),C.Ac(13,"Female"),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Pb(14,"div",15),C.Pb(15,"label",16),C.Ac(16,"Birthday"),C.Ob(),C.Kb(17,"input",17),C.Kb(18,"app-validation",18),C.Ob(),C.Pb(19,"div",15),C.Pb(20,"label",16),C.Kb(21,"i",19),C.Ac(22," Email"),C.Ob(),C.Kb(23,"input",20),C.Kb(24,"app-validation",18),C.Ob(),C.Pb(25,"div",15),C.Pb(26,"label",16),C.Ac(27,"Name"),C.Ob(),C.Kb(28,"input",21),C.Kb(29,"app-validation",18),C.Ob(),C.Pb(30,"div",15),C.Pb(31,"label",16),C.Ac(32,"Last Name"),C.Ob(),C.Kb(33,"input",22),C.Kb(34,"app-validation",18),C.Ob(),C.Pb(35,"div",15),C.Pb(36,"label",16),C.Ac(37,"IdentityNo"),C.Ob(),C.Kb(38,"input",23),C.Kb(39,"app-validation",18),C.Ob(),C.Pb(40,"div",15),C.Pb(41,"label",16),C.Ac(42,"PassportNo"),C.Ob(),C.Kb(43,"input",24),C.Ob(),C.Pb(44,"div",15),C.Pb(45,"label",25),C.Ac(46,"PassportType"),C.Ob(),C.Kb(47,"input",26),C.Ob(),C.Pb(48,"ul",27),C.Pb(49,"li",28),C.Ac(50,"Additional Services"),C.Ob(),C.Pb(51,"li",28),C.Ac(52,"..."),C.Ob(),C.Ob(),C.Ob(),C.Ob()),2&e){var a=t.$implicit,o=t.index,r=C.ac();C.hc("formGroupName",o.toString()),C.xb(3),C.Cc("Passenger ",o+1," "),C.xb(4),C.jc("name","Passenger_",r.CartModel.Id+"_"+o,"_Gender"),C.jc("id","Passenger_",r.CartModel.Id+"_"+o,"_Male"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_Gender"),C.xb(1),C.jc("for","Passenger_",r.CartModel.Id+"_"+o,"_Male"),C.xb(3),C.jc("name","Passenger_",r.CartModel.Id+"_"+o,"_Gender"),C.jc("id","Passenger_",r.CartModel.Id+"_"+o,"_Female"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_Gender"),C.xb(1),C.jc("for","Passenger_",r.CartModel.Id+"_"+o,"_Female"),C.xb(3),C.ic("for","Passenger_"+r.CartModel.Id+"_"+o+"_Birthday"),C.xb(2),C.ic("id","Passenger_"+r.CartModel.Id+"_"+o+"_Birthday"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_Birthday"),C.xb(1),C.hc("Caption","Birthday")("ToCheck",r.GetFormControl("Passenger_"+r.CartModel.Id+"_"+o+"_Birthday",a)),C.xb(2),C.ic("for","Passenger_"+r.CartModel.Id+"_"+o+"_Email"),C.xb(3),C.ic("id","Passenger_"+r.CartModel.Id+"_"+o+"_Email"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_Email"),C.xb(1),C.hc("Caption","Email")("ToCheck",r.GetFormControl("Passenger_"+r.CartModel.Id+"_"+o+"_Email",a)),C.xb(2),C.ic("for","Passenger_"+r.CartModel.Id+"_"+o+"_FirstName"),C.xb(2),C.ic("id","Passenger_"+r.CartModel.Id+"_"+o+"_FirstName"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_FirstName"),C.xb(1),C.hc("Caption","FirstName")("ToCheck",r.GetFormControl("Passenger_"+r.CartModel.Id+"_"+o+"_FirstName",a)),C.xb(2),C.ic("for","Passenger_"+r.CartModel.Id+"_"+o+"_LastName"),C.xb(2),C.ic("id","Passenger_"+r.CartModel.Id+"_"+o+"_LastName"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_LastName"),C.xb(1),C.hc("Caption","LastName")("ToCheck",r.GetFormControl("Passenger_"+r.CartModel.Id+"_"+o+"_LastName",a)),C.xb(2),C.ic("for","Passenger_"+r.CartModel.Id+"_"+o+"_IdentityNo"),C.xb(2),C.ic("id","Passenger_"+r.CartModel.Id+"_"+o+"_IdentityNo"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_IdentityNo"),C.xb(1),C.hc("Caption","IdentityNo")("ToCheck",r.GetFormControl("Passenger_"+r.CartModel.Id+"_"+o+"_IdentityNo",a)),C.xb(2),C.ic("for","Passenger_"+r.CartModel.Id+"_"+o+"_PassportNo"),C.xb(2),C.ic("id","Passenger_"+r.CartModel.Id+"_"+o+"_PassportNo"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_PassportNo"),C.xb(2),C.ic("for","Passenger_"+r.CartModel.Id+"_"+o+"_PassportType"),C.xb(2),C.ic("id","Passenger_"+r.CartModel.Id+"_"+o+"_PassportType"),C.hc("formControlName","Passenger_"+r.CartModel.Id+"_"+o+"_PassportType")}}var $,W=(($=function(){function e(){o(this,e),this.Passengers=[]}return n(e,[{key:"ngOnChanges",value:function(e){}},{key:"ngOnInit",value:function(){}},{key:"FillDummyData",value:function(){var e=this;this.GroupPassengers.get("Passengers").controls.forEach((function(t,a){var o="Passenger_"+e.CartModel.Id+"_"+a+"_";t.get(o+"Gender").setValue("Female"),t.get(o+"Birthday").setValue("1990/12/24"),t.get(o+"Email").setValue("Email@mail.com"),t.get(o+"FirstName").setValue("-+ FirstName"+a),t.get(o+"LastName").setValue("-+ LastName"+a),t.get(o+"IdentityNo").setValue("-+ IdentityNo"+a),t.get(o+"PassportNo").setValue("-+ PassportNo"+a),t.get(o+"PassportType").setValue("-+ PassportType"+a)}))}},{key:"GetFormControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.GroupPassengers;return t.get(e)}},{key:"GetFormArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.GroupPassengers;return t.get(e)}}]),e}()).\u0275fac=function(e){return new(e||$)},$.\u0275cmp=C.Db({type:$,selectors:[["app-passengers"]],inputs:{CartModel:"CartModel",GroupPassengers:"GroupPassengers"},features:[C.vb],decls:17,vars:5,consts:[[1,"card","card-body",3,"formGroup"],[1,"card-title"],[1,"btn","btn-outline-dark",3,"click"],[1,"row","mb-2"],[1,"col"],[1,"row","mb-2",3,"formArrayName"],["class","col-12 col-md-6 col-lg-4 p-md-1 mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4","p-md-1","mb-2",3,"formGroupName"],[1,"shadow-lg","p-3","rounded"],[1,"form-row"],[1,"form-group","col-12"],[1,"custom-control","custom-radio","custom-control-inline"],["type","radio","value","Male",1,"custom-control-input",3,"name","formControlName","id"],[1,"custom-control-label",3,"for"],["type","radio","value","Female",1,"custom-control-input",3,"name","formControlName","id"],[1,"form-group"],[3,"for"],["type","text","appDatePicker","","autocomplete","off","placeholder","yy/mm/d",1,"form-control","form-control-sm",3,"id","formControlName"],[3,"Caption","ToCheck"],[1,"fa","fa-envelope"],["type","text","placeholder","Email",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","Name",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","Last Name",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","IdentityNo",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","PassportNo",1,"form-control","form-control-sm",3,"id","formControlName"],[1,"active",3,"for"],["type","text","placeholder","PassportType",1,"form-control","form-control-sm",3,"id","formControlName"],[1,"list-group","list-group-flush"],[1,"list-group-item"]],template:function(e,t){1&e&&(C.Pb(0,"div",0),C.Pb(1,"h2",1),C.Ac(2,"Passengers"),C.Ob(),C.Pb(3,"p"),C.Pb(4,"span",2),C.Wb("click",(function(){return t.FillDummyData()})),C.Ac(5,"Fill Dummy Data"),C.Ob(),C.Ob(),C.Pb(6,"div",3),C.Pb(7,"div",4),C.Pb(8,"label"),C.Ac(9,"Id:"),C.Ob(),C.Ac(10),C.Ob(),C.Pb(11,"div",4),C.Pb(12,"label"),C.Ac(13,"PassengerCount:"),C.Ob(),C.Ac(14),C.Ob(),C.Ob(),C.Pb(15,"div",5),C.yc(16,Y,53,41,"div",6),C.Ob(),C.Ob()),2&e&&(C.hc("formGroup",t.GroupPassengers),C.xb(10),C.Cc(" ",t.CartModel.Id," "),C.xb(4),C.Cc(" ",t.CartModel.PassengerCount," "),C.xb(1),C.hc("formArrayName","Passengers"),C.xb(1),C.hc("ngForOf",t.GetFormArray("Passengers").controls))},directives:[b.n,b.i,b.e,l.k,b.j,b.s,b.b,b.m,b.g,j.a],styles:[""]}),$);function X(e,t){if(1&e&&C.Kb(0,"app-list-item",18),2&e){var a=C.ac(),o=a.odd,r=a.$implicit,n=C.ac(3);C.hc("Type","Sale")("IsOdd",o)("Tour",n.GetSale(r.Type,r.Sale))}}function Q(e,t){if(1&e&&C.Kb(0,"app-list-item",19),2&e){var a=C.ac(),o=a.odd,r=a.$implicit,n=C.ac(3);C.hc("Type","Default")("IsOdd",o)("Hotel",n.GetSale(r.Type,r.Sale))}}function Z(e,t){if(1&e&&C.Kb(0,"app-list-item",20),2&e){var a=C.ac(),o=a.odd,r=a.$implicit,n=C.ac(3);C.hc("Type","Default")("IsOdd",o)("Option",n.GetSale(r.Type,r.Sale))}}function z(e,t){if(1&e&&(C.Pb(0,"div",2),C.Nb(1,13),C.yc(2,X,1,3,"app-list-item",14),C.yc(3,Q,1,3,"app-list-item",15),C.yc(4,Z,1,3,"app-list-item",16),C.Nb(5,13),C.Kb(6,"app-passengers",17),C.Mb(),C.Mb(),C.Kb(7,"hr"),C.Ob()),2&e){var a=t.$implicit,o=C.ac(3);C.xb(1),C.hc("formGroupName","Sales"),C.xb(1),C.hc("ngIf",a.Type===o.CartType().Tour),C.xb(1),C.hc("ngIf",a.Type===o.CartType().Hotel),C.xb(1),C.hc("ngIf",a.Type===o.CartType().Flight),C.xb(1),C.hc("formGroupName","Sale_"+a.Id),C.xb(1),C.hc("CartModel",a)("GroupPassengers",o.GetFormGroup("Sales.Sale_"+a.Id))}}function ee(e,t){if(1&e&&(C.Nb(0),C.yc(1,z,8,7,"div",12),C.bc(2,"async"),C.Mb()),2&e){var a=C.ac(2);C.xb(1),C.hc("ngForOf",C.cc(2,1,a.Cart).Sales)}}function te(e,t){1&e&&(C.Pb(0,"div",21),C.Ac(1,"Please enter a valid data!!"),C.Ob())}function ae(e,t){if(1&e){var a=C.Qb();C.Pb(0,"form",7),C.Wb("ngSubmit",(function(){return C.tc(a),C.ac().onSubmit()})),C.Kb(1,"app-reservation",8),C.yc(2,ee,3,3,"ng-container",9),C.bc(3,"async"),C.Pb(4,"div",2),C.Pb(5,"div",3),C.Pb(6,"div",4),C.Pb(7,"button",10),C.Ac(8,"Approve"),C.Ob(),C.yc(9,te,2,0,"div",11),C.Ob(),C.Ob(),C.Ob(),C.Ob()}if(2&e){var o=C.ac();C.hc("formGroup",o.FormBasket),C.xb(1),C.hc("GroupReservation",o.FormBasket),C.xb(1),C.hc("ngIf",C.cc(3,5,o.Cart).Length>0),C.xb(5),C.hc("disabled",!o.FormBasket.valid),C.xb(2),C.hc("ngIf",!o.FormBasket.valid&&o.FormBasket.touched)}}var oe,re=((oe=function(){function a(e,t,r,n,i){o(this,a),this.route=e,this.router=t,this.saleService=r,this.store=n,this.dialogService=i,this.changedSaved=!1,this.CartType=function(){return m.a}}return n(a,[{key:"ngOnInit",value:function(){var e=this;this.Cart=this.store.select("Cart"),this.supStore=this.store.select("Cart").subscribe((function(t){e.Sales=t.Sales,e.InitializeForm(t.Sales)})),this.supStore=this.store.select("Auth").pipe(Object(_.a)((function(e){return e.User}))).subscribe((function(t){e.User=t}))}},{key:"InitializeForm",value:function(a){var o=this;this.FormBasket=new b.h({Reservation:new b.h({Gender:new b.f(null,b.w.required),FirstName:new b.f(null,[b.w.required]),LastName:new b.f(null),Birthday:new b.f(null,b.w.required),IdentificationNumber:new b.f(null,b.w.required),ContactInformation:new b.h({Email:new b.f(null,[b.w.required,b.w.email]),PhoneCell:new b.f(null),Phone:new b.f(null)}),Address:new b.h({Line1:new b.f(null),Line2:new b.f(null),PostalCode:new b.f(null),Country:new b.f(null),City:new b.f(null),District:new b.f(null),Neighborhood:new b.f(null)})}),Sales:new b.h({})}),a.forEach((function(a){for(var r=new b.h({Id:new b.f({value:a.Id,disabled:!0}),Passengers:new b.d([])}),n=0,i=t(Array(a.PassengerCount).keys());n<i.length;n++){var l,s=i[n],c="Passenger_"+a.Id+"_"+s+"_",u=new b.h((e(l={},c+"Gender",new b.f("",b.w.required)),e(l,c+"Birthday",new b.f("",b.w.required)),e(l,c+"Email",new b.f("",[b.w.required,b.w.email])),e(l,c+"FirstName",new b.f("",[b.w.required])),e(l,c+"LastName",new b.f("",b.w.required)),e(l,c+"IdentityNo",new b.f("",b.w.required)),e(l,c+"PassportNo",new b.f("")),e(l,c+"PassportType",new b.f("")),l));r.get("Passengers").push(u)}o.FormBasket.get("Sales").addControl("Sale_"+a.Id,r)}))}},{key:"GetSale",value:function(e,t){switch(e){case m.a.Tour:case m.a.Hotel:case m.a.Flight:return t}return null}},{key:"GetFormGroup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.FormBasket;return t.get(e)}},{key:"GetCustomer",value:function(e){var t={Email:e.get("ContactInformation.Email").value,WhoIsName:"",Phone:e.get("ContactInformation.Phone").value,OtherPhones:"",CellPhone:e.get("ContactInformation.PhoneCell").value,Fax:"",SocialMediaLinks:"",WebAddress:"",Addresses:[{AddressType:"",Name:"",Line1:e.get("Address.Line1").value,Line2:e.get("Address.Line2").value,PostalCode:e.get("Address.PostalCode").value,Country:e.get("Address.Country").value,City:e.get("Address.City").value,District:e.get("Address.District").value,Neighborhood:e.get("Address.Neighborhood").value}]};return{FirstName:e.get("FirstName").value,LastName:e.get("LastName").value,Gender:e.get("Gender").value,Birthday:e.get("Birthday").value,Email:e.get("ContactInformation.Email").value,IdentificationNumber:e.get("IdentificationNumber").value,TaxIdentificationNumber:0,IsMember:!1,IsParent:!1,ContactInfos:[t]}}},{key:"CalculateAge",value:function(e){var t=0;if(e){var a=new Date(e),o=Math.abs(Date.now()-+a);t=Math.floor(o/864e5/365)}return t}},{key:"GetPassenger",value:function(e,t,a){var o="Passenger_"+t+"_"+a+"_";return{AgeType:0,Gender:e.get(o+"Gender").value,Birthday:e.get(o+"Birthday").value,Age:this.CalculateAge(e.get(o+"Birthday").value),Email:e.get(o+"Email").value,FirstName:e.get(o+"FirstName").value,LastName:e.get(o+"LastName").value,IdentityNo:e.get(o+"IdentityNo").value,PassportNo:e.get(o+"PassportNo").value,PassportType:e.get(o+"PassportType").value}}},{key:"onSubmit",value:function(){var e=this;this.changedSaved=!0,this.SaleRequest={AgencyCode:"B2C",BasketCode:"",User:this.User,Customers:[],Sales:[]},console.log(this.SaleRequest);var t=this.GetCustomer(this.FormBasket.get("Reservation"));this.SaleRequest.Customers.push(t),this.Sales.forEach((function(t){var a=[];e.FormBasket.get("Sales.Sale_"+t.Id+".Passengers").controls.forEach((function(o,r){var n=e.GetPassenger(o,t.Id,r);a.push(n)}));var o={};switch(o.Passengers=a,o.Type=m.a[t.Type].toString(),t.Type){case m.a.Hotel:o.Hotel=t.Sale;break;case m.a.Tour:o.Tour=t.Sale;break;case m.a.Flight:o.Flight=t.Sale}e.SaleRequest.Sales.push(o)})),this.saleService.Save(this.SaleRequest),console.log("BasketForm SaleRequest",this.SaleRequest),this.router.navigate(["/Sale/Payment"],{relativeTo:this.route}).then()}},{key:"canDeactivate",value:function(){return!!this.changedSaved||this.dialogService.Prompt("Hey there!","Do you want to discard the changes?")}},{key:"ngOnDestroy",value:function(){this.supStore&&this.supStore.unsubscribe()}}]),a}()).\u0275fac=function(e){return new(e||oe)(C.Jb(u.a),C.Jb(u.d),C.Jb(E),C.Jb(c.h),C.Jb(K.b))},oe.\u0275cmp=C.Db({type:oe,selectors:[["app-basket"]],decls:17,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-3"],[1,"card","shadow-lg"],[1,"card-body"],[1,"card-title"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"col-12","mb-3",3,"GroupReservation"],[4,"ngIf"],["type","submit",1,"btn","btn-primary","mb-2",3,"disabled"],["class","help-block",4,"ngIf"],["class","col-12 mb-3",4,"ngFor","ngForOf"],[3,"formGroupName"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Hotel",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[3,"CartModel","GroupPassengers"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Hotel"],[3,"Type","IsOdd","Option"],[1,"help-block"]],template:function(e,t){1&e&&(C.Pb(0,"div",0),C.Pb(1,"div",1),C.Pb(2,"div",2),C.Pb(3,"div",3),C.Pb(4,"div",4),C.Pb(5,"h2",5),C.Ac(6,"Basket"),C.Ob(),C.Ac(7),C.Kb(8,"hr"),C.Ac(9," m\xfc\u015fteri bilgilerinin al\u0131nmas\u0131 "),C.Kb(10,"br"),C.Ac(11,"carttan gelen sat\u0131\u015flar apiden sat\u0131\u015flar\u0131n sepet kodlar\u0131n\u0131 almas\u0131 "),C.Kb(12,"br"),C.Ac(13,"sat\u0131\u015flar\u0131n yolcu bilgilerinin al\u0131nmas\u0131 "),C.Kb(14,"br"),C.Ac(15,"dinamik yolcu say\u0131s\u0131??? "),C.Ob(),C.Ob(),C.Ob(),C.yc(16,ae,10,7,"form",6),C.Ob(),C.Ob()),2&e&&(C.xb(7),C.Cc(" ",t.SaleRequest?t.SaleRequest.BasketCode:"_local_"," "),C.xb(9),C.hc("ngIf",t.FormBasket))},directives:[l.l,b.y,b.n,b.i,U,l.k,b.j,W,P.a],pipes:[l.b],styles:[""]}),oe),ne=i("P0Yp");function ie(e,t){if(1&e&&C.Kb(0,"app-list-item",53),2&e){var a=C.ac(),o=a.odd,r=a.$implicit;C.hc("Type","Sale")("IsOdd",o)("Tour",r.Tour)}}function le(e,t){if(1&e&&C.Kb(0,"app-list-item",54),2&e){var a=C.ac(),o=a.odd,r=a.$implicit;C.hc("Type","Default")("IsOdd",o)("Hotel",r.Hotel)}}function se(e,t){if(1&e&&C.Kb(0,"app-list-item",55),2&e){var a=C.ac(),o=a.odd,r=a.$implicit;C.hc("Type","Default")("IsOdd",o)("Option",r.Flight)}}function ce(e,t){if(1&e&&(C.Pb(0,"div",60),C.Pb(1,"div",61),C.Pb(2,"h5",57),C.Ac(3),C.Ob(),C.Pb(4,"ul",62),C.Pb(5,"li",63),C.Pb(6,"label"),C.Ac(7,"Gender"),C.Ob(),C.Ac(8,":"),C.Pb(9,"strong"),C.Ac(10),C.Ob(),C.Ob(),C.Pb(11,"li",63),C.Pb(12,"label"),C.Ac(13,"Birthday"),C.Ob(),C.Ac(14,":"),C.Pb(15,"strong"),C.Ac(16),C.Ob(),C.Ob(),C.Pb(17,"li",63),C.Pb(18,"label"),C.Ac(19,"Email"),C.Ob(),C.Ac(20,":"),C.Pb(21,"strong"),C.Ac(22),C.Ob(),C.Ob(),C.Pb(23,"li",63),C.Pb(24,"label"),C.Ac(25,"Name "),C.Ob(),C.Ac(26,":"),C.Pb(27,"strong"),C.Ac(28),C.Ob(),C.Ob(),C.Pb(29,"li",63),C.Pb(30,"label"),C.Ac(31,"IdentityNo"),C.Ob(),C.Ac(32,":"),C.Pb(33,"strong"),C.Ac(34),C.Ob(),C.Ob(),C.Pb(35,"li",63),C.Pb(36,"label"),C.Ac(37,"PassportNo"),C.Ob(),C.Ac(38,":"),C.Pb(39,"strong"),C.Ac(40),C.Ob(),C.Ob(),C.Pb(41,"li",63),C.Pb(42,"label"),C.Ac(43,"PassportType"),C.Ob(),C.Ac(44,":"),C.Pb(45,"strong"),C.Ac(46),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob()),2&e){var a=t.$implicit,o=t.index;C.xb(3),C.Cc("Passenger ",o+1," "),C.xb(7),C.Bc(a.Gender),C.xb(6),C.Bc(a.Birthday),C.xb(6),C.Bc(a.Email),C.xb(6),C.Dc("",a.FirstName,"\xa0",a.LastName,""),C.xb(6),C.Bc(a.IdentityNo),C.xb(6),C.Bc(a.PassportNo),C.xb(6),C.Bc(a.PassportType)}}function be(e,t){if(1&e&&(C.Pb(0,"div",51),C.Pb(1,"div",56),C.Pb(2,"div",6),C.Pb(3,"h5",57),C.Ac(4,"Customer Info"),C.Ob(),C.Pb(5,"label"),C.Ac(6,"Gender"),C.Ob(),C.Ac(7,":"),C.Pb(8,"strong"),C.Ac(9),C.Ob(),C.Kb(10,"br"),C.Pb(11,"label"),C.Ac(12,"Name"),C.Ob(),C.Ac(13,":"),C.Pb(14,"strong"),C.Ac(15),C.Ob(),C.Kb(16,"br"),C.Pb(17,"label"),C.Ac(18,"Birthday"),C.Ob(),C.Ac(19,":"),C.Pb(20,"strong"),C.Ac(21),C.Ob(),C.Ob(),C.Ob(),C.Kb(22,"br"),C.Pb(23,"div",58),C.yc(24,ce,47,9,"div",59),C.Ob(),C.Ob()),2&e){var a=C.ac().$implicit,o=C.ac(2);C.xb(9),C.Bc(o.SaleRequest.Customers[0].Gender),C.xb(6),C.Dc("",o.SaleRequest.Customers[0].FirstName,"\xa0",o.SaleRequest.Customers[0].LastName,""),C.xb(6),C.Bc(o.SaleRequest.Customers[0].Birthday),C.xb(3),C.hc("ngForOf",a.Passengers)}}function ue(e,t){if(1&e&&(C.Pb(0,"div",47),C.yc(1,ie,1,3,"app-list-item",48),C.yc(2,le,1,3,"app-list-item",49),C.yc(3,se,1,3,"app-list-item",50),C.Pb(4,"div",51),C.Pb(5,"label"),C.Ac(6,"SaleCode"),C.Ob(),C.Ac(7,":"),C.Pb(8,"strong"),C.Ac(9),C.Ob(),C.Pb(10,"label"),C.Ac(11,"BusinessCode"),C.Ob(),C.Ac(12,":"),C.Pb(13,"strong"),C.Ac(14),C.Ob(),C.Ob(),C.yc(15,be,25,5,"div",52),C.Ob()),2&e){var a=t.$implicit,o=C.ac(2);C.xb(1),C.hc("ngIf",a.Tour),C.xb(1),C.hc("ngIf",a.Hotel),C.xb(1),C.hc("ngIf",a.Flight),C.xb(6),C.Bc(a.SaleCode),C.xb(5),C.Bc(a.BusinessCode),C.xb(1),C.hc("ngIf",o.SaleRequest.Customers[0])}}function de(e,t){if(1&e&&(C.Pb(0,"div"),C.Ac(1),C.Ob()),2&e){var a=C.ac(2);C.xb(1),C.Fc(" ",a.BinInfo.BinNo," ",a.BinInfo.CardBrand," ",a.BinInfo.CardLevel," ",a.BinInfo.ImageSrc," ",a.BinInfo.IssuingBank," ")}}function me(e,t){if(1&e&&(C.Pb(0,"option",64),C.Ac(1),C.Ob()),2&e){var a=t.$implicit;C.ic("value",a.toString().substring(2,4)),C.xb(1),C.Cc("",a," ")}}function pe(e,t){if(1&e){var a=C.Qb();C.Pb(0,"div",1),C.Pb(1,"div",2),C.Pb(2,"h2"),C.Ac(3,"Payment"),C.Ob(),C.Ac(4),C.Ob(),C.yc(5,ue,16,6,"div",3),C.Pb(6,"div",4),C.Pb(7,"div",5),C.Pb(8,"div",6),C.Pb(9,"span",7),C.Wb("click",(function(){return C.tc(a),C.ac().FillDummyData()})),C.Ac(10,"Fill Dummy Data"),C.Ob(),C.Ob(),C.Ob(),C.Pb(11,"nav"),C.Pb(12,"div",8),C.Pb(13,"a",9),C.Ac(14,"Credit Card"),C.Ob(),C.Pb(15,"a",10),C.Ac(16,"Paypal"),C.Ob(),C.Ob(),C.Ob(),C.Pb(17,"div",11),C.Pb(18,"div",12),C.Pb(19,"form",13),C.Wb("ngSubmit",(function(){return C.tc(a),C.ac().OnSubmit()})),C.Kb(20,"div"),C.Pb(21,"div",14),C.Pb(22,"div",15),C.Pb(23,"div",16),C.Kb(24,"input",17),C.Pb(25,"label",18),C.Ac(26),C.Ob(),C.Kb(27,"app-validation",19),C.yc(28,de,2,5,"div",20),C.Ob(),C.Ob(),C.Pb(29,"div",15),C.Pb(30,"div",16),C.Kb(31,"input",21),C.Pb(32,"label",22),C.Ac(33,"Card Holder Name:"),C.Ob(),C.Kb(34,"app-validation",19),C.Ob(),C.Ob(),C.Ob(),C.Pb(35,"div",14),C.Pb(36,"div",23),C.Pb(37,"div",16),C.Pb(38,"select",24),C.Pb(39,"option",25),C.Ac(40,"Jan (01)"),C.Ob(),C.Pb(41,"option",26),C.Ac(42,"Feb (02)"),C.Ob(),C.Pb(43,"option",27),C.Ac(44,"Mar (03)"),C.Ob(),C.Pb(45,"option",28),C.Ac(46,"Apr (04)"),C.Ob(),C.Pb(47,"option",29),C.Ac(48,"May (05)"),C.Ob(),C.Pb(49,"option",30),C.Ac(50,"June (06)"),C.Ob(),C.Pb(51,"option",31),C.Ac(52,"July (07)"),C.Ob(),C.Pb(53,"option",32),C.Ac(54,"Aug (08)"),C.Ob(),C.Pb(55,"option",33),C.Ac(56,"Sep (09)"),C.Ob(),C.Pb(57,"option",34),C.Ac(58,"Oct (10)"),C.Ob(),C.Pb(59,"option",35),C.Ac(60,"Nov (11)"),C.Ob(),C.Pb(61,"option",36),C.Ac(62,"Dec (12)"),C.Ob(),C.Ob(),C.Pb(63,"label",37),C.Ac(64,"Expiration Date: "),C.Ob(),C.Kb(65,"app-validation",19),C.Ob(),C.Ob(),C.Pb(66,"div",23),C.Pb(67,"div",16),C.Pb(68,"select",38),C.yc(69,me,2,2,"option",39),C.Ob(),C.Kb(70,"label",40),C.Kb(71,"app-validation",19),C.Ob(),C.Ob(),C.Pb(72,"div",15),C.Pb(73,"div",16),C.Kb(74,"input",41),C.Pb(75,"label",42),C.Ac(76,"Card CVV:"),C.Ob(),C.Kb(77,"app-validation",19),C.Ob(),C.Ob(),C.Ob(),C.Pb(78,"div",14),C.Pb(79,"div",15),C.Pb(80,"div",16),C.Kb(81,"input",43),C.Pb(82,"label",44),C.Ac(83,"Amount:"),C.Ob(),C.Ob(),C.Ob(),C.Pb(84,"div",15),C.Pb(85,"button",45),C.Ac(86,"Pay Now "),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Ob(),C.Pb(87,"div",46),C.Ac(88,"..."),C.Ob(),C.Ob(),C.Ob(),C.Ob()}if(2&e){var o=C.ac();C.xb(4),C.Ec(" ",o.SaleRequest.BasketCode," ",o.SaleRequest.AgencyCode," ",o.SaleRequest.User," "),C.xb(1),C.hc("ngForOf",o.SaleRequest.Sales),C.xb(14),C.hc("formGroup",o.PaymentForm),C.xb(5),C.hc("formControlName","CardNumber"),C.xb(2),C.Cc("Card Number (",o.CartType,")"),C.xb(1),C.hc("Caption","CardNumber")("ToCheck",o.GetFormControl("CardNumber")),C.xb(1),C.hc("ngIf",o.BinInfo),C.xb(3),C.hc("formControlName","CardOwner"),C.xb(3),C.hc("Caption","CardOwner")("ToCheck",o.GetFormControl("CardOwner")),C.xb(4),C.hc("formControlName","ExpireMonth"),C.xb(27),C.hc("Caption","ExpireMonth")("ToCheck",o.GetFormControl("ExpireMonth")),C.xb(3),C.hc("formControlName","ExpireYear"),C.xb(1),C.hc("ngForOf",o.years),C.xb(2),C.hc("Caption","ExpireYear")("ToCheck",o.GetFormControl("ExpireYear")),C.xb(3),C.hc("formControlName","Cvv2")("maxlength","16"),C.xb(3),C.hc("Caption","Cvv2")("ToCheck",o.GetFormControl("Cvv2")),C.xb(4),C.hc("formControlName","Amount"),C.xb(4),C.hc("disabled",!o.PaymentForm.valid&&!o.PaymentForm.touched)}}var fe,he,ve,ye,ge=((fe=function(){function e(t,a,r,n){o(this,e),this.route=t,this.router=a,this.webStorage=r,this.saleService=n,this.TotalAmount=.56,this.years=[];var i=new Date;this.years=this.Range(i.getFullYear(),i.getFullYear()+10)}return n(e,[{key:"Range",value:function(e,t){return new Array(t-e+1).fill(void 0).map((function(t,a){return a+e}))}},{key:"ngOnInit",value:function(){var e=this;this.SaleRequest=this.webStorage.Get(ne.b.Local,"SaleRequest"),this.saleService.SaleChanged.subscribe((function(t){e.SaleRequest=t,e.webStorage.Set(ne.b.Local,"SaleRequest",t)})),console.log("Payment SaleRequest",this.SaleRequest),this.InitializeForm()}},{key:"InitializeForm",value:function(){var e=this;this.PaymentForm=new b.h({Amount:new b.f({value:this.TotalAmount,disabled:!0}),CardOwner:new b.f(null,b.w.required),CardNumber:new b.f(null,[b.w.required,b.w.minLength(16),b.w.maxLength(16)]),ExpireMonth:new b.f(null,b.w.required),ExpireYear:new b.f(null,b.w.required),Cvv2:new b.f(null,b.w.required)}),this.PaymentForm.get("CardNumber").valueChanges.subscribe((function(t){if(t&&t.toString().length>0){var a=t.toString().substring(0,1);if("4"===a?e.CartType="Visa":"5"===a?e.CartType="MasterCard":"6"===a&&(e.CartType="Discovery"),t.toString().length>=6){var o="0000000000000000",r=(t.toString()+o.substring(0,o.length-t.toString().length)).substring(0,6);e.saleService.BankCardControl({CardNo:r}).subscribe((function(t){e.BinInfo=t}))}}}))}},{key:"FillDummyData",value:function(){this.PaymentForm.patchValue({CardOwner:"NAME LAST_NAME",CardNumber:"0000111122223333",ExpireMonth:"02",ExpireYear:"32",Cvv2:"123"})}},{key:"OnSubmit",value:function(){var e=this;this.Request={User:this.SaleRequest.User,AgencyCode:this.SaleRequest.AgencyCode,BasketCode:this.SaleRequest.BasketCode,Card:{CardOwner:this.PaymentForm.get("CardOwner").value,CardNumber:this.PaymentForm.get("CardNumber").value,ExpireYear:this.PaymentForm.get("ExpireYear").value,ExpireMonth:this.PaymentForm.get("ExpireMonth").value,Cvv2:this.PaymentForm.get("Cvv2").value},Installment:0,Amount:this.TotalAmount,UrlOk:"http://localhost:4224/Sale/Payment/Secure",UrlFail:"http://localhost:4224/Sale/Payment/Secure",SecurityLevel:"3D"},this.saleService.SecurePrepare(this.Request).subscribe((function(t){t&&(console.log("Payment SecurePrepare",t),e.webStorage.Set(ne.b.Local,"SecureRequest",e.Request),e.webStorage.Set(ne.b.Local,"SecureResponse",t),e.PaymentForm.reset(),e.router.navigate(["/Sale/Payment/Secure"],{relativeTo:e.route}).then())}))}},{key:"GetFormControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.PaymentForm;return t.get(e)}},{key:"GetFormArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.PaymentForm;return t.get(e)}}]),e}()).\u0275fac=function(e){return new(e||fe)(C.Jb(u.a),C.Jb(u.d),C.Jb(ne.c),C.Jb(E))},fe.\u0275cmp=C.Db({type:fe,selectors:[["app-payment"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"card","card-body","shadow-lg","mb-3"],["class","shadow-lg mb-3 bg-white rounded",4,"ngFor","ngForOf"],[1,"shadow-lg","p-3","mb-3","bg-white","rounded"],[1,"card","mb-2"],[1,"card-body"],[1,"btn","btn-outline-dark",3,"click"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","nav-home-tab","data-toggle","tab","href","#nav-home","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-item","nav-link","active"],["id","nav-paypal-tab","data-toggle","tab","href","#nav-paypal","role","tab","aria-controls","nav-paypal","aria-selected","false",1,"nav-item","nav-link"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","show","active"],[1,"",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-12","col-lg-6"],[1,"md-form","form-group"],["type","number","id","CardNumber","placeholder","Debit/Credit Card Number",1,"form-control",3,"formControlName"],["for","CardNumber",1,"active"],[3,"Caption","ToCheck"],[4,"ngIf"],["type","text","id","CardOwner","placeholder","Card Holder's Name",1,"form-control",3,"formControlName"],["for","CardOwner",1,"active"],[1,"col-6","col-lg-3"],["id","ExpireMonth",1,"custom-select",3,"formControlName"],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],["for","ExpireMonth",1,"active"],["id","ExpireYear",1,"custom-select","ml-1",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["for","ExpireYear",1,"active"],["type","text","id","Cvv2","placeholder","Security Code",1,"form-control",3,"formControlName","maxlength"],["for","Cvv2",1,"active"],["type","text","id","Amount",1,"form-control",3,"formControlName"],["for","Amount",1,"active"],["type","submit",1,"btn","btn-outline-success",3,"disabled"],["id","nav-paypal","role","tabpanel","aria-labelledby","nav-paypal-tab",1,"tab-pane","fade"],[1,"shadow-lg","mb-3","bg-white","rounded"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Hotel",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[1,"col-12"],["class","col-12",4,"ngIf"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Hotel"],[3,"Type","IsOdd","Option"],[1,"card"],[1,"card-title"],[1,"row","mb-2"],["class","col-12 col-md-4 p-md-1 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-md-4","p-md-1","mb-2"],[1,"shadow-lg","p-3","bg-white","rounded"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"value"]],template:function(e,t){1&e&&C.yc(0,pe,89,26,"div",0),2&e&&C.hc("ngIf",t.SaleRequest)},directives:[l.l,l.k,b.y,b.n,b.i,b.r,b.b,b.m,b.g,j.a,b.v,b.q,b.x,b.l,P.a],styles:[""]}),fe),Ce=["SecureForm"],Pe=((he=function(){function e(t,a){o(this,e),this.webStorage=t,this.saleService=a}return n(e,[{key:"ngOnInit",value:function(){this.SecureResponse=this.webStorage.Get(ne.b.Local,"SecureResponse"),console.log("SecureResponse",this.SecureResponse),this.SecureForm.nativeElement.innerHTML="\n    ".concat(this.SecureResponse.Data.Form.HiddenInputs,'\n    <div class="container">\n      <div class="row">\n        <table class="table table-hover">\n          <tr>\n            <td class=\'text-center\'><p><span>').concat(this.SecureResponse.Data.Title,'</span></p></td>\n          </tr>\n        </table>\n      </div>\n    </div>\n    <button type="submit">Send</button>')}},{key:"ngAfterViewInit",value:function(){this.SecureForm.nativeElement.submit().then((function(e){console.log(e)}))}},{key:"onSubmit",value:function(e,t){var a=this.webStorage.Get(ne.b.Local,"SecureRequest"),o=[{test:"garanti"},{ddff:"ddd"}];console.log("ConfirmRequest",{User:a.User,AgencyCode:a.AgencyCode,BasketCode:a.BasketCode,Card:a.Card,Amount:this.SecureResponse.Data.Amount,OrderId:this.SecureResponse.Data.OrderId,ValueCollection:o},o)}}]),e}()).\u0275fac=function(e){return new(e||he)(C.Jb(ne.c),C.Jb(E))},he.\u0275cmp=C.Db({type:he,selectors:[["app-payment-secure"]],viewQuery:function(e,t){var a;1&e&&C.xc(Ce,!0),2&e&&C.pc(a=C.Xb())&&(t.SecureForm=a.first)},decls:2,vars:3,consts:[["novalidate","",3,"name","action","method","ngSubmit"],["SecureForm",""]],template:function(e,t){if(1&e){var a=C.Qb();C.Pb(0,"form",0,1),C.Wb("ngSubmit",(function(e){C.tc(a);var o=C.qc(1);return t.onSubmit(o,e)})),C.Ob()}2&e&&C.hc("name",t.SecureResponse.Data.Form.Name)("action",t.SecureResponse.Data.Form.ActionUrl,C.vc)("method",t.SecureResponse.Data.Form.Method)},directives:[b.y,b.n,b.o],styles:[""]}),he),Oe=i("oLTJ"),Ae=i("wjAv"),Ne=[{path:"",children:[{path:"Cart",component:G},{path:"Basket",component:re,canDeactivate:[Oe.a]},{path:"Payment",component:ge},{path:"Payment/Secure",component:Pe},{path:"**",resolve:{path:q.c},component:Ae.c}]}],Ie=((ve=function e(){o(this,e)}).\u0275mod=C.Hb({type:ve}),ve.\u0275inj=C.Gb({factory:function(e){return new(e||ve)},imports:[[u.h.forChild(Ne)],u.h]}),ve),Se=[i("H8qh").a,K.a],Te=[l.c,b.k,b.t],xe=[c.j.forFeature(d.e,d.g),s.b.forFeature([d.c])],Fe=((ye=function e(){o(this,e)}).\u0275mod=C.Hb({type:ye}),ye.\u0275inj=C.Gb({factory:function(e){return new(e||ye)},providers:[E],imports:[[].concat(Te,xe,Se,[Ie])]}),ye)}}])}();