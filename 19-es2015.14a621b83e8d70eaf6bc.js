(self.webpackChunkng_tourism=self.webpackChunkng_tourism||[]).push([[19],{9457:function(t,e){var n,o;void 0!==(o="function"==typeof(n=function(){"use strict";function e(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){s(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(n){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,s){var c=a.URL||a.webkitURL,r=document.createElement("a");r.download=i=i||t.name||"download",r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?o(r):n(r.href)?e(t,i,s):o(r,r.target="_blank")):(r.href=c.createObjectURL(t),setTimeout(function(){c.revokeObjectURL(r.href)},4e4),setTimeout(function(){o(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,i){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),a);else if(n(t))e(t,a,i);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){o(s)})}}:function(t,n,o,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,o);var c="application/octet-stream"===t.type,r=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||c&&r||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var d=a.URL||a.webkitURL,g=d.createObjectURL(t);s?s.location=g:location.href=g,s=null,setTimeout(function(){d.revokeObjectURL(g)},4e4)}});a.saveAs=s.saveAs=s,t.exports=s})?n.apply(e,[]):n)&&(t.exports=o)},7019:function(t,e,n){"use strict";n.r(e),n.d(e,{UploadModule:function(){return w}});var o=n(8583),a=n(5782),i=n(9457),s=n.n(i),c=n(7716);let r=(()=>{class t{constructor(){this.Types=["image/jpeg","image/png"],this.Changed=new c.vpe}ngOnInit(){}GetReady(t){const e={Type:t.type,Size:t.size,Name:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),DataURI:""},n=new FileReader;return n.onload=t=>{e.DataURI=t.target.result},n.readAsDataURL(t),e}onFileChange(t){const e=Array();if(t.target.files&&t.target.files.length>0){for(const n of t.target.files)this.Types.find(t=>t===n.type)&&e.push(this.GetReady(n));t.target.value="",e.length>0&&this.Changed.emit(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-uploader"]],inputs:{Types:"Types"},outputs:{Changed:"Changed"},decls:10,vars:0,consts:[[1,"card"],[1,"card-body"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"custom-file"],["type","file","id","customFile","multiple","","accept","image/*",1,"custom-file-input",3,"change"],["for","customFile",1,"custom-file-label"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"span",4),c._uU(5,"Upload"),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"input",6),c.NdJ("change",function(t){return e.onFileChange(t)}),c.qZA(),c.TgZ(8,"label",7),c._uU(9,"Choose file"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA())},styles:[""]}),t})();function l(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"div",2),c._UZ(2,"img",10),c.TgZ(3,"button",11),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().onDelete(e)}),c._UZ(4,"i",12),c.qZA(),c.TgZ(5,"button",13),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().onSelect(e)}),c._UZ(6,"i",14),c.qZA(),c._uU(7),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(2),c.Q6J("src",t.DataURI,c.LSH),c.xp6(5),c.lnq(" ",t.Type," ",t.Name," ",t.Size," ")}}function u(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"div",2),c.TgZ(2,"button",15),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.onRotate(e.Selected,"Left")}),c._UZ(3,"i",16),c.qZA(),c.TgZ(4,"button",15),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.onRotate(e.Selected,"Right")}),c._UZ(5,"i",17),c.qZA(),c.TgZ(6,"button",15),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.onFlip(e.Selected,"H")}),c._UZ(7,"i",18),c.qZA(),c.TgZ(8,"button",15),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.onFlip(e.Selected,"V")}),c._UZ(9,"i",19),c.qZA(),c.TgZ(10,"button",15),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.onCrop(e.Selected)}),c._UZ(11,"i",20),c.qZA(),c.TgZ(12,"button",15),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.onSave(e.Selected)}),c._UZ(13,"i",21),c.qZA(),c.TgZ(14,"button",22),c._uU(15," Black & White"),c.qZA(),c.TgZ(16,"button",22),c._uU(17," Sepia"),c.qZA(),c.TgZ(18,"button",15),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.onNegative(e.Selected)}),c._uU(19," Negative"),c.qZA(),c.qZA(),c.TgZ(20,"div",23),c._UZ(21,"img",24),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(21),c.Q6J("src",t.Selected.DataURI,c.LSH)}}let d=(()=>{class t{constructor(){}ngOnInit(){}onChanged(t){this.Images=t,console.log(t)}onDelete(t){const e=this.Images.indexOf(t);e>-1&&this.Images.splice(e,1)}onSelect(t){this.Selected=t}onRotate(t,e){const n=new g(t.DataURI);"Left"===e?n.Rotate(-90):"Right"===e&&n.Rotate(90),t.DataURI=n.toDataURL(),console.log(n.DataURItoBlob(t.DataURI)),this.update(t)}update(t){const e=this.Images.indexOf(t);e>-1&&this.Images.splice(e,1),this.Images.push(t)}onFlip(t,e){const n=new g(t.DataURI);"H"===e?n.Flip():"V"===e&&n.Flip(!0),t.DataURI=n.toDataURL(),console.log(n.DataURItoBlob(t.DataURI)),this.update(t)}onNegative(t){const e=new g(t.DataURI);e.Negative(),t.DataURI=e.toDataURL(),console.log(e.DataURItoBlob(t.DataURI)),this.update(t)}onCrop(t){console.log("onCrop"),$("#target").Jcrop({aspectRatio:2/3,minSize:[2,100],maxSize:[500,750]})}onSave(t){const e=new g(t.DataURI).DataURItoBlob(t.DataURI);s().saveAs(e,"Test.jpg")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-image"]],decls:12,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"card","mb-2"],[1,"card-body"],[1,"btn","btn-outline-primary"],["class","row m-1",4,"ngFor","ngForOf"],["class","row m-1",4,"ngIf"],[3,"Changed"],[1,"row","m-1"],["width","180",1,"img-thumbnail","mb-3","mr-1",3,"src"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"btn","btn-info",3,"click"],["aria-hidden","true",1,"fa","fa-laptop"],[1,"btn","btn-lg","btn-outline-dark","mr-1",3,"click"],[1,"fas","fa-undo"],[1,"fas","fa-redo"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-arrows-alt-v"],[1,"fas","fa-crop"],[1,"fas","fa-save"],[1,"btn","btn-lg","btn-outline-dark","mr-1"],[1,"col-6","mx-auto","bg-dark",2,"max-height","800px"],["id","target",1,"img-fluid",3,"src"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"button",5),c._uU(6,"Resize"),c.qZA(),c.TgZ(7,"button",5),c._uU(8,"Edit"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(9,l,8,4,"div",6),c.YNc(10,u,22,1,"div",7),c.qZA(),c.TgZ(11,"app-uploader",8),c.NdJ("Changed",function(t){return e.onChanged(t)}),c.qZA(),c.qZA()),2&t&&(c.xp6(9),c.Q6J("ngForOf",e.Images),c.xp6(1),c.Q6J("ngIf",e.Selected))},directives:[o.sg,o.O5,r],styles:[""]}),t})();class g{constructor(t){this.canvas=document.createElement("canvas"),this.image=new Image,this.image.src=t,this.canvas.width=this.image.width,this.canvas.height=this.image.height,this.context=this.canvas.getContext("2d"),this.image.onload=()=>{console.log(222)}}toDataURL(t="image/jpeg"){return this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.context.restore(),this.canvas.toDataURL(t,.9)}Flip(t=!1){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save();const e=this.canvas.width;t?(this.context.translate(0,this.canvas.height),this.context.scale(1,-1)):(this.context.translate(e,0),this.context.scale(-1,1))}Rotate(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save();const e=this.canvas.width,n=this.canvas.height;this.newSize(e,n,t),-90===t?(this.context.rotate(-.5*Math.PI),this.context.translate(-e,0)):90===t&&(this.context.rotate(.5*Math.PI),this.context.translate(0,-n))}Negative(){this.context.drawImage(this.image,0,0);const t=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),e=t.data;for(let n=0;n<e.length;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2];this.context.putImageData(t,0,0)}newSize(t,e,n){const o=n*Math.PI/180;let a=Math.cos(o),i=Math.sin(o);i<0&&(i=-i),a<0&&(a=-a),this.canvas.width=e*i+t*a,this.canvas.height=e*a+t*i}DataURItoBlob(t){const e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(e.length);for(let a=0;a<e.length;a++)o[a]=e.charCodeAt(a);return new Blob([o],{type:n})}}var h=n(3057),p=n(5485);const f=[{path:"",children:[{path:"Image",component:d,children:[]},{path:"",component:d,children:[]},{path:"**",resolve:{path:h.Rd},component:p.r}]}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.Bz.forChild(f)],a.Bz]}),t})();const v=[n(5326).m];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,...v,m]]}),t})()}}]);