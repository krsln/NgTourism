(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{zdGO:function(t,e,i){"use strict";i.r(e),i.d(e,"FlightModule",(function(){return V}));var n=i("ofXK"),r=i("3Pt+"),o=i("tyNb"),a=i("L2Ov"),s=i("wjAv"),l=i("HDdC"),c=i("fXoL"),b=i("lJxs"),h=i("AytR"),p=i("tk/3"),u=i("Gv6l");let d=(()=>{class t{constructor(t,e){this.http=t,this.serviceHelper=e,this.State={Latency:250,Urls:{Search:h.a.BaseApiHost+"/api/1.0/Flight"}}}Search(t,e=!0){return this.http.post(this.State.Urls.Search,t).pipe(this.serviceHelper.PipeNotification(e,this.State.Latency)).pipe(Object(b.a)(t=>(t.Data.forEach((t,e)=>{t.Options&&t.Options.forEach((t,e)=>{t.Segments.forEach((t,e)=>{let i="http://localhost/FlyUs.Test/Content/Images/AirLines/";switch(t.AirlineName){case"OnurAir":i+="Onur-Air.png";break;case"Atlasglobal":i+="Atlas-Global.png";break;case"Thy":case"Turkish Airlines":i+="Turkish-Airlines.png";break;case"THY AnadoluJet":i+="Anadolu-Jet.png";break;case"THY BoraJet":i+="Bora-Jet.png";break;case"Pegasus":case"Pegasus Airlines":i+="Pegasus-Airlines.png";break;case"SunExpress":i+="Sun-Express.png"}t.ImageSrc=i})})}),t)))}}return t.\u0275fac=function(e){return new(e||t)(c.Tb(p.b),c.Tb(u.a))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=i("hTRX"),f=i("R0Ic");function g(t,e){if(1&t){const t=c.Qb();c.Pb(0,"div",5),c.Pb(1,"div",6),c.Pb(2,"b"),c.Ac(3),c.Ob(),c.Pb(4,"span"),c.Ac(5),c.Ob(),c.Ob(),c.Pb(6,"div",7),c.Pb(7,"button",8),c.Wb("click",(function(){c.tc(t);const i=e.$implicit,n=c.qc(11),r=c.ac();return n.value=n.value!=i.Min?""+(+n.value-1):""+ +i.Min,r.GetFormControl(i.Code).setValue(+n.value)})),c.Zb(),c.Pb(8,"svg",9),c.Kb(9,"path",10),c.Ob(),c.Ob(),c.Yb(),c.Kb(10,"input",11,12),c.Pb(12,"button",13),c.Wb("click",(function(){c.tc(t);const i=e.$implicit,n=c.qc(11),r=c.ac();return n.value=n.value!=i.Max?""+(+n.value+1):""+ +i.Max,r.GetFormControl(i.Code).setValue(+n.value)})),c.Zb(),c.Pb(13,"svg",9),c.Kb(14,"path",14),c.Ob(),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=e.$implicit,i=c.qc(11);c.xb(3),c.Bc(t.Label),c.xb(2),c.Bc(t.SubLabel),c.xb(5),c.hc("min",t.Min.toString())("max",t.Max.toString())("formControlName",t.Code),c.xb(2),c.hc("disabled",+i.value===t.Max)}}const x=function(t){return{display:t}},F=Object(f.f)([Object(f.i)({opacity:0}),Object(f.e)("200ms",Object(f.i)({opacity:1}))]),P=Object(f.f)(Object(f.e)("200ms",Object(f.i)({opacity:0}))),O=Object(f.k)("fadeInOut",[Object(f.j)("void => *",Object(f.l)(F)),Object(f.j)("* => void",Object(f.l)(P))]);let v=(()=>{let t=class{constructor(){this.Id="Pax".concat("_",Math.random().toString(36).substring(2,15),"_",Math.random().toString(36).substring(2,15)),this.PaxList=[],this.CloseEvent=new c.n,this.ChangeEvent=new c.n,this.clickInside=!1,this.Visible=!0}ngOnInit(){this.PaxForm=new r.h({}),this.PaxList.length>0&&(this.InitializeForm(),this.EmitChanges(this.PaxForm.value))}InitializeForm(){const t={};this.PaxList.forEach((e,i)=>t[e.Code]=new r.f({value:e.Value,disabled:!0})),this.PaxForm=new r.h(t),this.PaxForm.valueChanges.subscribe(t=>{this.EmitChanges(t)})}EmitChanges(t){const e=[];this.PaxList.forEach((i,n)=>e.push({Code:i.Code,Value:t[i.Code]})),e.push({Code:"Total",Value:e.map(t=>t.Value).reduce((t,e)=>t+e)}),this.ChangeEvent.emit(e)}GetFormControl(t,e=this.PaxForm){return e.get(t)}ListenerInside(){this.clickInside=!0}ListenerOutside(){this.clickInside?this.clickInside=!1:this.Close()}Show(t){t.stopPropagation(),this.Visible=!0}Close(){this.Visible&&(this.Visible=!1,this.CloseEvent.emit({IsClosed:!0,Id:this.Id}))}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Db({type:t,selectors:[["lb-pax"]],hostBindings:function(t,e){1&t&&c.Wb("click",(function(){return e.ListenerInside()}))("click",(function(){return e.ListenerOutside()}),!1,c.rc)},decls:6,vars:7,consts:[[1,"pax-container",3,"id","ngStyle"],[3,"formGroup"],[1,"pax-body"],["class","pax-row",4,"ngFor","ngForOf"],[1,"pax-footer"],[1,"pax-row"],[1,"pax-text"],[1,"pax-actions"],["type","button",1,"pax-btn",3,"click"],["viewBox","0 0 448 512","version","1.2",2,"display","inline-block","font-size","inherit","height","1em","overflow","visible","vertical-align","-.125em"],["d","M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"],["type","text",1,"pax-input",3,"min","max","formControlName"],["Count",""],["type","button",1,"pax-btn",3,"disabled","click"],["d","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]],template:function(t,e){1&t&&(c.Pb(0,"div",0),c.Pb(1,"form",1),c.Pb(2,"div",2),c.yc(3,g,15,6,"div",3),c.Ob(),c.Pb(4,"div",4),c.Ac(5," TODO: warning! "),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.hc("id",e.Id)("@fadeInOut",void 0)("ngStyle",c.lc(5,x,e.Visible?"block":"none")),c.xb(1),c.hc("formGroup",e.PaxForm),c.xb(2),c.hc("ngForOf",e.PaxList))},directives:[n.m,r.y,r.n,r.i,n.k,r.b,r.m,r.g],styles:['.pax-container{z-index:1029;position:absolute;box-shadow:0 5px 5px 0 rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.18),0 3px 14px 2px rgba(0,0,0,.12);font-family:Roboto,"Helvetica Neue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:15px;line-height:1;min-width:300px;max-width:300px;color:#000;background-color:#fff;padding:15px!important}.pax-container .pax-body .pax-row{display:flex;flex-wrap:wrap;margin-bottom:.5rem!important}.pax-container .pax-body .pax-row .pax-text{margin-top:auto!important;margin-bottom:auto!important;flex:0 0 calc(100% / 12 * 8);max-width:calc(100% / 12 * 8)}.pax-container .pax-body .pax-row .pax-text span{padding-left:5px;font-size:x-small;color:gray}.pax-container .pax-body .pax-row .pax-actions{flex:0 0 calc(100% / 12 * 4);max-width:calc(100% / 12 * 4);display:flex;flex-wrap:wrap}.pax-container .pax-body .pax-row .pax-actions .pax-input{flex:0 0 calc(100% / 12 * 2);max-width:calc(100% / 12 * 2);padding:0!important;text-align:center;line-height:1;background-color:transparent;border:solid transparent}.pax-container .pax-body .pax-row .pax-actions .pax-btn{flex:0 0 calc(100% / 12 * 4.6);max-width:calc(100% / 12 * 4.6);background-color:transparent;border:1px solid transparent;padding:.25rem!important;font-size:1rem;border-radius:.5rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.pax-container .pax-footer{padding:5px!important;background-color:#ff0}'],encapsulation:2,data:{animation:[O]}}),t})(),y=(()=>{let t=class{constructor(t,e,i,n){this.elementRef=t,this.componentFactoryResolver=e,this.appRef=i,this.injector=n,this.ChangeEvent=new c.n,this.PaxList=[],this.paxPickers=[],this.el=this.elementRef.nativeElement}clicked(t){this.current||this.Show(this.el.value),this.current.instance.Show(t)}Show(t){const e=this.GetComponentRef();return e.instance.PaxList=this.PaxList,e.instance.ChangeEvent.subscribe(t=>{this.el.innerText=t.find(t=>"Total"===t.Code).Value.toString()+" "+this.Passengers,this.ChangeEvent.emit(t)}),e.instance.CloseEvent.subscribe(t=>{t.IsClosed&&this.Hide(t.Id)}),this.current=e,this.paxPickers.push({Id:e.instance.Id,Ref:e}),e.instance.Id}Hide(t){const e=this.paxPickers.find(e=>e.Id===t);e&&e.Ref&&(this.current=void 0,e.Ref.destroy(),this.paxPickers.splice(this.paxPickers.indexOf(e),1))}GetComponentRef(){const t=this.componentFactoryResolver.resolveComponentFactory(v).create(this.injector);return this.appRef.attachView(t.hostView),this.el.parentNode.insertBefore(t.hostView.rootNodes[0],this.el.nextSibling),t}CLear(){this.paxPickers.forEach((t,e)=>this.Hide(t.Id)),this.paxPickers=[]}ngOnDestroy(){this.CLear()}};return t.\u0275fac=function(e){return new(e||t)(c.Jb(c.l),c.Jb(c.j),c.Jb(c.g),c.Jb(c.r))},t.\u0275dir=c.Eb({type:t,selectors:[["span","lbPaxPicker",""],["div","lbPaxPicker",""]],hostBindings:function(t,e){1&t&&c.Wb("click",(function(t){return e.clicked(t)}))},inputs:{PaxList:"PaxList",Passengers:"Passengers"},outputs:{ChangeEvent:"ChangeEvent"}}),t})(),A=(()=>{let t=class{};return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[n.c,r.t]]}),t})();var C=i("qPkN");const T=function(){return{locale:"tr",formatDate:"YYYY/MM/D"}};let w=(()=>{class t{constructor(){this.RequestReady=new c.n,this.PaxList=[{Code:"adult",Label:"Yeti\u015fkin",SubLabel:"",Min:1,Max:9,Value:1},{Code:"young",Label:"Gen\xe7",SubLabel:"12-17",Min:0,Max:7,Value:0},{Code:"child",Label:"\xc7ocuk",SubLabel:"2-11",Min:0,Max:7,Value:0},{Code:"infant-1",Label:"Koltukta Bebek",SubLabel:"2 ya\u015f alt\u0131",Min:0,Max:7,Value:0},{Code:"infant-2",Label:"Kucakta Bebek",SubLabel:"2 ya\u015f alt\u0131",Min:0,Max:7,Value:0}]}ngOnInit(){this.InitializeForm()}InitializeForm(){this.SearchForm=new r.h({DepartureAirportCode:new r.f("IST"),ArrivalAirportCode:new r.f("AYT"),CabinTypes:new r.f("Economy"),FlightType:new r.f("Round trip"),DepartureDateTime:new r.f(null,r.w.required),ReturnDateTime:new r.f(null,r.w.required),FlightAdultCount:new r.f(1),FlightChildCount:new r.f(0),FlightInfantCount:new r.f(0)})}GetFormControl(t,e=this.SearchForm){return e.get(t)}SwitchAirport(){const t=this.SearchForm.get("DepartureAirportCode").value,e=this.SearchForm.get("ArrivalAirportCode").value;this.SearchForm.patchValue({DepartureAirportCode:e,ArrivalAirportCode:t})}onSubmit(){const t=new Date(this.SearchForm.get("DepartureDateTime").value),e=new Date(this.SearchForm.get("ReturnDateTime").value),i=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();e.getFullYear(),e.getMonth(),e.getDate(),console.log(this.SearchForm.value,this.SearchForm.get("DepartureDateTime").value),this.Request={Airlines:[m.a.Domestic],Travelers:[{Code:m.f.Adult,Quantity:this.SearchForm.get("FlightAdultCount").value||0},{Code:m.f.Child,Quantity:this.SearchForm.get("FlightChildCount").value||0},{Code:m.f.Infant,Quantity:this.SearchForm.get("FlightInfantCount").value||0}],Legs:[{FlightType:m.e.OneWay,Departure:{Code:this.SearchForm.get("DepartureAirportCode").value,DateTime:i,City:"",Time:"",TimeZoneOffset:""},Arrival:{Code:this.SearchForm.get("ArrivalAirportCode").value,DateTime:i,City:"",Time:"",TimeZoneOffset:""},DirectionType:m.c.Departure,CabinTypes:[m.b.Economy,m.b.Business]}]},this.RequestReady.emit(this.Request),console.log(this.Request,this.SearchForm.value)}PaxChanged(t){const e=t.find(t=>"adult"===t.Code).Value,i=t.find(t=>"young"===t.Code).Value,n=t.find(t=>"child"===t.Code).Value,r=t.find(t=>"infant-1"===t.Code).Value;this.SearchForm.get("FlightAdultCount").setValue(e),this.SearchForm.get("FlightChildCount").setValue(i+n),this.SearchForm.get("FlightInfantCount").setValue(r),this.PaxList.forEach((e,i)=>{const n=t.find(t=>t.Code===e.Code);n&&(e.Value=n.Value)}),console.log(t.filter(t=>"Total"!==t.Code&&t.Value>0))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Db({type:t,selectors:[["app-flight-searcher"]],outputs:{RequestReady:"RequestReady"},decls:75,vars:14,consts:[[1,"card","card-body","mb-2"],[3,"formGroup","submit"],[1,"form-row","mb-2"],[1,"col-lg-2"],["for","FlightType"],["id","FlightType","name","FlightType",1,"custom-select",3,"formControlName"],["FlightType",""],[1,"col-lg-3"],["lbPaxPicker","",3,"PaxList","ChangeEvent"],["for","CabinType"],["id","CabinType","name","CabinType",1,"custom-select",3,"formControlName"],[1,"col-12","col-lg-7"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-plane-departure"],["for","DepartureAirportCode"],["type","text","placeholder","AirportCode","autocomplete","off","id","DepartureAirportCode",1,"form-control",3,"formControlName"],[1,"btn","btn-sm","btn-outline-dark","ml-1","mr-1",3,"click"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-plane-arrival"],["for","ArrivalAirportCode"],["type","text","placeholder","AirportCode","autocomplete","off","id","ArrivalAirportCode",1,"form-control",3,"formControlName"],[1,"col-12","col-lg-5"],[1,"fas","fa-calendar-alt"],["type","text","lbDatePicker","","id","DepartureDateTime","autocomplete","off",1,"form-control",3,"Options","formControlName"],["type","text","lbDatePicker","","id","ReturnDateTime","autocomplete","off",1,"form-control",3,"Options","formControlName"],[1,"form-row","mb-2","justify-content-end"],["for","Stops"],["id","Stops","name","Stops",1,"custom-select"],["for","Airlines"],["id","Airlines","name","Airlines",1,"custom-select"],[1,"form-row","justify-content-center"],["type","submit",1,"btn","btn-sm","btn-primary","mb-2"]],template:function(t,e){if(1&t&&(c.Pb(0,"div",0),c.Pb(1,"form",1),c.Wb("submit",(function(){return e.onSubmit()})),c.Pb(2,"div",2),c.Pb(3,"div",3),c.Kb(4,"label",4),c.Pb(5,"select",5,6),c.Pb(7,"option"),c.Ac(8,"Round trip"),c.Ob(),c.Pb(9,"option"),c.Ac(10,"One-way"),c.Ob(),c.Pb(11,"option"),c.Ac(12,"Multi-city"),c.Ob(),c.Ob(),c.Ob(),c.Pb(13,"div",7),c.Pb(14,"span",8),c.Wb("ChangeEvent",(function(t){return e.PaxChanged(t)})),c.Ac(15,"Passengers"),c.Ob(),c.Ob(),c.Pb(16,"div",3),c.Kb(17,"label",9),c.Pb(18,"select",10),c.Pb(19,"option"),c.Ac(20,"Economy"),c.Ob(),c.Pb(21,"option"),c.Ac(22,"Premium Economy"),c.Ob(),c.Pb(23,"option"),c.Ac(24,"Business"),c.Ob(),c.Pb(25,"option"),c.Ac(26,"First Class"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(27,"div",2),c.Pb(28,"div",11),c.Pb(29,"div",12),c.Pb(30,"div",13),c.Pb(31,"span",14),c.Kb(32,"i",15),c.Ob(),c.Ob(),c.Kb(33,"label",16),c.Kb(34,"input",17),c.Pb(35,"div",18),c.Wb("click",(function(){return e.SwitchAirport()})),c.Kb(36,"i",19),c.Ob(),c.Pb(37,"div",13),c.Pb(38,"span",14),c.Kb(39,"i",20),c.Ob(),c.Ob(),c.Kb(40,"label",21),c.Kb(41,"input",22),c.Ob(),c.Ob(),c.Pb(42,"div",23),c.Pb(43,"div",12),c.Pb(44,"div",13),c.Pb(45,"span",14),c.Kb(46,"i",24),c.Ob(),c.Ob(),c.Kb(47,"input",25),c.Kb(48,"input",26),c.Ob(),c.Ob(),c.Ob(),c.Pb(49,"div",27),c.Pb(50,"div",3),c.Ac(51," bags "),c.Ob(),c.Pb(52,"div",3),c.Kb(53,"label",28),c.Pb(54,"select",29),c.Pb(55,"option"),c.Ac(56,"Any number of stops"),c.Ob(),c.Pb(57,"option"),c.Ac(58,"Non-stop only"),c.Ob(),c.Pb(59,"option"),c.Ac(60,"1 stop or fewer"),c.Ob(),c.Pb(61,"option"),c.Ac(62,"2 stop or fewer"),c.Ob(),c.Ob(),c.Ob(),c.Pb(63,"div",3),c.Kb(64,"label",30),c.Pb(65,"select",31),c.Pb(66,"option"),c.Ac(67,"THY"),c.Ob(),c.Pb(68,"option"),c.Ac(69,"Pegasus"),c.Ob(),c.Ob(),c.Ob(),c.Pb(70,"div",3),c.Ac(71," price times "),c.Ob(),c.Ob(),c.Pb(72,"div",32),c.Pb(73,"button",33),c.Ac(74,"Search"),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t){const t=c.qc(6);c.xb(1),c.hc("formGroup",e.SearchForm),c.xb(4),c.hc("formControlName","FlightType"),c.xb(9),c.hc("PaxList",e.PaxList),c.xb(4),c.hc("formControlName","CabinTypes"),c.xb(16),c.hc("formControlName","DepartureAirportCode"),c.xb(7),c.hc("formControlName","ArrivalAirportCode"),c.xb(6),c.hc("Options",c.kc(12,T))("formControlName","DepartureDateTime"),c.xb(1),c.Bb("d-none","One-way"===t.value),c.hc("Options",c.kc(13,T))("formControlName","ReturnDateTime")}},directives:[r.y,r.n,r.i,r.v,r.m,r.g,r.q,r.x,y,r.b,C.a],styles:[""]}),t})();var S=i("OKDp");function k(t,e){if(1&t&&(c.Pb(0,"div",17),c.Pb(1,"div",18),c.Kb(2,"input",19),c.Pb(3,"label",20),c.Ac(4),c.Ob(),c.Ob(),c.Ob()),2&t){const t=e.$implicit,i=e.index,n=c.ac();c.hc("formArrayName","Airlines"),c.xb(1),c.hc("formGroupName",i.toString()),c.xb(1),c.ic("id","Air_"+t.Airline),c.hc("formControlName","Air_"+n.Filter.Airlines[i].Airline),c.xb(1),c.ic("for","Air_"+t.Airline),c.xb(1),c.Dc(" ",t.Name," (",t.Count,")")}}function M(t,e){if(1&t&&(c.Pb(0,"div",17),c.Pb(1,"div",18),c.Kb(2,"input",19),c.Pb(3,"label",20),c.Ac(4),c.Ob(),c.Ob(),c.Ob()),2&t){const t=e.$implicit,i=e.index;c.hc("formArrayName","FlightTimes"),c.xb(1),c.hc("formGroupName",i.toString()),c.xb(1),c.ic("id","FT_"+t.FlightTime),c.hc("formControlName","FT_"+t.FlightTime),c.xb(1),c.ic("for","FT_"+t.FlightTime),c.xb(1),c.Bc(t.Name)}}function D(t,e){if(1&t&&(c.Pb(0,"div",17),c.Pb(1,"div",21),c.Kb(2,"input",19),c.Pb(3,"label",20),c.Ac(4),c.Ob(),c.Ob(),c.Ob()),2&t){const t=e.index;c.hc("formArrayName","Transfer"),c.xb(2),c.ic("id","Tra_"+t),c.hc("formControlName",t),c.xb(1),c.ic("for","Tra_"+t),c.xb(1),c.Bc(0===t?"Non-Stop":"Transfer")}}let I=(()=>{class t{constructor(){this.Options=[],this.FilterReady=new c.n,this.Filter={}}ngOnChanges(...t){this.Options.length>0&&(this.Filter.Airlines=[],this.Filter.FlightTimes=[],this.Filter.Transfer=[],this.Filter.Min=0,this.Filter.Max=0,this.Filter.Max=Math.max.apply(Math,this.Options.map(t=>t.BestAmount)),this.Filter.Min=Math.min.apply(Math,this.Options.map(t=>t.BestAmount)),this.Options.forEach((t,e)=>{this.Filter.Airlines.find(e=>e.Airline===t.Airline)||this.Filter.Airlines.push({Airline:t.Airline,Name:m.a[t.Airline],Count:this.Options.filter(e=>e.Airline===t.Airline).length}),t.Segments.forEach((t,e)=>{this.Filter.FlightTimes.find(e=>e.FlightTime===t.FlightTime)||this.Filter.FlightTimes.push({FlightTime:t.FlightTime,Name:m.d[t.FlightTime]}),this.Filter.Transfer.find(e=>e===(t.IsTransfer?"Transfer":"Non-Stop"))||this.Filter.Transfer.push(t.IsTransfer?"Transfer":"Non-Stop")})}),this.FilterReady.emit(this.Options),this.Initialize())}ngOnInit(){}Initialize(){this.FilterForm=new r.h({PriceMin:new r.f,PriceMax:new r.f,Airlines:new r.d([]),FlightTimes:new r.d([]),Transfer:new r.d([])}),this.FilterForm.get("PriceMin").valueChanges.subscribe(t=>{let e=this.FilterForm.get("PriceMax").value;e&&e.toFixed(0)===this.Filter.Max.toFixed(0)&&(e=this.Filter.Max)}),this.FilterForm.get("PriceMax").valueChanges.subscribe(t=>{this.FilterForm.get("PriceMin"),t.toFixed(0)===this.Filter.Max.toFixed(0)&&(t=this.Filter.Max)}),this.Filter.Transfer.forEach((t,e)=>{this.FilterForm.get("Transfer").push(new r.f(!1))}),this.Filter.Airlines.forEach(t=>{const e=new r.h({["Air_"+t.Airline]:new r.f(!1)});this.FilterForm.get("Airlines").push(e)}),this.Filter.FlightTimes.forEach(t=>{const e=new r.h({["FT_"+t.FlightTime]:new r.f(!1)});this.FilterForm.get("FlightTimes").push(e)})}onSubmit(){const t=[],e=[],i=[],n=this.FilterForm.get("PriceMin").value;let r=this.FilterForm.get("PriceMax").value;r.toFixed(0)===this.Filter.Max.toFixed(0)&&(r=this.Filter.Max),this.Filter.Airlines.forEach((e,i)=>{this.FilterForm.get("Airlines."+i+".Air_"+e.Airline).value&&t.push(e.Airline)}),this.Filter.FlightTimes.forEach((t,i)=>{this.FilterForm.get("FlightTimes."+i+".FT_"+t.FlightTime).value&&e.push(t.FlightTime)}),this.Filter.Transfer.forEach((t,e)=>{this.FilterForm.get("Transfer."+e).value&&i.push(t)});let o=this.Options;t.length>0&&(o=o.filter(e=>t.find(t=>t===e.Airline))),e.length>0&&(o=o.filter(t=>e.find(e=>t.Segments.findIndex(t=>t.FlightTime===e)>-1))),i.length>0&&(o=o.filter(t=>i.find(e=>t.Segments.findIndex(t=>t.IsTransfer===("Transfer"===e))>-1))),(null!==n&&n!==this.Filter.Min||null!==r&&r!==this.Filter.Max)&&(o=o.filter(t=>t.BestAmount>=n&&t.BestAmount<=r)),null!=o&&0!==o.length||(o=this.Options),console.log("FlightFilter",this.Filter),this.FilterReady.emit([...o])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Db({type:t,selectors:[["app-flight-filter"]],inputs:{Options:"Options"},outputs:{FilterReady:"FilterReady"},features:[c.vb],decls:47,vars:15,consts:[[1,"card","mb-2"],[1,"card-body","p-2"],[1,"fas","fa-search"],[3,"formGroup","ngSubmit"],["type","submit",1,"w-100","m-0","btn","btn-sm","btn-outline-primary","mb-2"],[1,"fas","fa-filter"],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col-12","mb-1"],["id","Price-Range",1,""],[1,"col-6"],["type","number","id","PriceMin",1,"form-control","form-control-sm",3,"min","max","step","formControlName"],["PriceMin",""],["type","number","id","PriceMax",1,"form-control","form-control-sm",3,"min","max","step","formControlName"],["PriceMax",""],[3,"formArrayName",4,"ngFor","ngForOf"],[3,"formArrayName"],[1,"custom-control","custom-checkbox",3,"formGroupName"],["type","checkbox",1,"custom-control-input",3,"formControlName","id"],[1,"custom-control-label",3,"for"],[1,"custom-control","custom-checkbox"]],template:function(t,e){if(1&t&&(c.Pb(0,"div",0),c.Pb(1,"div",1),c.Kb(2,"i",2),c.Ac(3),c.bc(4,"async"),c.Ob(),c.Ob(),c.Pb(5,"form",3),c.Wb("ngSubmit",(function(){return e.onSubmit()})),c.Pb(6,"button",4),c.Ac(7," Filter "),c.Kb(8,"i",5),c.Ob(),c.Pb(9,"div",0),c.Pb(10,"div",6),c.Pb(11,"h5",7),c.Ac(12," Price "),c.Ob(),c.Pb(13,"div",8),c.Pb(14,"div",9),c.Kb(15,"div",10),c.Ob(),c.Pb(16,"div",11),c.Pb(17,"label"),c.Kb(18,"input",12,13),c.Ob(),c.Ob(),c.Pb(20,"div",11),c.Pb(21,"label"),c.Kb(22,"input",14,15),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(24,"div",0),c.Pb(25,"div",6),c.Pb(26,"h5",7),c.Ac(27," Airlines "),c.Ob(),c.yc(28,k,5,7,"div",16),c.Ob(),c.Ob(),c.Pb(29,"div",0),c.Pb(30,"div",6),c.Pb(31,"h5",7),c.Ac(32," Flight Type "),c.Ob(),c.Ac(33," Bussiness First class Economy "),c.Ob(),c.Ob(),c.Pb(34,"div",0),c.Pb(35,"div",6),c.Pb(36,"h5",7),c.Ac(37," When?.. "),c.Ob(),c.yc(38,M,5,6,"div",16),c.Ob(),c.Ob(),c.Pb(39,"div",0),c.Pb(40,"div",6),c.Pb(41,"h5",7),c.Ac(42," Transfer "),c.Ob(),c.yc(43,D,5,5,"div",16),c.Ob(),c.Ob(),c.Pb(44,"button",4),c.Ac(45," Filter "),c.Kb(46,"i",5),c.Ob(),c.Ob()),2&t){const t=c.qc(19),n=c.qc(23);var i;c.xb(3),c.Cc(" ",(null==(i=c.cc(4,13,e.FilterReady))?null:i.length)||e.Options.length," Results Found. "),c.xb(2),c.hc("formGroup",e.FilterForm),c.xb(13),c.hc("min",e.Filter.Min.toString())("max",n.value.toString())("step",".01")("formControlName","PriceMin"),c.xb(4),c.hc("min",t.value.toString())("max",e.Filter.Max.toString())("step",".01")("formControlName","PriceMax"),c.xb(6),c.hc("ngForOf",e.Filter.Airlines),c.xb(10),c.hc("ngForOf",e.Filter.FlightTimes),c.xb(5),c.hc("ngForOf",e.Filter.Transfer)}},directives:[r.y,r.n,r.i,r.r,r.b,r.m,r.g,n.k,r.e,r.j,r.a],pipes:[n.b],styles:[""]}),t})();const R=["listContainer"];function L(t,e){if(1&t){const t=c.Qb();c.Pb(0,"app-flight-filter",32),c.Wb("FilterReady",(function(e){return c.tc(t),c.ac().onFilterReady(e)})),c.bc(1,"async"),c.Ob()}if(2&t){const t=c.ac();c.hc("Options",c.cc(1,1,t.Options))}}const N=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t){this.flightService=t,this.Availabilities=[],this.Filtered=[],this.PagerOn=!0,this.Type="Default"}ngOnInit(){}onRequestReady(t){this.Subscription=this.flightService.Search(t).subscribe(t=>{this.Availabilities=t.Data,this.Options=new l.a(e=>{const i=[];t.Data.forEach((t,e)=>{i.push(...t.Options)}),e.next(i)}),console.log("res",t,this.Options)})}onFilterReady(t){setTimeout(()=>{this.Filtered=[...t],this.container&&(this.container.Filtered=this.Filtered)},100)}SortBy(t,e){this.container&&(this.container.InfiniteScroll.CurrentPage=1,this.container.InfiniteScroll.Items=[],this.container.Pager.CurrentPage=1),this.Filtered.length>0&&("Default"===t?this.Filtered=this.Filtered.sort((t,e)=>t.BestAmount>e.BestAmount?1:-1):"Time"===t?"Asc"===e?this.Filtered=this.Filtered.sort((t,e)=>t.Segments[0].ElapsedTime>e.Segments[0].ElapsedTime?1:-1):"Des"===e&&(this.Filtered=this.Filtered.sort((t,e)=>t.Segments[0].ElapsedTime<e.Segments[0].ElapsedTime?1:-1)):"Cost"===t?"Asc"===e?this.Filtered=this.Filtered.sort((t,e)=>t.BestAmount>e.BestAmount?1:-1):"Des"===e&&(this.Filtered=this.Filtered.sort((t,e)=>t.BestAmount<e.BestAmount?1:-1)):"Airline"===t&&("ABC"===e?this.Filtered=this.Filtered.sort((t,e)=>t.Airline>e.Airline?1:-1):"ZYV"===e&&(this.Filtered=this.Filtered.sort((t,e)=>t.Airline<e.Airline?1:-1)))),this.container&&(this.container.pagination&&(this.container.pagination.Items=this.Filtered,this.container.pagination.SetPage(1)),this.container.ScrollLoadMore())}ngOnDestroy(){this.Subscription&&this.Subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(d))},t.\u0275cmp=c.Db({type:t,selectors:[["app-flight"]],viewQuery:function(t,e){var i;1&t&&c.Hc(R,!0),2&t&&c.pc(i=c.Xb())&&(e.container=i.first)},decls:51,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-12","p-md-1","mb-2"],[3,"RequestReady"],[1,"card","card-body"],[1,"container-fluid"],[1,"col-12","col-lg-3","p-md-1","mb-2"],[3,"Options","FilterReady",4,"ngIf"],[1,"col-12","col-lg-9","p-md-1","mb-2"],[1,"card","mb-2"],[1,"card-body","p-0"],[1,"btn-group","float-left","m-1"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","btn-outline-dark","dropdown-toggle"],["SortByButton",""],[1,"fa","fa-sort"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"fas","fa-sort"],[1,"dropdown-divider"],[1,"fas","fa-sort-numeric-up"],[1,"fas","fa-sort-numeric-down"],[1,"fas","fa-sort-amount-up"],[1,"fas","fa-sort-amount-down"],[1,"fas","fa-sort-alpha-up"],[1,"fas","fa-sort-alpha-down"],[1,"btn","btn-sm","btn-outline-secondary","m-1",3,"click"],[1,"float-right"],[1,"btn","btn-sm","btn-outline-secondary","pl-2","pr-2","m-1",3,"click"],[1,"fas","fa-list"],[1,"fas","fa-th-list"],[3,"Filtered","State","TypeArray","TypeGrid"],["listContainer",""],[3,"Options","FilterReady"]],template:function(t,e){if(1&t){const t=c.Qb();c.Pb(0,"div",0),c.Pb(1,"div",1),c.Pb(2,"div",2),c.Pb(3,"app-flight-searcher",3),c.Wb("RequestReady",(function(t){return e.onRequestReady(t)})),c.Ob(),c.Ob(),c.Pb(4,"div",2),c.Pb(5,"div",4),c.Pb(6,"div",5),c.Pb(7,"div",1),c.Pb(8,"div",6),c.yc(9,L,2,3,"app-flight-filter",7),c.bc(10,"async"),c.Ob(),c.Pb(11,"div",8),c.Pb(12,"div",9),c.Pb(13,"div",10),c.Pb(14,"div",11),c.Pb(15,"button",12,13),c.Kb(17,"i",14),c.Ob(),c.Pb(18,"div",15),c.Pb(19,"div",16),c.Wb("click",(function(){c.tc(t);const i=c.qc(16);return e.SortBy("Default",""),i.innerHTML="<i class='fas fa-sort'></i>"})),c.Kb(20,"i",17),c.Ob(),c.Kb(21,"div",18),c.Pb(22,"span",16),c.Wb("click",(function(){c.tc(t);const i=c.qc(16);return e.SortBy("Time","Asc"),i.innerHTML="Time <i class='fas fa-sort-numeric-up'></i>"})),c.Ac(23," Time "),c.Kb(24,"i",19),c.Ob(),c.Pb(25,"span",16),c.Wb("click",(function(){c.tc(t);const i=c.qc(16);return e.SortBy("Time","Des"),i.innerHTML="Time <i class='fas fa-sort-numeric-down'></i>"})),c.Ac(26," Time "),c.Kb(27,"i",20),c.Ob(),c.Kb(28,"div",18),c.Pb(29,"span",16),c.Wb("click",(function(){c.tc(t);const i=c.qc(16);return e.SortBy("Cost","Asc"),i.innerHTML="Cost <i class='fas fa-sort-amount-up'></i>"})),c.Ac(30," Cost "),c.Kb(31,"i",21),c.Ob(),c.Pb(32,"span",16),c.Wb("click",(function(){c.tc(t);const i=c.qc(16);return e.SortBy("Cost","Des"),i.innerHTML="Cost <i class='fas fa-sort-amount-down'></i>"})),c.Ac(33," Cost "),c.Kb(34,"i",22),c.Ob(),c.Kb(35,"div",18),c.Pb(36,"span",16),c.Wb("click",(function(){c.tc(t);const i=c.qc(16);return e.SortBy("Airline","ABC"),i.innerHTML="Airline <i class='fas fa-sort-alpha-up'></i>"})),c.Ac(37," Airline "),c.Kb(38,"i",23),c.Ob(),c.Pb(39,"span",16),c.Wb("click",(function(){c.tc(t);const i=c.qc(16);return e.SortBy("Airline","ZYV"),i.innerHTML="Airline <i class='fas fa-sort-alpha-down'></i>"})),c.Ac(40," Airline "),c.Kb(41,"i",24),c.Ob(),c.Ob(),c.Ob(),c.Pb(42,"span",25),c.Wb("click",(function(){return e.PagerOn=!e.PagerOn})),c.Ac(43),c.Ob(),c.Pb(44,"div",26),c.Pb(45,"span",27),c.Wb("click",(function(){return e.Type="Default"})),c.Kb(46,"i",28),c.Ob(),c.Pb(47,"span",27),c.Wb("click",(function(){return e.Type="Bigger"})),c.Kb(48,"i",29),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Kb(49,"app-list-container",30,31),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()}var i;2&t&&(c.xb(9),c.hc("ngIf",(null==(i=c.cc(10,6,e.Options))?null:i.length)>0),c.xb(34),c.Bc(e.PagerOn?"InfiniteScroll":"Pagination"),c.xb(6),c.hc("Filtered",e.Filtered)("State",e.PagerOn?"Pager":"Scroll")("TypeArray","Flights")("TypeGrid",e.Type))},directives:[w,n.l,S.a,I],pipes:[n.b],styles:[""]}),t})(),children:[]},{path:"Details/:Id",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Db({type:t,selectors:[["app-flight-details"]],decls:2,vars:0,template:function(t,e){1&t&&(c.Pb(0,"p"),c.Ac(1,"flight-details works!"),c.Ob())},styles:[""]}),t})()},{path:"**",resolve:{path:a.c},component:s.c}]}];let E=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[o.h.forChild(N)],o.h]}),t})();const K=[i("H8qh").a],B=[n.c,r.t];let V=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},providers:[d],imports:[[...B,...K,E,C.b,A]]}),t})()}}]);