(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{IyS3:function(e,t,o){"use strict";o.r(t),o.d(t,"SaleModule",(function(){return fe}));var a=o("ofXK"),r=o("9jGm"),n=o("l7P3"),i=o("3Pt+"),s=o("tyNb"),l=o("7xuN"),c=o("ZmOG"),b=o("R0Ic");const d=Object(b.k)("flyInOut",[Object(b.h)("in",Object(b.i)({transform:"translateX(0)"})),Object(b.j)("void => *",[Object(b.i)({transform:"translateX(-100%)"}),Object(b.e)(500)]),Object(b.j)("* => void",[Object(b.e)(500,Object(b.i)({transform:"translateX(100%)"}))])]),m=Object(b.k)("shrinkOut",[Object(b.h)("in",Object(b.i)({height:"*"})),Object(b.j)("* => void",[Object(b.i)({height:"*"}),Object(b.e)(250,Object(b.i)({height:0}))])]);var u=o("Vv5I"),p=o("hTRX");class h{static GetDestinationOption(){return{Airline:p.a.AtlasJet,DirectionType:0,BestAmount:122.44,Segments:[{Airline:p.a.AtlasJet,FlightTime:p.d.Afternoon,AirlineName:"Atlasglobal",CompanyShortName:"",Departure:{City:"",Code:"IST",DateTime:"2018-09-21T00:00:00",Time:"00:00",TimeZoneOffset:""},Arrival:{City:"",Code:"AYT",DateTime:"2018-09-12T23:05:00",Time:"23:05",TimeZoneOffset:""},ElapsedTime:"01:10:00",IsTransfer:!1,VoyageCode:"20180921ATLJETISTAYTKK14",FlightNumber:"KK14",Equipment:{Content:"",AirEquipType:""}}],SegmentAvailabilities:[{ClassStatusCode:"ECONOMY",CabinType:2,ClassCode:"Y",AvailableSeats:"1",PricingInfos:[{PassengerType:0,CurrencyCode:"TRY",Taxes:null,BaseFare:null,TotalFare:{Amount:122.44,CurrencyCode:"TRY"}}],BestPricingInfo:{PassengerType:0,CurrencyCode:"TRY",Taxes:null,BaseFare:null,TotalFare:{Amount:122.44,CurrencyCode:"TRY"}}}]}}static GetTours(){return[{Package:null,PackageId:1,VariationId:1,Title:"Dummy Title",BaseCategory:{Id:1,Name:"Dummy BaseCategory"},Category:{Id:1,Name:"Dummy Category"},PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",Price:{Value:1453,ValueOld:0,Currency:{Symbol:"\u20ba",Name:"",Code:""}},Views:[{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x402",Caption:"Caption rsm1"},{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x403",Caption:"Caption rsm2"}],Tags:[]}]}static GetTourDetails(){return{Package:{TourId:1,Code:"Dummy Code",Name:"Dummy Name",Description:"Dummy Description",OperationTypeId:1,BaseCategory:{Id:1,Name:"Dummy BaseCategory"},Category:{Id:1,Name:"Dummy Category"},RegionId:1},ActionPlain:{ExcludedServices:"ExcludedServices",IncludedServices:"IncludedServices",Itineraries:[]},MapValues:[{Title:"",Latitude:"",Longitude:""}],VariationId:1,Title:"Dummy Title",PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",Price:{Currency:{Name:"TL"},Value:100},Views:[{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x402",Caption:"Caption rsm1"},{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x403",Caption:"Caption rsm2"}],Tags:["new"]}}static GetRoomAvailability(){return{Id:1,PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",UseType:"",Availability:9,MaxAdultCount:2,MaxChildCount:1,Room:{Id:0,RoomType:"0",Pansion:"0",BedType:"0",Facilities:[],Views:[{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x401",Caption:"Caption rsm2"}],Hotel:{Name:"Fairmont Quasar Istanbul",Code:"Code ",Description:"\u015ei\u015fli Florence Nightingale Hastanesi yak\u0131n\u0131nda, tam donan\u0131ml\u0131 spa olan l\xfcks otel.",Location:{Address:"B\xfcy\xfckdere Caddesi No.: 76 Mecidiyekoy 34394 \u0130stanbul TUR"},Views:[{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x401",Caption:"Caption rsm2"}]}},RoomPrices:[{AgeType:0,AgeRange:0,Price:{Value:1453}}]}}static GetRoomAvailabilities(){const e=[];for(let t=1;t<=10;t++)e.push({Id:t,PeriodStart:"2018-08-16T11:09:29.3932898+03:00",PeriodEnd:"2018-09-16T11:09:29.3932898+03:00",UseType:"",Availability:9,MaxAdultCount:2,MaxChildCount:1,Room:{Id:0,RoomType:"0",Pansion:"0",BedType:"0",Hotel:{Id:1,Name:"Fairmont Quasar Istanbul"+t,Code:"Code ",Description:"\u015ei\u015fli Florence Nightingale Hastanesi yak\u0131n\u0131nda, tam donan\u0131ml\u0131 spa olan l\xfcks otel.",Location:{Address:"B\xfcy\xfckdere Caddesi No.: 76 Mecidiyekoy 34394 \u0130stanbul TUR"},Facilities:[],Views:[{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x400",Caption:"Caption rsm1"},{Type:u.a.Image,Source:"https://source.unsplash.com/random/960x400"+t,Caption:"Caption rsm2"}]}},RoomPrices:[{AgeType:0,AgeRange:0,Price:{Value:1453}}]});return e}}var f=o("fXoL"),C=o("EELT");function P(e,t){if(1&e&&f.Kb(0,"app-list-item",28),2&e){const e=f.ac(),t=e.odd,o=e.$implicit,a=f.ac(2);f.hc("Type","Sale")("IsOdd",t)("Tour",a.GetSale(o.Type,o.Sale))}}function g(e,t){if(1&e&&f.Kb(0,"app-list-item",29),2&e){const e=f.ac(),t=e.odd,o=e.$implicit,a=f.ac(2);f.hc("Type","Default")("IsOdd",t)("Hotel",a.GetSale(o.Type,o.Sale))}}function y(e,t){if(1&e&&f.Kb(0,"app-list-item",30),2&e){const e=f.ac(),t=e.odd,o=e.$implicit,a=f.ac(2);f.hc("Type","Default")("IsOdd",t)("Option",a.GetSale(o.Type,o.Sale))}}function v(e,t){if(1&e){const e=f.Qb();f.Pb(0,"div",22),f.Pb(1,"div",23),f.Pb(2,"button",24),f.Wb("click",(function(){f.tc(e);const o=t.$implicit;return f.ac(2).OnDelete(o.Type,o.Id)})),f.Ac(3,"X"),f.Ob(),f.Ob(),f.yc(4,P,1,3,"app-list-item",25),f.yc(5,g,1,3,"app-list-item",26),f.yc(6,y,1,3,"app-list-item",27),f.Ob()}if(2&e){const e=t.$implicit,o=f.ac(2);f.hc("@flyInOut","in"),f.xb(4),f.hc("ngIf",e.Type===o.CartType().Tour),f.xb(1),f.hc("ngIf",e.Type===o.CartType().Hotel),f.xb(1),f.hc("ngIf",e.Type===o.CartType().Flight)}}function O(e,t){if(1&e&&(f.Pb(0,"div",1),f.yc(1,v,7,4,"div",21),f.bc(2,"async"),f.Ob()),2&e){const e=f.ac();f.hc("@shrinkOut","in"),f.xb(1),f.hc("ngForOf",f.cc(2,2,e.Cart).Sales)}}function N(e,t){1&e&&(f.Pb(0,"div",1),f.Pb(1,"div",22),f.Pb(2,"div",12),f.Pb(3,"div",4),f.Ac(4," Shopping Cart is Empty! "),f.Kb(5,"i",31),f.Ob(),f.Ob(),f.Ob(),f.Ob()),2&e&&f.hc("@shrinkOut","in")}const A=function(){return["/Sale/Basket"]};function I(e,t){1&e&&(f.Pb(0,"a",32),f.Ac(1,"Checkout"),f.Ob()),2&e&&f.hc("routerLink",f.kc(1,A))}let S=(()=>{class e{constructor(e){this.store=e,this.TotalAmount=1453.13,this.Currency="\u20ba",this.CartType=()=>c.a}GetSale(e,t){switch(e){case c.a.Tour:case c.a.Hotel:case c.a.Flight:return t}return null}ngOnInit(){this.Cart=this.store.select("Cart")}Test(){this.store.dispatch(l.a({Cart:{Type:c.a.Tour,PassengerCount:3,Sale:Object.assign({},h.GetTourDetails())}})),this.store.dispatch(l.a({Cart:{Type:c.a.Hotel,PassengerCount:2,Sale:Object.assign({},h.GetRoomAvailability())}})),this.store.dispatch(l.a({Cart:{Type:c.a.Flight,PassengerCount:1,Sale:Object.assign({},h.GetDestinationOption())}}))}OnDelete(e,t){this.store.dispatch(l.d({Type:e,Id:t}))}}return e.\u0275fac=function(t){return new(t||e)(f.Jb(n.h))},e.\u0275cmp=f.Db({type:e,selectors:[["app-cart"]],decls:37,vars:15,consts:[[1,"container"],[1,"row","mb-2"],[1,"col-12","p-md-1"],[1,"card","mb-2"],[1,"card-body"],[1,"card-title"],[1,"fas","fa-shopping-cart"],[1,"float-right"],[1,"btn","btn-outline-info","btn-sm","pull-right","mr-3",3,"routerLink"],[1,"btn","btn-outline-dark","btn-sm",3,"click"],["class","row mb-2",4,"ngIf"],[1,"col-12","p-md-1","mb-2"],[1,"card"],[1,"col-md-5","col-sm-5","float-left"],[1,"form-row"],[1,"md-form","input-group","m-0"],["type","text","placeholder","coupon code",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-mdb-color","waves-effect","m-0"],["class"," btn btn-outline-primary float-right",3,"routerLink",4,"ngIf"],[1,"float-left",2,"margin","5px"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[2,"position","absolute","right","20px","top","5px","z-index","1000"],[1,"btn","btn-sm","btn-danger","waves-effect",3,"click"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Hotel",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Hotel"],[3,"Type","IsOdd","Option"],[1,"fas","fa-battery-empty"],[1,"btn","btn-outline-primary","float-right",3,"routerLink"]],template:function(e,t){1&e&&(f.Pb(0,"div",0),f.Pb(1,"div",1),f.Pb(2,"div",2),f.Pb(3,"div",3),f.Pb(4,"div",4),f.Pb(5,"h5",5),f.Kb(6,"i",6),f.Ac(7," Shopping Cart"),f.Ob(),f.Pb(8,"span",7),f.Ac(9),f.bc(10,"async"),f.Ob(),f.Pb(11,"a",8),f.Ac(12,"Continue shopping"),f.Ob(),f.Pb(13,"button",9),f.Wb("click",(function(){return t.Test()})),f.Ac(14,"Add Dummy Data"),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.yc(15,O,3,4,"div",10),f.bc(16,"async"),f.yc(17,N,6,1,"div",10),f.bc(18,"async"),f.Pb(19,"div",1),f.Pb(20,"div",11),f.Pb(21,"div",12),f.Pb(22,"div",4),f.Pb(23,"div",13),f.Pb(24,"div",14),f.Pb(25,"div",15),f.Kb(26,"input",16),f.Pb(27,"div",17),f.Pb(28,"button",18),f.Ac(29,"Use coupon"),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Pb(30,"div",7),f.yc(31,I,2,2,"a",19),f.bc(32,"async"),f.Pb(33,"div",20),f.Ac(34,"Total price: "),f.Pb(35,"b"),f.Ac(36),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob()),2&e&&(f.xb(9),f.Cc("Count: ",f.cc(10,7,t.Cart).Length,""),f.xb(2),f.hc("routerLink","/Tour/"),f.xb(4),f.hc("ngIf",f.cc(16,9,t.Cart).Length>0),f.xb(2),f.hc("ngIf",0===f.cc(18,11,t.Cart).Length),f.xb(14),f.hc("ngIf",f.cc(32,13,t.Cart).Length>0),f.xb(5),f.Dc("",t.TotalAmount,"",t.Currency,""))},directives:[s.g,a.l,a.k,C.a],pipes:[a.b],styles:[""],data:{animation:[d,m]}}),e})();var T=o("lJxs"),x=o("XNiG"),F=o("HDdC"),w=o("AytR"),G=o("tk/3"),_=o("Gv6l");let k=(()=>{class e{constructor(e,t){this.http=e,this.serviceHelper=t,this.SaleChanged=new x.a,this.State={Latency:250,Urls:{Save:w.a.BaseApiHost+"/api/1.0/Sale/Save",PayPrepare:w.a.BaseApiHost+"/api/1.0/Sale/SecurePrepare",PayConfirm:w.a.BaseApiHost+"/api/1.0/Sale/SecureConfirm"}}}Save(e,t=!0){return this.http.post(this.State.Urls.Save,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency)).subscribe(e=>{console.log(e),this.SaleChanged.next(e.Data)})}SecurePrepare(e,t=!1){return this.http.post(this.State.Urls.PayPrepare,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency))}SecureConfirm(e,t=!1){return this.http.post(this.State.Urls.PayConfirm,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency))}BankCardControl(e){return new F.a(e=>{e.next(null)})}}return e.\u0275fac=function(t){return new(t||e)(f.Tb(G.b),f.Tb(_.a))},e.\u0275prov=f.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var B=o("Uk2f"),R=o("L2Ov"),D=o("JQXe");function L(e,t){if(1&e&&(f.Pb(0,"option",48),f.Ac(1),f.Ob()),2&e){const e=t.$implicit;f.hc("value",e.Id),f.xb(1),f.Bc(e.Name)}}function M(e,t){if(1&e&&(f.Pb(0,"option",48),f.Ac(1),f.Ob()),2&e){const e=t.$implicit;f.hc("value",e.Id),f.xb(1),f.Bc(e.Name)}}let E=(()=>{class e{constructor(e){this.locationService=e,this.Countries=[],this.Cities=[]}ngOnInit(){this.locationService.GetCountries().subscribe(e=>{this.Countries=e})}FillDummyData(){this.GroupReservation.patchValue({Reservation:{Gender:"Female",FirstName:"-+ FirstName",LastName:"-+ LastName",Birthday:"1990/12/24",IdentificationNumber:"54516102821",ContactInformation:{Email:"Email@mail.com",PhoneCell:"-+ PhoneCell",Phone:"-+ Phone"},Address:{Line1:"-+ Line1",Line2:"-+ Line2",PostalCode:"-+ 34900"}}}),this.GroupReservation.get("Reservation.Address.Country").valueChanges.subscribe(e=>{this.onCountryChange(e),this.GroupReservation.get("Reservation.Address.City").setValue("2")}),this.GroupReservation.get("Reservation.Address.Country").setValue("2")}FillCustomerData(e,t){if(t){let o,a;console.log("FillCustomerData",t);let r=new Date;t.Birthday&&(r=new Date(t.Birthday)),t.ContactInfos&&(o=t.ContactInfos[0],a=o.Addresses[0]),e.patchValue({Gender:t.Gender,FirstName:t.FirstName,LastName:t.LastName,Birthday:t.Birthday,IdentificationNumber:t.IdentificationNumber}),e.get("Birthday").setValue(r.getFullYear()+"/"+r.getMonth()+"/"+r.getDay()),e.get("Birthday").setValue(t.Birthday),o&&(e.patchValue({ContactInformation:{Email:t.Email,PhoneCell:o.CellPhone,Phone:o.Phone}}),a&&(e.patchValue({Address:{Line1:a.Line1,Line2:a.Line2,PostalCode:a.PostalCode}}),e.get("Address.Country").valueChanges.subscribe(t=>{this.onCountryChange(t),e.get("Address.City").setValue(a.City)}),e.get("Address.Country").setValue(a.Country),e.get("Address.District").setValue(a.District),e.get("Address.Neighborhood").setValue(a.Neighborhood)))}}GetFormControl(e,t=this.GroupReservation){return t.get(e)}GetFormArray(e,t=this.GroupReservation){return t.get(e)}onCountryChange(e){this.locationService.GetCities(e).subscribe(e=>{this.Cities=e})}}return e.\u0275fac=function(t){return new(t||e)(f.Jb(R.a))},e.\u0275cmp=f.Db({type:e,selectors:[["app-reservation"]],inputs:{GroupReservation:"GroupReservation"},decls:100,vars:30,consts:[[1,"card","shadow-lg"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-outline-dark",3,"click"],[3,"formGroup"],[1,"col",3,"formGroupName"],[1,"form-row"],[1,"col-12","col-md-6"],[1,"form-group"],[1,"custom-control","custom-radio","custom-control-inline"],["type","radio","name","Gender","id","Gender_Male","value","Male",1,"custom-control-input",3,"formControlName"],["for","Gender_Male",1,"custom-control-label"],["type","radio","name","Gender","id","Gender_Female","value","Female",1,"custom-control-input",3,"formControlName"],["for","Gender_Female",1,"custom-control-label"],[1,"col-sm-6"],["for","FirstName"],["type","text","id","FirstName","placeholder","First Name",1,"form-control","form-control-sm",3,"formControlName"],[3,"Caption","ToCheck"],["for","LastName"],["type","text","id","LastName","placeholder","Last Name",1,"form-control","form-control-sm",3,"formControlName"],["for","IdentificationNumber"],["type","text","id","IdentificationNumber","placeholder","Identification Number",1,"form-control","form-control-sm",3,"formControlName"],["for","Birthday"],["type","text","id","Birthday","appDatePicker","","autocomplete","off","placeholder","yy/mm/d",1,"form-control","form-control-sm",3,"formControlName"],[3,"formGroupName"],["for","Email"],[1,"fa","fa-envelope"],["type","email","id","Email","placeholder","Email",1,"form-control","form-control-sm",3,"formControlName"],["for","PhoneCell"],["type","text","id","PhoneCell","placeholder","Phone Cell",1,"form-control","form-control-sm",3,"formControlName"],["for","Phone"],["type","text","id","Phone","placeholder","Phone",1,"form-control","form-control-sm",3,"formControlName"],[1,"col-12"],["for","Line1"],["type","text","id","Line1","placeholder","1234 Main St",1,"form-control","form-control-sm",3,"formControlName"],["for","Line2"],["type","text","id","Line2","placeholder","Apartment, studio, or floor",1,"form-control","form-control-sm",3,"formControlName"],[1,"form-group","col-md-6"],["for","inputState"],["id","inputState",1,"custom-select","custom-select-sm",3,"formControlName","change"],["selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","col-md-4"],["for","inputCity"],["id","inputCity",1,"custom-select","custom-select-sm",3,"formControlName"],[1,"form-group","col-md-2"],["for","inputZip"],["type","text","id","inputZip",1,"form-control","form-control-sm",3,"formControlName"],[3,"value"]],template:function(e,t){1&e&&(f.Pb(0,"div",0),f.Pb(1,"div",1),f.Pb(2,"h2",2),f.Ac(3,"Fatura M\xfc\u015fteri Bilgileri"),f.Ob(),f.Pb(4,"span",3),f.Wb("click",(function(){return t.FillDummyData()})),f.Ac(5,"Fill Dummy Data"),f.Ob(),f.Nb(6,4),f.Pb(7,"div",5),f.Pb(8,"div",6),f.Pb(9,"div",7),f.Pb(10,"div",8),f.Pb(11,"label"),f.Ac(12,"Gender:\xa0\xa0"),f.Ob(),f.Pb(13,"div",9),f.Kb(14,"input",10),f.Pb(15,"label",11),f.Ac(16,"Male"),f.Ob(),f.Ob(),f.Pb(17,"div",9),f.Kb(18,"input",12),f.Pb(19,"label",13),f.Ac(20,"Female"),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Pb(21,"div",6),f.Pb(22,"div",14),f.Pb(23,"div",8),f.Pb(24,"label",15),f.Ac(25,"First Name"),f.Ob(),f.Kb(26,"input",16),f.Kb(27,"app-validation",17),f.Ob(),f.Ob(),f.Pb(28,"div",14),f.Pb(29,"div",8),f.Pb(30,"label",18),f.Ac(31,"Last Name"),f.Ob(),f.Kb(32,"input",19),f.Kb(33,"app-validation",17),f.Ob(),f.Ob(),f.Ob(),f.Pb(34,"div",6),f.Pb(35,"div",14),f.Pb(36,"div",8),f.Pb(37,"label",20),f.Ac(38,"Identification Number"),f.Ob(),f.Kb(39,"input",21),f.Kb(40,"app-validation",17),f.Ob(),f.Ob(),f.Pb(41,"div",14),f.Pb(42,"div",8),f.Pb(43,"label",22),f.Ac(44,"Birthday"),f.Ob(),f.Kb(45,"input",23),f.Kb(46,"app-validation",17),f.Ob(),f.Ob(),f.Ob(),f.Pb(47,"div",24),f.Pb(48,"div",6),f.Pb(49,"div",14),f.Pb(50,"div",8),f.Pb(51,"label",25),f.Kb(52,"i",26),f.Ac(53," Email"),f.Ob(),f.Kb(54,"input",27),f.Kb(55,"app-validation",17),f.Ob(),f.Ob(),f.Pb(56,"div",14),f.Kb(57,"div",8),f.Ob(),f.Ob(),f.Pb(58,"div",6),f.Pb(59,"div",14),f.Pb(60,"div",8),f.Pb(61,"label",28),f.Ac(62,"Phone Cell"),f.Ob(),f.Kb(63,"input",29),f.Ob(),f.Ob(),f.Pb(64,"div",14),f.Pb(65,"div",8),f.Pb(66,"label",30),f.Ac(67,"Phone"),f.Ob(),f.Kb(68,"input",31),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Pb(69,"div",24),f.Pb(70,"div",6),f.Pb(71,"div",32),f.Pb(72,"div",8),f.Pb(73,"label",33),f.Ac(74,"Address"),f.Ob(),f.Kb(75,"input",34),f.Ob(),f.Ob(),f.Pb(76,"div",32),f.Pb(77,"div",8),f.Pb(78,"label",35),f.Ac(79,"Address 2"),f.Ob(),f.Kb(80,"input",36),f.Ob(),f.Ob(),f.Ob(),f.Pb(81,"div",6),f.Pb(82,"div",37),f.Pb(83,"label",38),f.Ac(84,"Country"),f.Ob(),f.Pb(85,"select",39),f.Wb("change",(function(e){return t.onCountryChange(e.target.value)})),f.Pb(86,"option",40),f.Ac(87,"Choose..."),f.Ob(),f.yc(88,L,2,2,"option",41),f.Ob(),f.Ob(),f.Pb(89,"div",42),f.Pb(90,"label",43),f.Ac(91,"City"),f.Ob(),f.Pb(92,"select",44),f.Pb(93,"option",40),f.Ac(94,"Choose..."),f.Ob(),f.yc(95,M,2,2,"option",41),f.Ob(),f.Ob(),f.Pb(96,"div",45),f.Pb(97,"label",46),f.Ac(98,"Zip"),f.Ob(),f.Kb(99,"input",47),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Mb(),f.Ob(),f.Ob()),2&e&&(f.xb(6),f.hc("formGroup",t.GroupReservation),f.xb(1),f.hc("formGroupName","Reservation"),f.xb(7),f.hc("formControlName","Gender"),f.xb(4),f.hc("formControlName","Gender"),f.xb(8),f.hc("formControlName","FirstName"),f.xb(1),f.hc("Caption","FirstName")("ToCheck",t.GetFormControl("Reservation.FirstName")),f.xb(5),f.hc("formControlName","LastName"),f.xb(1),f.hc("Caption","LastName")("ToCheck",t.GetFormControl("Reservation.LastName")),f.xb(6),f.hc("formControlName","IdentificationNumber"),f.xb(1),f.hc("Caption","IdentificationNumber")("ToCheck",t.GetFormControl("Reservation.IdentificationNumber")),f.xb(5),f.hc("formControlName","Birthday"),f.xb(1),f.hc("Caption","Birthday")("ToCheck",t.GetFormControl("Reservation.Birthday")),f.xb(1),f.hc("formGroupName","ContactInformation"),f.xb(7),f.hc("formControlName","Email"),f.xb(1),f.hc("Caption","Email")("ToCheck",t.GetFormControl("Reservation.ContactInformation.Email")),f.xb(8),f.hc("formControlName","PhoneCell"),f.xb(5),f.hc("formControlName","Phone"),f.xb(1),f.hc("formGroupName","Address"),f.xb(6),f.hc("formControlName","Line1"),f.xb(5),f.hc("formControlName","Line2"),f.xb(5),f.hc("formControlName","Country"),f.xb(3),f.hc("ngForOf",t.Countries),f.xb(4),f.hc("formControlName","City"),f.xb(3),f.hc("ngForOf",t.Cities),f.xb(4),f.hc("formControlName","PostalCode"))},directives:[i.n,i.i,i.j,i.s,i.b,i.m,i.g,D.a,i.v,i.q,i.x,a.k],styles:[""],encapsulation:2}),e})();function K(e,t){if(1&e&&(f.Pb(0,"div",7),f.Pb(1,"div",8),f.Pb(2,"h5",1),f.Ac(3),f.Ob(),f.Pb(4,"div",9),f.Pb(5,"div",10),f.Pb(6,"div",11),f.Kb(7,"input",12),f.Pb(8,"label",13),f.Ac(9,"Male"),f.Ob(),f.Ob(),f.Pb(10,"div",11),f.Kb(11,"input",14),f.Pb(12,"label",13),f.Ac(13,"Female"),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Pb(14,"div",15),f.Pb(15,"label",16),f.Ac(16,"Birthday"),f.Ob(),f.Kb(17,"input",17),f.Kb(18,"app-validation",18),f.Ob(),f.Pb(19,"div",15),f.Pb(20,"label",16),f.Kb(21,"i",19),f.Ac(22," Email"),f.Ob(),f.Kb(23,"input",20),f.Kb(24,"app-validation",18),f.Ob(),f.Pb(25,"div",15),f.Pb(26,"label",16),f.Ac(27,"Name"),f.Ob(),f.Kb(28,"input",21),f.Kb(29,"app-validation",18),f.Ob(),f.Pb(30,"div",15),f.Pb(31,"label",16),f.Ac(32,"Last Name"),f.Ob(),f.Kb(33,"input",22),f.Kb(34,"app-validation",18),f.Ob(),f.Pb(35,"div",15),f.Pb(36,"label",16),f.Ac(37,"IdentityNo"),f.Ob(),f.Kb(38,"input",23),f.Kb(39,"app-validation",18),f.Ob(),f.Pb(40,"div",15),f.Pb(41,"label",16),f.Ac(42,"PassportNo"),f.Ob(),f.Kb(43,"input",24),f.Ob(),f.Pb(44,"div",15),f.Pb(45,"label",25),f.Ac(46,"PassportType"),f.Ob(),f.Kb(47,"input",26),f.Ob(),f.Pb(48,"ul",27),f.Pb(49,"li",28),f.Ac(50,"Additional Services"),f.Ob(),f.Pb(51,"li",28),f.Ac(52,"..."),f.Ob(),f.Ob(),f.Ob(),f.Ob()),2&e){const e=t.$implicit,o=t.index,a=f.ac();f.hc("formGroupName",o.toString()),f.xb(3),f.Cc("Passenger ",o+1," "),f.xb(4),f.jc("name","Passenger_",a.CartModel.Id+"_"+o,"_Gender"),f.jc("id","Passenger_",a.CartModel.Id+"_"+o,"_Male"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Gender"),f.xb(1),f.jc("for","Passenger_",a.CartModel.Id+"_"+o,"_Male"),f.xb(3),f.jc("name","Passenger_",a.CartModel.Id+"_"+o,"_Gender"),f.jc("id","Passenger_",a.CartModel.Id+"_"+o,"_Female"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Gender"),f.xb(1),f.jc("for","Passenger_",a.CartModel.Id+"_"+o,"_Female"),f.xb(3),f.ic("for","Passenger_"+a.CartModel.Id+"_"+o+"_Birthday"),f.xb(2),f.ic("id","Passenger_"+a.CartModel.Id+"_"+o+"_Birthday"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Birthday"),f.xb(1),f.hc("Caption","Birthday")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_Birthday",e)),f.xb(2),f.ic("for","Passenger_"+a.CartModel.Id+"_"+o+"_Email"),f.xb(3),f.ic("id","Passenger_"+a.CartModel.Id+"_"+o+"_Email"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_Email"),f.xb(1),f.hc("Caption","Email")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_Email",e)),f.xb(2),f.ic("for","Passenger_"+a.CartModel.Id+"_"+o+"_FirstName"),f.xb(2),f.ic("id","Passenger_"+a.CartModel.Id+"_"+o+"_FirstName"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_FirstName"),f.xb(1),f.hc("Caption","FirstName")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_FirstName",e)),f.xb(2),f.ic("for","Passenger_"+a.CartModel.Id+"_"+o+"_LastName"),f.xb(2),f.ic("id","Passenger_"+a.CartModel.Id+"_"+o+"_LastName"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_LastName"),f.xb(1),f.hc("Caption","LastName")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_LastName",e)),f.xb(2),f.ic("for","Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo"),f.xb(2),f.ic("id","Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo"),f.xb(1),f.hc("Caption","IdentityNo")("ToCheck",a.GetFormControl("Passenger_"+a.CartModel.Id+"_"+o+"_IdentityNo",e)),f.xb(2),f.ic("for","Passenger_"+a.CartModel.Id+"_"+o+"_PassportNo"),f.xb(2),f.ic("id","Passenger_"+a.CartModel.Id+"_"+o+"_PassportNo"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_PassportNo"),f.xb(2),f.ic("for","Passenger_"+a.CartModel.Id+"_"+o+"_PassportType"),f.xb(2),f.ic("id","Passenger_"+a.CartModel.Id+"_"+o+"_PassportType"),f.hc("formControlName","Passenger_"+a.CartModel.Id+"_"+o+"_PassportType")}}let q=(()=>{class e{constructor(){this.Passengers=[]}ngOnChanges(e){}ngOnInit(){}FillDummyData(){this.GroupPassengers.get("Passengers").controls.forEach((e,t)=>{const o="Passenger_"+this.CartModel.Id+"_"+t+"_";e.get(o+"Gender").setValue("Female"),e.get(o+"Birthday").setValue("1990/12/24"),e.get(o+"Email").setValue("Email@mail.com"),e.get(o+"FirstName").setValue("-+ FirstName"+t),e.get(o+"LastName").setValue("-+ LastName"+t),e.get(o+"IdentityNo").setValue("-+ IdentityNo"+t),e.get(o+"PassportNo").setValue("-+ PassportNo"+t),e.get(o+"PassportType").setValue("-+ PassportType"+t)})}GetFormControl(e,t=this.GroupPassengers){return t.get(e)}GetFormArray(e,t=this.GroupPassengers){return t.get(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Db({type:e,selectors:[["app-passengers"]],inputs:{CartModel:"CartModel",GroupPassengers:"GroupPassengers"},features:[f.vb],decls:17,vars:5,consts:[[1,"card","card-body",3,"formGroup"],[1,"card-title"],[1,"btn","btn-outline-dark",3,"click"],[1,"row","mb-2"],[1,"col"],[1,"row","mb-2",3,"formArrayName"],["class","col-12 col-md-6 col-lg-4 p-md-1 mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4","p-md-1","mb-2",3,"formGroupName"],[1,"shadow-lg","p-3","rounded"],[1,"form-row"],[1,"form-group","col-12"],[1,"custom-control","custom-radio","custom-control-inline"],["type","radio","value","Male",1,"custom-control-input",3,"name","formControlName","id"],[1,"custom-control-label",3,"for"],["type","radio","value","Female",1,"custom-control-input",3,"name","formControlName","id"],[1,"form-group"],[3,"for"],["type","text","appDatePicker","","autocomplete","off","placeholder","yy/mm/d",1,"form-control","form-control-sm",3,"id","formControlName"],[3,"Caption","ToCheck"],[1,"fa","fa-envelope"],["type","text","placeholder","Email",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","Name",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","Last Name",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","IdentityNo",1,"form-control","form-control-sm",3,"id","formControlName"],["type","text","placeholder","PassportNo",1,"form-control","form-control-sm",3,"id","formControlName"],[1,"active",3,"for"],["type","text","placeholder","PassportType",1,"form-control","form-control-sm",3,"id","formControlName"],[1,"list-group","list-group-flush"],[1,"list-group-item"]],template:function(e,t){1&e&&(f.Pb(0,"div",0),f.Pb(1,"h2",1),f.Ac(2,"Passengers"),f.Ob(),f.Pb(3,"p"),f.Pb(4,"span",2),f.Wb("click",(function(){return t.FillDummyData()})),f.Ac(5,"Fill Dummy Data"),f.Ob(),f.Ob(),f.Pb(6,"div",3),f.Pb(7,"div",4),f.Pb(8,"label"),f.Ac(9,"Id:"),f.Ob(),f.Ac(10),f.Ob(),f.Pb(11,"div",4),f.Pb(12,"label"),f.Ac(13,"PassengerCount:"),f.Ob(),f.Ac(14),f.Ob(),f.Ob(),f.Pb(15,"div",5),f.yc(16,K,53,41,"div",6),f.Ob(),f.Ob()),2&e&&(f.hc("formGroup",t.GroupPassengers),f.xb(10),f.Cc(" ",t.CartModel.Id," "),f.xb(4),f.Cc(" ",t.CartModel.PassengerCount," "),f.xb(1),f.hc("formArrayName","Passengers"),f.xb(1),f.hc("ngForOf",t.GetFormArray("Passengers").controls))},directives:[i.n,i.i,i.e,a.k,i.j,i.s,i.b,i.m,i.g,D.a],styles:[""]}),e})();function V(e,t){if(1&e&&f.Kb(0,"app-list-item",18),2&e){const e=f.ac(),t=e.odd,o=e.$implicit,a=f.ac(3);f.hc("Type","Sale")("IsOdd",t)("Tour",a.GetSale(o.Type,o.Sale))}}function H(e,t){if(1&e&&f.Kb(0,"app-list-item",19),2&e){const e=f.ac(),t=e.odd,o=e.$implicit,a=f.ac(3);f.hc("Type","Default")("IsOdd",t)("Hotel",a.GetSale(o.Type,o.Sale))}}function j(e,t){if(1&e&&f.Kb(0,"app-list-item",20),2&e){const e=f.ac(),t=e.odd,o=e.$implicit,a=f.ac(3);f.hc("Type","Default")("IsOdd",t)("Option",a.GetSale(o.Type,o.Sale))}}function J(e,t){if(1&e&&(f.Pb(0,"div",2),f.Nb(1,13),f.yc(2,V,1,3,"app-list-item",14),f.yc(3,H,1,3,"app-list-item",15),f.yc(4,j,1,3,"app-list-item",16),f.Nb(5,13),f.Kb(6,"app-passengers",17),f.Mb(),f.Mb(),f.Kb(7,"hr"),f.Ob()),2&e){const e=t.$implicit,o=f.ac(3);f.xb(1),f.hc("formGroupName","Sales"),f.xb(1),f.hc("ngIf",e.Type===o.CartType().Tour),f.xb(1),f.hc("ngIf",e.Type===o.CartType().Hotel),f.xb(1),f.hc("ngIf",e.Type===o.CartType().Flight),f.xb(1),f.hc("formGroupName","Sale_"+e.Id),f.xb(1),f.hc("CartModel",e)("GroupPassengers",o.GetFormGroup("Sales.Sale_"+e.Id))}}function U(e,t){if(1&e&&(f.Nb(0),f.yc(1,J,8,7,"div",12),f.bc(2,"async"),f.Mb()),2&e){const e=f.ac(2);f.xb(1),f.hc("ngForOf",f.cc(2,1,e.Cart).Sales)}}function Y(e,t){1&e&&(f.Pb(0,"div",21),f.Ac(1,"Please enter a valid data!!"),f.Ob())}function $(e,t){if(1&e){const e=f.Qb();f.Pb(0,"form",7),f.Wb("ngSubmit",(function(){return f.tc(e),f.ac().onSubmit()})),f.Kb(1,"app-reservation",8),f.yc(2,U,3,3,"ng-container",9),f.bc(3,"async"),f.Pb(4,"div",2),f.Pb(5,"div",3),f.Pb(6,"div",4),f.Pb(7,"button",10),f.Ac(8,"Approve"),f.Ob(),f.yc(9,Y,2,0,"div",11),f.Ob(),f.Ob(),f.Ob(),f.Ob()}if(2&e){const e=f.ac();f.hc("formGroup",e.FormBasket),f.xb(1),f.hc("GroupReservation",e.FormBasket),f.xb(1),f.hc("ngIf",f.cc(3,5,e.Cart).Length>0),f.xb(5),f.hc("disabled",!e.FormBasket.valid),f.xb(2),f.hc("ngIf",!e.FormBasket.valid&&e.FormBasket.touched)}}let W=(()=>{class e{constructor(e,t,o,a,r){this.route=e,this.router=t,this.saleService=o,this.store=a,this.dialogService=r,this.changedSaved=!1,this.CartType=()=>c.a}ngOnInit(){this.Cart=this.store.select("Cart"),this.supStore=this.store.select("Cart").subscribe(e=>{this.Sales=e.Sales,this.InitializeForm(e.Sales)}),this.supStore=this.store.select("Auth").pipe(Object(T.a)(e=>e.User)).subscribe(e=>{this.User=e})}InitializeForm(e){this.FormBasket=new i.h({Reservation:new i.h({Gender:new i.f(null,i.w.required),FirstName:new i.f(null,[i.w.required]),LastName:new i.f(null),Birthday:new i.f(null,i.w.required),IdentificationNumber:new i.f(null,i.w.required),ContactInformation:new i.h({Email:new i.f(null,[i.w.required,i.w.email]),PhoneCell:new i.f(null),Phone:new i.f(null)}),Address:new i.h({Line1:new i.f(null),Line2:new i.f(null),PostalCode:new i.f(null),Country:new i.f(null),City:new i.f(null),District:new i.f(null),Neighborhood:new i.f(null)})}),Sales:new i.h({})}),e.forEach(e=>{const t=new i.h({Id:new i.f({value:e.Id,disabled:!0}),Passengers:new i.d([])});for(const o of[...Array(e.PassengerCount).keys()]){const a="Passenger_"+e.Id+"_"+o+"_",r=new i.h({[a+"Gender"]:new i.f("",i.w.required),[a+"Birthday"]:new i.f("",i.w.required),[a+"Email"]:new i.f("",[i.w.required,i.w.email]),[a+"FirstName"]:new i.f("",[i.w.required]),[a+"LastName"]:new i.f("",i.w.required),[a+"IdentityNo"]:new i.f("",i.w.required),[a+"PassportNo"]:new i.f(""),[a+"PassportType"]:new i.f("")});t.get("Passengers").push(r)}this.FormBasket.get("Sales").addControl("Sale_"+e.Id,t)})}GetSale(e,t){switch(e){case c.a.Tour:case c.a.Hotel:case c.a.Flight:return t}return null}GetFormGroup(e,t=this.FormBasket){return t.get(e)}GetCustomer(e){const t={Email:e.get("ContactInformation.Email").value,WhoIsName:"",Phone:e.get("ContactInformation.Phone").value,OtherPhones:"",CellPhone:e.get("ContactInformation.PhoneCell").value,Fax:"",SocialMediaLinks:"",WebAddress:"",Addresses:[{AddressType:"",Name:"",Line1:e.get("Address.Line1").value,Line2:e.get("Address.Line2").value,PostalCode:e.get("Address.PostalCode").value,Country:e.get("Address.Country").value,City:e.get("Address.City").value,District:e.get("Address.District").value,Neighborhood:e.get("Address.Neighborhood").value}]};return{FirstName:e.get("FirstName").value,LastName:e.get("LastName").value,Gender:e.get("Gender").value,Birthday:e.get("Birthday").value,Email:e.get("ContactInformation.Email").value,IdentificationNumber:e.get("IdentificationNumber").value,TaxIdentificationNumber:0,IsMember:!1,IsParent:!1,ContactInfos:[t]}}CalculateAge(e){let t=0;if(e){const o=new Date(e),a=Math.abs(Date.now()-+o);t=Math.floor(a/864e5/365)}return t}GetPassenger(e,t,o){const a="Passenger_"+t+"_"+o+"_";return{AgeType:0,Gender:e.get(a+"Gender").value,Birthday:e.get(a+"Birthday").value,Age:this.CalculateAge(e.get(a+"Birthday").value),Email:e.get(a+"Email").value,FirstName:e.get(a+"FirstName").value,LastName:e.get(a+"LastName").value,IdentityNo:e.get(a+"IdentityNo").value,PassportNo:e.get(a+"PassportNo").value,PassportType:e.get(a+"PassportType").value}}onSubmit(){this.changedSaved=!0,this.SaleRequest={AgencyCode:"B2C",BasketCode:"",User:this.User,Customers:[],Sales:[]},console.log(this.SaleRequest);const e=this.GetCustomer(this.FormBasket.get("Reservation"));this.SaleRequest.Customers.push(e),this.Sales.forEach(e=>{const t=[];this.FormBasket.get("Sales.Sale_"+e.Id+".Passengers").controls.forEach((o,a)=>{const r=this.GetPassenger(o,e.Id,a);t.push(r)});const o={};switch(o.Passengers=t,o.Type=c.a[e.Type].toString(),e.Type){case c.a.Hotel:o.Hotel=e.Sale;break;case c.a.Tour:o.Tour=e.Sale;break;case c.a.Flight:o.Flight=e.Sale}this.SaleRequest.Sales.push(o)}),this.saleService.Save(this.SaleRequest),console.log("BasketForm SaleRequest",this.SaleRequest),this.router.navigate(["/Sale/Payment"],{relativeTo:this.route}).then()}canDeactivate(){return!!this.changedSaved||this.dialogService.Prompt("Hey there!","Do you want to discard the changes?")}ngOnDestroy(){this.supStore&&this.supStore.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(f.Jb(s.a),f.Jb(s.d),f.Jb(k),f.Jb(n.h),f.Jb(B.b))},e.\u0275cmp=f.Db({type:e,selectors:[["app-basket"]],decls:17,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-3"],[1,"card","shadow-lg"],[1,"card-body"],[1,"card-title"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"col-12","mb-3",3,"GroupReservation"],[4,"ngIf"],["type","submit",1,"btn","btn-primary","mb-2",3,"disabled"],["class","help-block",4,"ngIf"],["class","col-12 mb-3",4,"ngFor","ngForOf"],[3,"formGroupName"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Hotel",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[3,"CartModel","GroupPassengers"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Hotel"],[3,"Type","IsOdd","Option"],[1,"help-block"]],template:function(e,t){1&e&&(f.Pb(0,"div",0),f.Pb(1,"div",1),f.Pb(2,"div",2),f.Pb(3,"div",3),f.Pb(4,"div",4),f.Pb(5,"h2",5),f.Ac(6,"Basket"),f.Ob(),f.Ac(7),f.Kb(8,"hr"),f.Ac(9," m\xfc\u015fteri bilgilerinin al\u0131nmas\u0131 "),f.Kb(10,"br"),f.Ac(11,"carttan gelen sat\u0131\u015flar apiden sat\u0131\u015flar\u0131n sepet kodlar\u0131n\u0131 almas\u0131 "),f.Kb(12,"br"),f.Ac(13,"sat\u0131\u015flar\u0131n yolcu bilgilerinin al\u0131nmas\u0131 "),f.Kb(14,"br"),f.Ac(15,"dinamik yolcu say\u0131s\u0131??? "),f.Ob(),f.Ob(),f.Ob(),f.yc(16,$,10,7,"form",6),f.Ob(),f.Ob()),2&e&&(f.xb(7),f.Cc(" ",t.SaleRequest?t.SaleRequest.BasketCode:"_local_"," "),f.xb(9),f.hc("ngIf",t.FormBasket))},directives:[a.l,i.y,i.n,i.i,E,a.k,i.j,q,C.a],pipes:[a.b],styles:[""]}),e})();var X=o("P0Yp");function Q(e,t){if(1&e&&f.Kb(0,"app-list-item",53),2&e){const e=f.ac(),t=e.odd,o=e.$implicit;f.hc("Type","Sale")("IsOdd",t)("Tour",o.Tour)}}function Z(e,t){if(1&e&&f.Kb(0,"app-list-item",54),2&e){const e=f.ac(),t=e.odd,o=e.$implicit;f.hc("Type","Default")("IsOdd",t)("Hotel",o.Hotel)}}function z(e,t){if(1&e&&f.Kb(0,"app-list-item",55),2&e){const e=f.ac(),t=e.odd,o=e.$implicit;f.hc("Type","Default")("IsOdd",t)("Option",o.Flight)}}function ee(e,t){if(1&e&&(f.Pb(0,"div",60),f.Pb(1,"div",61),f.Pb(2,"h5",57),f.Ac(3),f.Ob(),f.Pb(4,"ul",62),f.Pb(5,"li",63),f.Pb(6,"label"),f.Ac(7,"Gender"),f.Ob(),f.Ac(8,":"),f.Pb(9,"strong"),f.Ac(10),f.Ob(),f.Ob(),f.Pb(11,"li",63),f.Pb(12,"label"),f.Ac(13,"Birthday"),f.Ob(),f.Ac(14,":"),f.Pb(15,"strong"),f.Ac(16),f.Ob(),f.Ob(),f.Pb(17,"li",63),f.Pb(18,"label"),f.Ac(19,"Email"),f.Ob(),f.Ac(20,":"),f.Pb(21,"strong"),f.Ac(22),f.Ob(),f.Ob(),f.Pb(23,"li",63),f.Pb(24,"label"),f.Ac(25,"Name "),f.Ob(),f.Ac(26,":"),f.Pb(27,"strong"),f.Ac(28),f.Ob(),f.Ob(),f.Pb(29,"li",63),f.Pb(30,"label"),f.Ac(31,"IdentityNo"),f.Ob(),f.Ac(32,":"),f.Pb(33,"strong"),f.Ac(34),f.Ob(),f.Ob(),f.Pb(35,"li",63),f.Pb(36,"label"),f.Ac(37,"PassportNo"),f.Ob(),f.Ac(38,":"),f.Pb(39,"strong"),f.Ac(40),f.Ob(),f.Ob(),f.Pb(41,"li",63),f.Pb(42,"label"),f.Ac(43,"PassportType"),f.Ob(),f.Ac(44,":"),f.Pb(45,"strong"),f.Ac(46),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob()),2&e){const e=t.$implicit,o=t.index;f.xb(3),f.Cc("Passenger ",o+1," "),f.xb(7),f.Bc(e.Gender),f.xb(6),f.Bc(e.Birthday),f.xb(6),f.Bc(e.Email),f.xb(6),f.Dc("",e.FirstName,"\xa0",e.LastName,""),f.xb(6),f.Bc(e.IdentityNo),f.xb(6),f.Bc(e.PassportNo),f.xb(6),f.Bc(e.PassportType)}}function te(e,t){if(1&e&&(f.Pb(0,"div",51),f.Pb(1,"div",56),f.Pb(2,"div",6),f.Pb(3,"h5",57),f.Ac(4,"Customer Info"),f.Ob(),f.Pb(5,"label"),f.Ac(6,"Gender"),f.Ob(),f.Ac(7,":"),f.Pb(8,"strong"),f.Ac(9),f.Ob(),f.Kb(10,"br"),f.Pb(11,"label"),f.Ac(12,"Name"),f.Ob(),f.Ac(13,":"),f.Pb(14,"strong"),f.Ac(15),f.Ob(),f.Kb(16,"br"),f.Pb(17,"label"),f.Ac(18,"Birthday"),f.Ob(),f.Ac(19,":"),f.Pb(20,"strong"),f.Ac(21),f.Ob(),f.Ob(),f.Ob(),f.Kb(22,"br"),f.Pb(23,"div",58),f.yc(24,ee,47,9,"div",59),f.Ob(),f.Ob()),2&e){const e=f.ac().$implicit,t=f.ac(2);f.xb(9),f.Bc(t.SaleRequest.Customers[0].Gender),f.xb(6),f.Dc("",t.SaleRequest.Customers[0].FirstName,"\xa0",t.SaleRequest.Customers[0].LastName,""),f.xb(6),f.Bc(t.SaleRequest.Customers[0].Birthday),f.xb(3),f.hc("ngForOf",e.Passengers)}}function oe(e,t){if(1&e&&(f.Pb(0,"div",47),f.yc(1,Q,1,3,"app-list-item",48),f.yc(2,Z,1,3,"app-list-item",49),f.yc(3,z,1,3,"app-list-item",50),f.Pb(4,"div",51),f.Pb(5,"label"),f.Ac(6,"SaleCode"),f.Ob(),f.Ac(7,":"),f.Pb(8,"strong"),f.Ac(9),f.Ob(),f.Pb(10,"label"),f.Ac(11,"BusinessCode"),f.Ob(),f.Ac(12,":"),f.Pb(13,"strong"),f.Ac(14),f.Ob(),f.Ob(),f.yc(15,te,25,5,"div",52),f.Ob()),2&e){const e=t.$implicit,o=f.ac(2);f.xb(1),f.hc("ngIf",e.Tour),f.xb(1),f.hc("ngIf",e.Hotel),f.xb(1),f.hc("ngIf",e.Flight),f.xb(6),f.Bc(e.SaleCode),f.xb(5),f.Bc(e.BusinessCode),f.xb(1),f.hc("ngIf",o.SaleRequest.Customers[0])}}function ae(e,t){if(1&e&&(f.Pb(0,"div"),f.Ac(1),f.Ob()),2&e){const e=f.ac(2);f.xb(1),f.Fc(" ",e.BinInfo.BinNo," ",e.BinInfo.CardBrand," ",e.BinInfo.CardLevel," ",e.BinInfo.ImageSrc," ",e.BinInfo.IssuingBank," ")}}function re(e,t){if(1&e&&(f.Pb(0,"option",64),f.Ac(1),f.Ob()),2&e){const e=t.$implicit;f.ic("value",e.toString().substring(2,4)),f.xb(1),f.Cc("",e," ")}}function ne(e,t){if(1&e){const e=f.Qb();f.Pb(0,"div",1),f.Pb(1,"div",2),f.Pb(2,"h2"),f.Ac(3,"Payment"),f.Ob(),f.Ac(4),f.Ob(),f.yc(5,oe,16,6,"div",3),f.Pb(6,"div",4),f.Pb(7,"div",5),f.Pb(8,"div",6),f.Pb(9,"span",7),f.Wb("click",(function(){return f.tc(e),f.ac().FillDummyData()})),f.Ac(10,"Fill Dummy Data"),f.Ob(),f.Ob(),f.Ob(),f.Pb(11,"nav"),f.Pb(12,"div",8),f.Pb(13,"a",9),f.Ac(14,"Credit Card"),f.Ob(),f.Pb(15,"a",10),f.Ac(16,"Paypal"),f.Ob(),f.Ob(),f.Ob(),f.Pb(17,"div",11),f.Pb(18,"div",12),f.Pb(19,"form",13),f.Wb("ngSubmit",(function(){return f.tc(e),f.ac().OnSubmit()})),f.Kb(20,"div"),f.Pb(21,"div",14),f.Pb(22,"div",15),f.Pb(23,"div",16),f.Kb(24,"input",17),f.Pb(25,"label",18),f.Ac(26),f.Ob(),f.Kb(27,"app-validation",19),f.yc(28,ae,2,5,"div",20),f.Ob(),f.Ob(),f.Pb(29,"div",15),f.Pb(30,"div",16),f.Kb(31,"input",21),f.Pb(32,"label",22),f.Ac(33,"Card Holder Name:"),f.Ob(),f.Kb(34,"app-validation",19),f.Ob(),f.Ob(),f.Ob(),f.Pb(35,"div",14),f.Pb(36,"div",23),f.Pb(37,"div",16),f.Pb(38,"select",24),f.Pb(39,"option",25),f.Ac(40,"Jan (01)"),f.Ob(),f.Pb(41,"option",26),f.Ac(42,"Feb (02)"),f.Ob(),f.Pb(43,"option",27),f.Ac(44,"Mar (03)"),f.Ob(),f.Pb(45,"option",28),f.Ac(46,"Apr (04)"),f.Ob(),f.Pb(47,"option",29),f.Ac(48,"May (05)"),f.Ob(),f.Pb(49,"option",30),f.Ac(50,"June (06)"),f.Ob(),f.Pb(51,"option",31),f.Ac(52,"July (07)"),f.Ob(),f.Pb(53,"option",32),f.Ac(54,"Aug (08)"),f.Ob(),f.Pb(55,"option",33),f.Ac(56,"Sep (09)"),f.Ob(),f.Pb(57,"option",34),f.Ac(58,"Oct (10)"),f.Ob(),f.Pb(59,"option",35),f.Ac(60,"Nov (11)"),f.Ob(),f.Pb(61,"option",36),f.Ac(62,"Dec (12)"),f.Ob(),f.Ob(),f.Pb(63,"label",37),f.Ac(64,"Expiration Date: "),f.Ob(),f.Kb(65,"app-validation",19),f.Ob(),f.Ob(),f.Pb(66,"div",23),f.Pb(67,"div",16),f.Pb(68,"select",38),f.yc(69,re,2,2,"option",39),f.Ob(),f.Kb(70,"label",40),f.Kb(71,"app-validation",19),f.Ob(),f.Ob(),f.Pb(72,"div",15),f.Pb(73,"div",16),f.Kb(74,"input",41),f.Pb(75,"label",42),f.Ac(76,"Card CVV:"),f.Ob(),f.Kb(77,"app-validation",19),f.Ob(),f.Ob(),f.Ob(),f.Pb(78,"div",14),f.Pb(79,"div",15),f.Pb(80,"div",16),f.Kb(81,"input",43),f.Pb(82,"label",44),f.Ac(83,"Amount:"),f.Ob(),f.Ob(),f.Ob(),f.Pb(84,"div",15),f.Pb(85,"button",45),f.Ac(86,"Pay Now "),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Ob(),f.Pb(87,"div",46),f.Ac(88,"..."),f.Ob(),f.Ob(),f.Ob(),f.Ob()}if(2&e){const e=f.ac();f.xb(4),f.Ec(" ",e.SaleRequest.BasketCode," ",e.SaleRequest.AgencyCode," ",e.SaleRequest.User," "),f.xb(1),f.hc("ngForOf",e.SaleRequest.Sales),f.xb(14),f.hc("formGroup",e.PaymentForm),f.xb(5),f.hc("formControlName","CardNumber"),f.xb(2),f.Cc("Card Number (",e.CartType,")"),f.xb(1),f.hc("Caption","CardNumber")("ToCheck",e.GetFormControl("CardNumber")),f.xb(1),f.hc("ngIf",e.BinInfo),f.xb(3),f.hc("formControlName","CardOwner"),f.xb(3),f.hc("Caption","CardOwner")("ToCheck",e.GetFormControl("CardOwner")),f.xb(4),f.hc("formControlName","ExpireMonth"),f.xb(27),f.hc("Caption","ExpireMonth")("ToCheck",e.GetFormControl("ExpireMonth")),f.xb(3),f.hc("formControlName","ExpireYear"),f.xb(1),f.hc("ngForOf",e.years),f.xb(2),f.hc("Caption","ExpireYear")("ToCheck",e.GetFormControl("ExpireYear")),f.xb(3),f.hc("formControlName","Cvv2")("maxlength","16"),f.xb(3),f.hc("Caption","Cvv2")("ToCheck",e.GetFormControl("Cvv2")),f.xb(4),f.hc("formControlName","Amount"),f.xb(4),f.hc("disabled",!e.PaymentForm.valid&&!e.PaymentForm.touched)}}let ie=(()=>{class e{constructor(e,t,o,a){this.route=e,this.router=t,this.webStorage=o,this.saleService=a,this.TotalAmount=.56,this.years=[];const r=new Date;this.years=this.Range(r.getFullYear(),r.getFullYear()+10)}Range(e,t){return new Array(t-e+1).fill(void 0).map((t,o)=>o+e)}ngOnInit(){this.SaleRequest=this.webStorage.Get(X.b.Local,"SaleRequest"),this.saleService.SaleChanged.subscribe(e=>{this.SaleRequest=e,this.webStorage.Set(X.b.Local,"SaleRequest",e)}),console.log("Payment SaleRequest",this.SaleRequest),this.InitializeForm()}InitializeForm(){this.PaymentForm=new i.h({Amount:new i.f({value:this.TotalAmount,disabled:!0}),CardOwner:new i.f(null,i.w.required),CardNumber:new i.f(null,[i.w.required,i.w.minLength(16),i.w.maxLength(16)]),ExpireMonth:new i.f(null,i.w.required),ExpireYear:new i.f(null,i.w.required),Cvv2:new i.f(null,i.w.required)}),this.PaymentForm.get("CardNumber").valueChanges.subscribe(e=>{if(e&&e.toString().length>0){const t=e.toString().substring(0,1);if("4"===t?this.CartType="Visa":"5"===t?this.CartType="MasterCard":"6"===t&&(this.CartType="Discovery"),e.toString().length>=6){const t="0000000000000000",o=(e.toString()+t.substring(0,t.length-e.toString().length)).substring(0,6);this.saleService.BankCardControl({CardNo:o}).subscribe(e=>{this.BinInfo=e})}}})}FillDummyData(){this.PaymentForm.patchValue({CardOwner:"NAME LAST_NAME",CardNumber:"0000111122223333",ExpireMonth:"02",ExpireYear:"32",Cvv2:"123"})}OnSubmit(){this.Request={User:this.SaleRequest.User,AgencyCode:this.SaleRequest.AgencyCode,BasketCode:this.SaleRequest.BasketCode,Card:{CardOwner:this.PaymentForm.get("CardOwner").value,CardNumber:this.PaymentForm.get("CardNumber").value,ExpireYear:this.PaymentForm.get("ExpireYear").value,ExpireMonth:this.PaymentForm.get("ExpireMonth").value,Cvv2:this.PaymentForm.get("Cvv2").value},Installment:0,Amount:this.TotalAmount,UrlOk:"http://localhost:4224/Sale/Payment/Secure",UrlFail:"http://localhost:4224/Sale/Payment/Secure",SecurityLevel:"3D"},this.saleService.SecurePrepare(this.Request).subscribe(e=>{e&&(console.log("Payment SecurePrepare",e),this.webStorage.Set(X.b.Local,"SecureRequest",this.Request),this.webStorage.Set(X.b.Local,"SecureResponse",e),this.PaymentForm.reset(),this.router.navigate(["/Sale/Payment/Secure"],{relativeTo:this.route}).then())})}GetFormControl(e,t=this.PaymentForm){return t.get(e)}GetFormArray(e,t=this.PaymentForm){return t.get(e)}}return e.\u0275fac=function(t){return new(t||e)(f.Jb(s.a),f.Jb(s.d),f.Jb(X.c),f.Jb(k))},e.\u0275cmp=f.Db({type:e,selectors:[["app-payment"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"card","card-body","shadow-lg","mb-3"],["class","shadow-lg mb-3 bg-white rounded",4,"ngFor","ngForOf"],[1,"shadow-lg","p-3","mb-3","bg-white","rounded"],[1,"card","mb-2"],[1,"card-body"],[1,"btn","btn-outline-dark",3,"click"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","nav-home-tab","data-toggle","tab","href","#nav-home","role","tab","aria-controls","nav-home","aria-selected","true",1,"nav-item","nav-link","active"],["id","nav-paypal-tab","data-toggle","tab","href","#nav-paypal","role","tab","aria-controls","nav-paypal","aria-selected","false",1,"nav-item","nav-link"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","show","active"],[1,"",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-12","col-lg-6"],[1,"md-form","form-group"],["type","number","id","CardNumber","placeholder","Debit/Credit Card Number",1,"form-control",3,"formControlName"],["for","CardNumber",1,"active"],[3,"Caption","ToCheck"],[4,"ngIf"],["type","text","id","CardOwner","placeholder","Card Holder's Name",1,"form-control",3,"formControlName"],["for","CardOwner",1,"active"],[1,"col-6","col-lg-3"],["id","ExpireMonth",1,"custom-select",3,"formControlName"],["value","01"],["value","02"],["value","03"],["value","04"],["value","05"],["value","06"],["value","07"],["value","08"],["value","09"],["value","10"],["value","11"],["value","12"],["for","ExpireMonth",1,"active"],["id","ExpireYear",1,"custom-select","ml-1",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["for","ExpireYear",1,"active"],["type","text","id","Cvv2","placeholder","Security Code",1,"form-control",3,"formControlName","maxlength"],["for","Cvv2",1,"active"],["type","text","id","Amount",1,"form-control",3,"formControlName"],["for","Amount",1,"active"],["type","submit",1,"btn","btn-outline-success",3,"disabled"],["id","nav-paypal","role","tabpanel","aria-labelledby","nav-paypal-tab",1,"tab-pane","fade"],[1,"shadow-lg","mb-3","bg-white","rounded"],[3,"Type","IsOdd","Tour",4,"ngIf"],[3,"Type","IsOdd","Hotel",4,"ngIf"],[3,"Type","IsOdd","Option",4,"ngIf"],[1,"col-12"],["class","col-12",4,"ngIf"],[3,"Type","IsOdd","Tour"],[3,"Type","IsOdd","Hotel"],[3,"Type","IsOdd","Option"],[1,"card"],[1,"card-title"],[1,"row","mb-2"],["class","col-12 col-md-4 p-md-1 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-md-4","p-md-1","mb-2"],[1,"shadow-lg","p-3","bg-white","rounded"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"value"]],template:function(e,t){1&e&&f.yc(0,ne,89,26,"div",0),2&e&&f.hc("ngIf",t.SaleRequest)},directives:[a.l,a.k,i.y,i.n,i.i,i.r,i.b,i.m,i.g,D.a,i.v,i.q,i.x,i.l,C.a],styles:[""]}),e})();const se=["SecureForm"];let le=(()=>{class e{constructor(e,t){this.webStorage=e,this.saleService=t}ngOnInit(){this.SecureResponse=this.webStorage.Get(X.b.Local,"SecureResponse"),console.log("SecureResponse",this.SecureResponse),this.SecureForm.nativeElement.innerHTML=`\n    ${this.SecureResponse.Data.Form.HiddenInputs}\n    <div class="container">\n      <div class="row">\n        <table class="table table-hover">\n          <tr>\n            <td class='text-center'><p><span>${this.SecureResponse.Data.Title}</span></p></td>\n          </tr>\n        </table>\n      </div>\n    </div>\n    <button type="submit">Send</button>`}ngAfterViewInit(){this.SecureForm.nativeElement.submit().then(e=>{console.log(e)})}onSubmit(e,t){const o=this.webStorage.Get(X.b.Local,"SecureRequest"),a=[{test:"garanti"},{ddff:"ddd"}];console.log("ConfirmRequest",{User:o.User,AgencyCode:o.AgencyCode,BasketCode:o.BasketCode,Card:o.Card,Amount:this.SecureResponse.Data.Amount,OrderId:this.SecureResponse.Data.OrderId,ValueCollection:a},a)}}return e.\u0275fac=function(t){return new(t||e)(f.Jb(X.c),f.Jb(k))},e.\u0275cmp=f.Db({type:e,selectors:[["app-payment-secure"]],viewQuery:function(e,t){var o;1&e&&f.xc(se,!0),2&e&&f.pc(o=f.Xb())&&(t.SecureForm=o.first)},decls:2,vars:3,consts:[["novalidate","",3,"name","action","method","ngSubmit"],["SecureForm",""]],template:function(e,t){if(1&e){const e=f.Qb();f.Pb(0,"form",0,1),f.Wb("ngSubmit",(function(o){f.tc(e);const a=f.qc(1);return t.onSubmit(a,o)})),f.Ob()}2&e&&f.hc("name",t.SecureResponse.Data.Form.Name)("action",t.SecureResponse.Data.Form.ActionUrl,f.vc)("method",t.SecureResponse.Data.Form.Method)},directives:[i.y,i.n,i.o],styles:[""]}),e})();var ce=o("oLTJ"),be=o("wjAv");const de=[{path:"",children:[{path:"Cart",component:S},{path:"Basket",component:W,canDeactivate:[ce.a]},{path:"Payment",component:ie},{path:"Payment/Secure",component:le},{path:"**",resolve:{path:R.c},component:be.c}]}];let me=(()=>{class e{}return e.\u0275mod=f.Hb({type:e}),e.\u0275inj=f.Gb({factory:function(t){return new(t||e)},imports:[[s.h.forChild(de)],s.h]}),e})();const ue=[o("H8qh").a,B.a],pe=[a.c,i.k,i.t],he=[n.j.forFeature(l.e,l.g),r.b.forFeature([l.c])];let fe=(()=>{class e{}return e.\u0275mod=f.Hb({type:e}),e.\u0275inj=f.Gb({factory:function(t){return new(t||e)},providers:[k],imports:[[...pe,...he,...ue,me]]}),e})()}}]);