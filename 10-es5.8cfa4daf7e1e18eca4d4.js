function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{zdGO:function(e,t,i){"use strict";i.r(t),i.d(t,"FlightModule",(function(){return Q}));var n,r=i("ofXK"),o=i("3Pt+"),a=i("tyNb"),s=i("L2Ov"),l=i("wjAv"),c=i("HDdC"),u=i("fXoL"),b=i("lJxs"),f=i("AytR"),p=i("tk/3"),h=i("Gv6l"),d=((n=function(){function e(t,i){_classCallCheck(this,e),this.http=t,this.serviceHelper=i,this.State={Latency:250,Urls:{Search:f.a.BaseApiHost+"/api/1.0/Flight"}}}return _createClass(e,[{key:"Search",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.http.post(this.State.Urls.Search,e).pipe(this.serviceHelper.PipeNotification(t,this.State.Latency)).pipe(Object(b.a)((function(e){return e.Data.forEach((function(e,t){e.Options&&e.Options.forEach((function(e,t){e.Segments.forEach((function(e,t){var i="http://localhost/FlyUs.Test/Content/Images/AirLines/";switch(e.AirlineName){case"OnurAir":i+="Onur-Air.png";break;case"Atlasglobal":i+="Atlas-Global.png";break;case"Thy":case"Turkish Airlines":i+="Turkish-Airlines.png";break;case"THY AnadoluJet":i+="Anadolu-Jet.png";break;case"THY BoraJet":i+="Bora-Jet.png";break;case"Pegasus":case"Pegasus Airlines":i+="Pegasus-Airlines.png";break;case"SunExpress":i+="Sun-Express.png"}e.ImageSrc=i}))}))})),e})))}}]),e}()).\u0275fac=function(e){return new(e||n)(u.Tb(p.b),u.Tb(h.a))},n.\u0275prov=u.Fb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),m=i("hTRX"),v=i("R0Ic");function g(e,t){if(1&e){var i=u.Qb();u.Pb(0,"div",5),u.Pb(1,"div",6),u.Pb(2,"b"),u.Ac(3),u.Ob(),u.Pb(4,"span"),u.Ac(5),u.Ob(),u.Ob(),u.Pb(6,"div",7),u.Pb(7,"button",8),u.Wb("click",(function(){u.tc(i);var e=t.$implicit,n=u.qc(11),r=u.ac();return n.value=n.value!=e.Min?""+(n.value-0-1):""+(e.Min-0),r.GetFormControl(e.Code).setValue(n.value-0)})),u.Zb(),u.Pb(8,"svg",9),u.Kb(9,"path",10),u.Ob(),u.Ob(),u.Yb(),u.Kb(10,"input",11,12),u.Pb(12,"button",13),u.Wb("click",(function(){u.tc(i);var e=t.$implicit,n=u.qc(11),r=u.ac();return n.value=n.value!=e.Max?""+(n.value-0+1):""+(e.Max-0),r.GetFormControl(e.Code).setValue(n.value-0)})),u.Zb(),u.Pb(13,"svg",9),u.Kb(14,"path",14),u.Ob(),u.Ob(),u.Ob(),u.Ob()}if(2&e){var n=t.$implicit,r=u.qc(11);u.xb(3),u.Bc(n.Label),u.xb(2),u.Bc(n.SubLabel),u.xb(5),u.hc("min",n.Min.toString())("max",n.Max.toString())("formControlName",n.Code),u.xb(2),u.hc("disabled",r.value-0===n.Max)}}var y,x,P,F,O=function(e){return{display:e}},A=Object(v.f)([Object(v.i)({opacity:0}),Object(v.e)("200ms",Object(v.i)({opacity:1}))]),C=Object(v.f)(Object(v.e)("200ms",Object(v.i)({opacity:0}))),T=Object(v.k)("fadeInOut",[Object(v.j)("void => *",Object(v.l)(A)),Object(v.j)("* => void",Object(v.l)(C))]),k=((P=function(){function e(){_classCallCheck(this,e),this.Id="Pax".concat("_",Math.random().toString(36).substring(2,15),"_",Math.random().toString(36).substring(2,15)),this.PaxList=[],this.CloseEvent=new u.n,this.ChangeEvent=new u.n,this.clickInside=!1,this.Visible=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.PaxForm=new o.h({}),this.PaxList.length>0&&(this.InitializeForm(),this.EmitChanges(this.PaxForm.value))}},{key:"InitializeForm",value:function(){var e=this,t={};this.PaxList.forEach((function(e,i){return t[e.Code]=new o.f({value:e.Value,disabled:!0})})),this.PaxForm=new o.h(t),this.PaxForm.valueChanges.subscribe((function(t){e.EmitChanges(t)}))}},{key:"EmitChanges",value:function(e){var t=[];this.PaxList.forEach((function(i,n){return t.push({Code:i.Code,Value:e[i.Code]})})),t.push({Code:"Total",Value:t.map((function(e){return e.Value})).reduce((function(e,t){return e+t}))}),this.ChangeEvent.emit(t)}},{key:"GetFormControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.PaxForm;return t.get(e)}},{key:"ListenerInside",value:function(){this.clickInside=!0}},{key:"ListenerOutside",value:function(){this.clickInside?this.clickInside=!1:this.Close()}},{key:"Show",value:function(e){e.stopPropagation(),this.Visible=!0}},{key:"Close",value:function(){this.Visible&&(this.Visible=!1,this.CloseEvent.emit({IsClosed:!0,Id:this.Id}))}}]),e}()).\u0275fac=function(e){return new(e||P)},P.\u0275cmp=u.Db({type:P,selectors:[["lb-pax"]],hostBindings:function(e,t){1&e&&u.Wb("click",(function(){return t.ListenerInside()}))("click",(function(){return t.ListenerOutside()}),!1,u.rc)},decls:6,vars:7,consts:[[1,"pax-container",3,"id","ngStyle"],[3,"formGroup"],[1,"pax-body"],["class","pax-row",4,"ngFor","ngForOf"],[1,"pax-footer"],[1,"pax-row"],[1,"pax-text"],[1,"pax-actions"],["type","button",1,"pax-btn",3,"click"],["viewBox","0 0 448 512","version","1.2",2,"display","inline-block","font-size","inherit","height","1em","overflow","visible","vertical-align","-.125em"],["d","M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"],["type","text",1,"pax-input",3,"min","max","formControlName"],["Count",""],["type","button",1,"pax-btn",3,"disabled","click"],["d","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]],template:function(e,t){1&e&&(u.Pb(0,"div",0),u.Pb(1,"form",1),u.Pb(2,"div",2),u.yc(3,g,15,6,"div",3),u.Ob(),u.Pb(4,"div",4),u.Ac(5," TODO: warning! "),u.Ob(),u.Ob(),u.Ob()),2&e&&(u.hc("id",t.Id)("@fadeInOut",void 0)("ngStyle",u.lc(5,O,t.Visible?"block":"none")),u.xb(1),u.hc("formGroup",t.PaxForm),u.xb(2),u.hc("ngForOf",t.PaxList))},directives:[r.m,o.y,o.n,o.i,r.k,o.b,o.m,o.g],styles:['.pax-container{z-index:1029;position:absolute;box-shadow:0 5px 5px 0 rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.18),0 3px 14px 2px rgba(0,0,0,.12);font-family:Roboto,"Helvetica Neue","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:400;font-size:15px;line-height:1;min-width:300px;max-width:300px;color:#000;background-color:#fff;padding:15px!important}.pax-container .pax-body .pax-row{display:flex;flex-wrap:wrap;margin-bottom:.5rem!important}.pax-container .pax-body .pax-row .pax-text{margin-top:auto!important;margin-bottom:auto!important;flex:0 0 calc(100% / 12 * 8);max-width:calc(100% / 12 * 8)}.pax-container .pax-body .pax-row .pax-text span{padding-left:5px;font-size:x-small;color:gray}.pax-container .pax-body .pax-row .pax-actions{flex:0 0 calc(100% / 12 * 4);max-width:calc(100% / 12 * 4);display:flex;flex-wrap:wrap}.pax-container .pax-body .pax-row .pax-actions .pax-input{flex:0 0 calc(100% / 12 * 2);max-width:calc(100% / 12 * 2);padding:0!important;text-align:center;line-height:1;background-color:transparent;border:solid transparent}.pax-container .pax-body .pax-row .pax-actions .pax-btn{flex:0 0 calc(100% / 12 * 4.6);max-width:calc(100% / 12 * 4.6);background-color:transparent;border:1px solid transparent;padding:.25rem!important;font-size:1rem;border-radius:.5rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.pax-container .pax-footer{padding:5px!important;background-color:#ff0}'],encapsulation:2,data:{animation:[T]}}),P),w=((x=function(){function e(t,i,n,r){_classCallCheck(this,e),this.elementRef=t,this.componentFactoryResolver=i,this.appRef=n,this.injector=r,this.ChangeEvent=new u.n,this.PaxList=[],this.paxPickers=[],this.el=this.elementRef.nativeElement}return _createClass(e,[{key:"clicked",value:function(e){this.current||this.Show(this.el.value),this.current.instance.Show(e)}},{key:"Show",value:function(e){var t=this,i=this.GetComponentRef();return i.instance.PaxList=this.PaxList,i.instance.ChangeEvent.subscribe((function(e){t.el.innerText=e.find((function(e){return"Total"===e.Code})).Value.toString()+" "+t.Passengers,t.ChangeEvent.emit(e)})),i.instance.CloseEvent.subscribe((function(e){e.IsClosed&&t.Hide(e.Id)})),this.current=i,this.paxPickers.push({Id:i.instance.Id,Ref:i}),i.instance.Id}},{key:"Hide",value:function(e){var t=this.paxPickers.find((function(t){return t.Id===e}));t&&t.Ref&&(this.current=void 0,t.Ref.destroy(),this.paxPickers.splice(this.paxPickers.indexOf(t),1))}},{key:"GetComponentRef",value:function(){var e=this.componentFactoryResolver.resolveComponentFactory(k).create(this.injector);return this.appRef.attachView(e.hostView),this.el.parentNode.insertBefore(e.hostView.rootNodes[0],this.el.nextSibling),e}},{key:"CLear",value:function(){var e=this;this.paxPickers.forEach((function(t,i){return e.Hide(t.Id)})),this.paxPickers=[]}},{key:"ngOnDestroy",value:function(){this.CLear()}}]),e}()).\u0275fac=function(e){return new(e||x)(u.Jb(u.l),u.Jb(u.j),u.Jb(u.g),u.Jb(u.r))},x.\u0275dir=u.Eb({type:x,selectors:[["span","lbPaxPicker",""],["div","lbPaxPicker",""]],hostBindings:function(e,t){1&e&&u.Wb("click",(function(e){return t.clicked(e)}))},inputs:{PaxList:"PaxList",Passengers:"Passengers"},outputs:{ChangeEvent:"ChangeEvent"}}),x),S=((y=function e(){_classCallCheck(this,e)}).\u0275mod=u.Hb({type:y}),y.\u0275inj=u.Gb({factory:function(e){return new(e||y)},imports:[[r.c,o.t]]}),y),M=i("qPkN"),I=function(){return{locale:"tr",formatDate:"YYYY/MM/D"}},D=((F=function(){function e(){_classCallCheck(this,e),this.RequestReady=new u.n,this.PaxList=[{Code:"adult",Label:"Yeti\u015fkin",SubLabel:"",Min:1,Max:9,Value:1},{Code:"young",Label:"Gen\xe7",SubLabel:"12-17",Min:0,Max:7,Value:0},{Code:"child",Label:"\xc7ocuk",SubLabel:"2-11",Min:0,Max:7,Value:0},{Code:"infant-1",Label:"Koltukta Bebek",SubLabel:"2 ya\u015f alt\u0131",Min:0,Max:7,Value:0},{Code:"infant-2",Label:"Kucakta Bebek",SubLabel:"2 ya\u015f alt\u0131",Min:0,Max:7,Value:0}]}return _createClass(e,[{key:"ngOnInit",value:function(){this.InitializeForm()}},{key:"InitializeForm",value:function(){this.SearchForm=new o.h({DepartureAirportCode:new o.f("IST"),ArrivalAirportCode:new o.f("AYT"),CabinTypes:new o.f("Economy"),FlightType:new o.f("Round trip"),DepartureDateTime:new o.f(null,o.w.required),ReturnDateTime:new o.f(null,o.w.required),FlightAdultCount:new o.f(1),FlightChildCount:new o.f(0),FlightInfantCount:new o.f(0)})}},{key:"GetFormControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.SearchForm;return t.get(e)}},{key:"SwitchAirport",value:function(){var e=this.SearchForm.get("DepartureAirportCode").value,t=this.SearchForm.get("ArrivalAirportCode").value;this.SearchForm.patchValue({DepartureAirportCode:t,ArrivalAirportCode:e})}},{key:"onSubmit",value:function(){var e=new Date(this.SearchForm.get("DepartureDateTime").value),t=new Date(this.SearchForm.get("ReturnDateTime").value),i=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();t.getFullYear(),t.getMonth(),t.getDate(),console.log(this.SearchForm.value,this.SearchForm.get("DepartureDateTime").value),this.Request={Airlines:[m.a.Domestic],Travelers:[{Code:m.f.Adult,Quantity:this.SearchForm.get("FlightAdultCount").value||0},{Code:m.f.Child,Quantity:this.SearchForm.get("FlightChildCount").value||0},{Code:m.f.Infant,Quantity:this.SearchForm.get("FlightInfantCount").value||0}],Legs:[{FlightType:m.e.OneWay,Departure:{Code:this.SearchForm.get("DepartureAirportCode").value,DateTime:i,City:"",Time:"",TimeZoneOffset:""},Arrival:{Code:this.SearchForm.get("ArrivalAirportCode").value,DateTime:i,City:"",Time:"",TimeZoneOffset:""},DirectionType:m.c.Departure,CabinTypes:[m.b.Economy,m.b.Business]}]},this.RequestReady.emit(this.Request),console.log(this.Request,this.SearchForm.value)}},{key:"PaxChanged",value:function(e){var t=e.find((function(e){return"adult"===e.Code})).Value,i=e.find((function(e){return"young"===e.Code})).Value,n=e.find((function(e){return"child"===e.Code})).Value,r=e.find((function(e){return"infant-1"===e.Code})).Value;this.SearchForm.get("FlightAdultCount").setValue(t),this.SearchForm.get("FlightChildCount").setValue(i+n),this.SearchForm.get("FlightInfantCount").setValue(r),this.PaxList.forEach((function(t,i){var n=e.find((function(e){return e.Code===t.Code}));n&&(t.Value=n.Value)})),console.log(e.filter((function(e){return"Total"!==e.Code&&e.Value>0})))}}]),e}()).\u0275fac=function(e){return new(e||F)},F.\u0275cmp=u.Db({type:F,selectors:[["app-flight-searcher"]],outputs:{RequestReady:"RequestReady"},decls:75,vars:14,consts:[[1,"card","card-body","mb-2"],[3,"formGroup","submit"],[1,"form-row","mb-2"],[1,"col-lg-2"],["for","FlightType"],["id","FlightType","name","FlightType",1,"custom-select",3,"formControlName"],["FlightType",""],[1,"col-lg-3"],["lbPaxPicker","",3,"PaxList","ChangeEvent"],["for","CabinType"],["id","CabinType","name","CabinType",1,"custom-select",3,"formControlName"],[1,"col-12","col-lg-7"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fas","fa-plane-departure"],["for","DepartureAirportCode"],["type","text","placeholder","AirportCode","autocomplete","off","id","DepartureAirportCode",1,"form-control",3,"formControlName"],[1,"btn","btn-sm","btn-outline-dark","ml-1","mr-1",3,"click"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-plane-arrival"],["for","ArrivalAirportCode"],["type","text","placeholder","AirportCode","autocomplete","off","id","ArrivalAirportCode",1,"form-control",3,"formControlName"],[1,"col-12","col-lg-5"],[1,"fas","fa-calendar-alt"],["type","text","lbDatePicker","","id","DepartureDateTime","autocomplete","off",1,"form-control",3,"Options","formControlName"],["type","text","lbDatePicker","","id","ReturnDateTime","autocomplete","off",1,"form-control",3,"Options","formControlName"],[1,"form-row","mb-2","justify-content-end"],["for","Stops"],["id","Stops","name","Stops",1,"custom-select"],["for","Airlines"],["id","Airlines","name","Airlines",1,"custom-select"],[1,"form-row","justify-content-center"],["type","submit",1,"btn","btn-sm","btn-primary","mb-2"]],template:function(e,t){if(1&e&&(u.Pb(0,"div",0),u.Pb(1,"form",1),u.Wb("submit",(function(){return t.onSubmit()})),u.Pb(2,"div",2),u.Pb(3,"div",3),u.Kb(4,"label",4),u.Pb(5,"select",5,6),u.Pb(7,"option"),u.Ac(8,"Round trip"),u.Ob(),u.Pb(9,"option"),u.Ac(10,"One-way"),u.Ob(),u.Pb(11,"option"),u.Ac(12,"Multi-city"),u.Ob(),u.Ob(),u.Ob(),u.Pb(13,"div",7),u.Pb(14,"span",8),u.Wb("ChangeEvent",(function(e){return t.PaxChanged(e)})),u.Ac(15,"Passengers"),u.Ob(),u.Ob(),u.Pb(16,"div",3),u.Kb(17,"label",9),u.Pb(18,"select",10),u.Pb(19,"option"),u.Ac(20,"Economy"),u.Ob(),u.Pb(21,"option"),u.Ac(22,"Premium Economy"),u.Ob(),u.Pb(23,"option"),u.Ac(24,"Business"),u.Ob(),u.Pb(25,"option"),u.Ac(26,"First Class"),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(27,"div",2),u.Pb(28,"div",11),u.Pb(29,"div",12),u.Pb(30,"div",13),u.Pb(31,"span",14),u.Kb(32,"i",15),u.Ob(),u.Ob(),u.Kb(33,"label",16),u.Kb(34,"input",17),u.Pb(35,"div",18),u.Wb("click",(function(){return t.SwitchAirport()})),u.Kb(36,"i",19),u.Ob(),u.Pb(37,"div",13),u.Pb(38,"span",14),u.Kb(39,"i",20),u.Ob(),u.Ob(),u.Kb(40,"label",21),u.Kb(41,"input",22),u.Ob(),u.Ob(),u.Pb(42,"div",23),u.Pb(43,"div",12),u.Pb(44,"div",13),u.Pb(45,"span",14),u.Kb(46,"i",24),u.Ob(),u.Ob(),u.Kb(47,"input",25),u.Kb(48,"input",26),u.Ob(),u.Ob(),u.Ob(),u.Pb(49,"div",27),u.Pb(50,"div",3),u.Ac(51," bags "),u.Ob(),u.Pb(52,"div",3),u.Kb(53,"label",28),u.Pb(54,"select",29),u.Pb(55,"option"),u.Ac(56,"Any number of stops"),u.Ob(),u.Pb(57,"option"),u.Ac(58,"Non-stop only"),u.Ob(),u.Pb(59,"option"),u.Ac(60,"1 stop or fewer"),u.Ob(),u.Pb(61,"option"),u.Ac(62,"2 stop or fewer"),u.Ob(),u.Ob(),u.Ob(),u.Pb(63,"div",3),u.Kb(64,"label",30),u.Pb(65,"select",31),u.Pb(66,"option"),u.Ac(67,"THY"),u.Ob(),u.Pb(68,"option"),u.Ac(69,"Pegasus"),u.Ob(),u.Ob(),u.Ob(),u.Pb(70,"div",3),u.Ac(71," price times "),u.Ob(),u.Ob(),u.Pb(72,"div",32),u.Pb(73,"button",33),u.Ac(74,"Search"),u.Ob(),u.Ob(),u.Ob(),u.Ob()),2&e){var i=u.qc(6);u.xb(1),u.hc("formGroup",t.SearchForm),u.xb(4),u.hc("formControlName","FlightType"),u.xb(9),u.hc("PaxList",t.PaxList),u.xb(4),u.hc("formControlName","CabinTypes"),u.xb(16),u.hc("formControlName","DepartureAirportCode"),u.xb(7),u.hc("formControlName","ArrivalAirportCode"),u.xb(6),u.hc("Options",u.kc(12,I))("formControlName","DepartureDateTime"),u.xb(1),u.Bb("d-none","One-way"===i.value),u.hc("Options",u.kc(13,I))("formControlName","ReturnDateTime")}},directives:[o.y,o.n,o.i,o.v,o.m,o.g,o.q,o.x,w,o.b,M.a],styles:[""]}),F),_=i("OKDp");function R(e,t){if(1&e&&(u.Pb(0,"div",17),u.Pb(1,"div",18),u.Kb(2,"input",19),u.Pb(3,"label",20),u.Ac(4),u.Ob(),u.Ob(),u.Ob()),2&e){var i=t.$implicit,n=t.index,r=u.ac();u.hc("formArrayName","Airlines"),u.xb(1),u.hc("formGroupName",n.toString()),u.xb(1),u.ic("id","Air_"+i.Airline),u.hc("formControlName","Air_"+r.Filter.Airlines[n].Airline),u.xb(1),u.ic("for","Air_"+i.Airline),u.xb(1),u.Dc(" ",i.Name," (",i.Count,")")}}function L(e,t){if(1&e&&(u.Pb(0,"div",17),u.Pb(1,"div",18),u.Kb(2,"input",19),u.Pb(3,"label",20),u.Ac(4),u.Ob(),u.Ob(),u.Ob()),2&e){var i=t.$implicit,n=t.index;u.hc("formArrayName","FlightTimes"),u.xb(1),u.hc("formGroupName",n.toString()),u.xb(1),u.ic("id","FT_"+i.FlightTime),u.hc("formControlName","FT_"+i.FlightTime),u.xb(1),u.ic("for","FT_"+i.FlightTime),u.xb(1),u.Bc(i.Name)}}function E(e,t){if(1&e&&(u.Pb(0,"div",17),u.Pb(1,"div",21),u.Kb(2,"input",19),u.Pb(3,"label",20),u.Ac(4),u.Ob(),u.Ob(),u.Ob()),2&e){var i=t.index;u.hc("formArrayName","Transfer"),u.xb(2),u.ic("id","Tra_"+i),u.hc("formControlName",i),u.xb(1),u.ic("for","Tra_"+i),u.xb(1),u.Bc(0===i?"Non-Stop":"Transfer")}}var N,K=((N=function(){function e(){_classCallCheck(this,e),this.Options=[],this.FilterReady=new u.n,this.Filter={}}return _createClass(e,[{key:"ngOnChanges",value:function(){var e=this;this.Options.length>0&&(this.Filter.Airlines=[],this.Filter.FlightTimes=[],this.Filter.Transfer=[],this.Filter.Min=0,this.Filter.Max=0,this.Filter.Max=Math.max.apply(Math,this.Options.map((function(e){return e.BestAmount}))),this.Filter.Min=Math.min.apply(Math,this.Options.map((function(e){return e.BestAmount}))),this.Options.forEach((function(t,i){e.Filter.Airlines.find((function(e){return e.Airline===t.Airline}))||e.Filter.Airlines.push({Airline:t.Airline,Name:m.a[t.Airline],Count:e.Options.filter((function(e){return e.Airline===t.Airline})).length}),t.Segments.forEach((function(t,i){e.Filter.FlightTimes.find((function(e){return e.FlightTime===t.FlightTime}))||e.Filter.FlightTimes.push({FlightTime:t.FlightTime,Name:m.d[t.FlightTime]}),e.Filter.Transfer.find((function(e){return e===(t.IsTransfer?"Transfer":"Non-Stop")}))||e.Filter.Transfer.push(t.IsTransfer?"Transfer":"Non-Stop")}))})),this.FilterReady.emit(this.Options),this.Initialize())}},{key:"ngOnInit",value:function(){}},{key:"Initialize",value:function(){var e=this;this.FilterForm=new o.h({PriceMin:new o.f,PriceMax:new o.f,Airlines:new o.d([]),FlightTimes:new o.d([]),Transfer:new o.d([])}),this.FilterForm.get("PriceMin").valueChanges.subscribe((function(t){var i=e.FilterForm.get("PriceMax").value;i&&i.toFixed(0)===e.Filter.Max.toFixed(0)&&(i=e.Filter.Max)})),this.FilterForm.get("PriceMax").valueChanges.subscribe((function(t){e.FilterForm.get("PriceMin"),t.toFixed(0)===e.Filter.Max.toFixed(0)&&(t=e.Filter.Max)})),this.Filter.Transfer.forEach((function(t,i){e.FilterForm.get("Transfer").push(new o.f(!1))})),this.Filter.Airlines.forEach((function(t){var i=new o.h(_defineProperty({},"Air_"+t.Airline,new o.f(!1)));e.FilterForm.get("Airlines").push(i)})),this.Filter.FlightTimes.forEach((function(t){var i=new o.h(_defineProperty({},"FT_"+t.FlightTime,new o.f(!1)));e.FilterForm.get("FlightTimes").push(i)}))}},{key:"onSubmit",value:function(){var e=this,t=[],i=[],n=[],r=this.FilterForm.get("PriceMin").value,o=this.FilterForm.get("PriceMax").value;o.toFixed(0)===this.Filter.Max.toFixed(0)&&(o=this.Filter.Max),this.Filter.Airlines.forEach((function(i,n){e.FilterForm.get("Airlines."+n+".Air_"+i.Airline).value&&t.push(i.Airline)})),this.Filter.FlightTimes.forEach((function(t,n){e.FilterForm.get("FlightTimes."+n+".FT_"+t.FlightTime).value&&i.push(t.FlightTime)})),this.Filter.Transfer.forEach((function(t,i){e.FilterForm.get("Transfer."+i).value&&n.push(t)}));var a=this.Options;t.length>0&&(a=a.filter((function(e){return t.find((function(t){return t===e.Airline}))}))),i.length>0&&(a=a.filter((function(e){return i.find((function(t){return e.Segments.findIndex((function(e){return e.FlightTime===t}))>-1}))}))),n.length>0&&(a=a.filter((function(e){return n.find((function(t){return e.Segments.findIndex((function(e){return e.IsTransfer===("Transfer"===t)}))>-1}))}))),(null!==r&&r!==this.Filter.Min||null!==o&&o!==this.Filter.Max)&&(a=a.filter((function(e){return e.BestAmount>=r&&e.BestAmount<=o}))),null!=a&&0!==a.length||(a=this.Options),console.log("FlightFilter",this.Filter),this.FilterReady.emit(_toConsumableArray(a))}}]),e}()).\u0275fac=function(e){return new(e||N)},N.\u0275cmp=u.Db({type:N,selectors:[["app-flight-filter"]],inputs:{Options:"Options"},outputs:{FilterReady:"FilterReady"},features:[u.vb],decls:47,vars:15,consts:[[1,"card","mb-2"],[1,"card-body","p-2"],[1,"fas","fa-search"],[3,"formGroup","ngSubmit"],["type","submit",1,"w-100","m-0","btn","btn-sm","btn-outline-primary","mb-2"],[1,"fas","fa-filter"],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col-12","mb-1"],["id","Price-Range",1,""],[1,"col-6"],["type","number","id","PriceMin",1,"form-control","form-control-sm",3,"min","max","step","formControlName"],["PriceMin",""],["type","number","id","PriceMax",1,"form-control","form-control-sm",3,"min","max","step","formControlName"],["PriceMax",""],[3,"formArrayName",4,"ngFor","ngForOf"],[3,"formArrayName"],[1,"custom-control","custom-checkbox",3,"formGroupName"],["type","checkbox",1,"custom-control-input",3,"formControlName","id"],[1,"custom-control-label",3,"for"],[1,"custom-control","custom-checkbox"]],template:function(e,t){if(1&e&&(u.Pb(0,"div",0),u.Pb(1,"div",1),u.Kb(2,"i",2),u.Ac(3),u.bc(4,"async"),u.Ob(),u.Ob(),u.Pb(5,"form",3),u.Wb("ngSubmit",(function(){return t.onSubmit()})),u.Pb(6,"button",4),u.Ac(7," Filter "),u.Kb(8,"i",5),u.Ob(),u.Pb(9,"div",0),u.Pb(10,"div",6),u.Pb(11,"h5",7),u.Ac(12," Price "),u.Ob(),u.Pb(13,"div",8),u.Pb(14,"div",9),u.Kb(15,"div",10),u.Ob(),u.Pb(16,"div",11),u.Pb(17,"label"),u.Kb(18,"input",12,13),u.Ob(),u.Ob(),u.Pb(20,"div",11),u.Pb(21,"label"),u.Kb(22,"input",14,15),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(24,"div",0),u.Pb(25,"div",6),u.Pb(26,"h5",7),u.Ac(27," Airlines "),u.Ob(),u.yc(28,R,5,7,"div",16),u.Ob(),u.Ob(),u.Pb(29,"div",0),u.Pb(30,"div",6),u.Pb(31,"h5",7),u.Ac(32," Flight Type "),u.Ob(),u.Ac(33," Bussiness First class Economy "),u.Ob(),u.Ob(),u.Pb(34,"div",0),u.Pb(35,"div",6),u.Pb(36,"h5",7),u.Ac(37," When?.. "),u.Ob(),u.yc(38,L,5,6,"div",16),u.Ob(),u.Ob(),u.Pb(39,"div",0),u.Pb(40,"div",6),u.Pb(41,"h5",7),u.Ac(42," Transfer "),u.Ob(),u.yc(43,E,5,5,"div",16),u.Ob(),u.Ob(),u.Pb(44,"button",4),u.Ac(45," Filter "),u.Kb(46,"i",5),u.Ob(),u.Ob()),2&e){var i,n=u.qc(19),r=u.qc(23);u.xb(3),u.Cc(" ",(null==(i=u.cc(4,13,t.FilterReady))?null:i.length)||t.Options.length," Results Found. "),u.xb(2),u.hc("formGroup",t.FilterForm),u.xb(13),u.hc("min",t.Filter.Min.toString())("max",r.value.toString())("step",".01")("formControlName","PriceMin"),u.xb(4),u.hc("min",n.value.toString())("max",t.Filter.Max.toString())("step",".01")("formControlName","PriceMax"),u.xb(6),u.hc("ngForOf",t.Filter.Airlines),u.xb(10),u.hc("ngForOf",t.Filter.FlightTimes),u.xb(5),u.hc("ngForOf",t.Filter.Transfer)}},directives:[o.y,o.n,o.i,o.r,o.b,o.m,o.g,r.k,o.e,o.j,o.a],pipes:[r.b],styles:[""]}),N),B=["listContainer"];function V(e,t){if(1&e){var i=u.Qb();u.Pb(0,"app-flight-filter",32),u.Wb("FilterReady",(function(e){return u.tc(i),u.ac().onFilterReady(e)})),u.bc(1,"async"),u.Ob()}if(2&e){var n=u.ac();u.hc("Options",u.cc(1,1,n.Options))}}var j,H,q,G,W=[{path:"",children:[{path:"",component:(H=function(){function e(t){_classCallCheck(this,e),this.flightService=t,this.Availabilities=[],this.Filtered=[],this.PagerOn=!0,this.Type="Default"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onRequestReady",value:function(e){var t=this;this.Subscription=this.flightService.Search(e).subscribe((function(e){t.Availabilities=e.Data,t.Options=new c.a((function(t){var i=[];e.Data.forEach((function(e,t){i.push.apply(i,_toConsumableArray(e.Options))})),t.next(i)})),console.log("res",e,t.Options)}))}},{key:"onFilterReady",value:function(e){var t=this;setTimeout((function(){t.Filtered=_toConsumableArray(e),t.container&&(t.container.Filtered=t.Filtered)}),100)}},{key:"SortBy",value:function(e,t){this.container&&(this.container.InfiniteScroll.CurrentPage=1,this.container.InfiniteScroll.Items=[],this.container.Pager.CurrentPage=1),this.Filtered.length>0&&("Default"===e?this.Filtered=this.Filtered.sort((function(e,t){return e.BestAmount>t.BestAmount?1:-1})):"Time"===e?"Asc"===t?this.Filtered=this.Filtered.sort((function(e,t){return e.Segments[0].ElapsedTime>t.Segments[0].ElapsedTime?1:-1})):"Des"===t&&(this.Filtered=this.Filtered.sort((function(e,t){return e.Segments[0].ElapsedTime<t.Segments[0].ElapsedTime?1:-1}))):"Cost"===e?"Asc"===t?this.Filtered=this.Filtered.sort((function(e,t){return e.BestAmount>t.BestAmount?1:-1})):"Des"===t&&(this.Filtered=this.Filtered.sort((function(e,t){return e.BestAmount<t.BestAmount?1:-1}))):"Airline"===e&&("ABC"===t?this.Filtered=this.Filtered.sort((function(e,t){return e.Airline>t.Airline?1:-1})):"ZYV"===t&&(this.Filtered=this.Filtered.sort((function(e,t){return e.Airline<t.Airline?1:-1}))))),this.container&&(this.container.pagination&&(this.container.pagination.Items=this.Filtered,this.container.pagination.SetPage(1)),this.container.ScrollLoadMore())}},{key:"ngOnDestroy",value:function(){this.Subscription&&this.Subscription.unsubscribe()}}]),e}(),H.\u0275fac=function(e){return new(e||H)(u.Jb(d))},H.\u0275cmp=u.Db({type:H,selectors:[["app-flight"]],viewQuery:function(e,t){var i;1&e&&u.Hc(B,!0),2&e&&u.pc(i=u.Xb())&&(t.container=i.first)},decls:51,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-12","p-md-1","mb-2"],[3,"RequestReady"],[1,"card","card-body"],[1,"container-fluid"],[1,"col-12","col-lg-3","p-md-1","mb-2"],[3,"Options","FilterReady",4,"ngIf"],[1,"col-12","col-lg-9","p-md-1","mb-2"],[1,"card","mb-2"],[1,"card-body","p-0"],[1,"btn-group","float-left","m-1"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","btn-outline-dark","dropdown-toggle"],["SortByButton",""],[1,"fa","fa-sort"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"fas","fa-sort"],[1,"dropdown-divider"],[1,"fas","fa-sort-numeric-up"],[1,"fas","fa-sort-numeric-down"],[1,"fas","fa-sort-amount-up"],[1,"fas","fa-sort-amount-down"],[1,"fas","fa-sort-alpha-up"],[1,"fas","fa-sort-alpha-down"],[1,"btn","btn-sm","btn-outline-secondary","m-1",3,"click"],[1,"float-right"],[1,"btn","btn-sm","btn-outline-secondary","pl-2","pr-2","m-1",3,"click"],[1,"fas","fa-list"],[1,"fas","fa-th-list"],[3,"Filtered","State","TypeArray","TypeGrid"],["listContainer",""],[3,"Options","FilterReady"]],template:function(e,t){if(1&e){var i=u.Qb();u.Pb(0,"div",0),u.Pb(1,"div",1),u.Pb(2,"div",2),u.Pb(3,"app-flight-searcher",3),u.Wb("RequestReady",(function(e){return t.onRequestReady(e)})),u.Ob(),u.Ob(),u.Pb(4,"div",2),u.Pb(5,"div",4),u.Pb(6,"div",5),u.Pb(7,"div",1),u.Pb(8,"div",6),u.yc(9,V,2,3,"app-flight-filter",7),u.bc(10,"async"),u.Ob(),u.Pb(11,"div",8),u.Pb(12,"div",9),u.Pb(13,"div",10),u.Pb(14,"div",11),u.Pb(15,"button",12,13),u.Kb(17,"i",14),u.Ob(),u.Pb(18,"div",15),u.Pb(19,"div",16),u.Wb("click",(function(){u.tc(i);var e=u.qc(16);return t.SortBy("Default",""),e.innerHTML="<i class='fas fa-sort'></i>"})),u.Kb(20,"i",17),u.Ob(),u.Kb(21,"div",18),u.Pb(22,"span",16),u.Wb("click",(function(){u.tc(i);var e=u.qc(16);return t.SortBy("Time","Asc"),e.innerHTML="Time <i class='fas fa-sort-numeric-up'></i>"})),u.Ac(23," Time "),u.Kb(24,"i",19),u.Ob(),u.Pb(25,"span",16),u.Wb("click",(function(){u.tc(i);var e=u.qc(16);return t.SortBy("Time","Des"),e.innerHTML="Time <i class='fas fa-sort-numeric-down'></i>"})),u.Ac(26," Time "),u.Kb(27,"i",20),u.Ob(),u.Kb(28,"div",18),u.Pb(29,"span",16),u.Wb("click",(function(){u.tc(i);var e=u.qc(16);return t.SortBy("Cost","Asc"),e.innerHTML="Cost <i class='fas fa-sort-amount-up'></i>"})),u.Ac(30," Cost "),u.Kb(31,"i",21),u.Ob(),u.Pb(32,"span",16),u.Wb("click",(function(){u.tc(i);var e=u.qc(16);return t.SortBy("Cost","Des"),e.innerHTML="Cost <i class='fas fa-sort-amount-down'></i>"})),u.Ac(33," Cost "),u.Kb(34,"i",22),u.Ob(),u.Kb(35,"div",18),u.Pb(36,"span",16),u.Wb("click",(function(){u.tc(i);var e=u.qc(16);return t.SortBy("Airline","ABC"),e.innerHTML="Airline <i class='fas fa-sort-alpha-up'></i>"})),u.Ac(37," Airline "),u.Kb(38,"i",23),u.Ob(),u.Pb(39,"span",16),u.Wb("click",(function(){u.tc(i);var e=u.qc(16);return t.SortBy("Airline","ZYV"),e.innerHTML="Airline <i class='fas fa-sort-alpha-down'></i>"})),u.Ac(40," Airline "),u.Kb(41,"i",24),u.Ob(),u.Ob(),u.Ob(),u.Pb(42,"span",25),u.Wb("click",(function(){return t.PagerOn=!t.PagerOn})),u.Ac(43),u.Ob(),u.Pb(44,"div",26),u.Pb(45,"span",27),u.Wb("click",(function(){return t.Type="Default"})),u.Kb(46,"i",28),u.Ob(),u.Pb(47,"span",27),u.Wb("click",(function(){return t.Type="Bigger"})),u.Kb(48,"i",29),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Kb(49,"app-list-container",30,31),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob()}if(2&e){var n,r=(null==(n=u.cc(10,6,t.Options))?null:n.length)>0;u.xb(9),u.hc("ngIf",r),u.xb(34),u.Bc(t.PagerOn?"InfiniteScroll":"Pagination"),u.xb(6),u.hc("Filtered",t.Filtered)("State",t.PagerOn?"Pager":"Scroll")("TypeArray","Flights")("TypeGrid",t.Type)}},directives:[D,r.l,_.a,K],pipes:[r.b],styles:[""]}),H),children:[]},{path:"Details/:Id",component:(j=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),j.\u0275fac=function(e){return new(e||j)},j.\u0275cmp=u.Db({type:j,selectors:[["app-flight-details"]],decls:2,vars:0,template:function(e,t){1&e&&(u.Pb(0,"p"),u.Ac(1,"flight-details works!"),u.Ob())},styles:[""]}),j)},{path:"**",resolve:{path:s.c},component:l.c}]}],z=((q=function e(){_classCallCheck(this,e)}).\u0275mod=u.Hb({type:q}),q.\u0275inj=u.Gb({factory:function(e){return new(e||q)},imports:[[a.h.forChild(W)],a.h]}),q),Y=[i("H8qh").a],J=[r.c,o.t],Q=((G=function e(){_classCallCheck(this,e)}).\u0275mod=u.Hb({type:G}),G.\u0275inj=u.Gb({factory:function(e){return new(e||G)},providers:[d],imports:[[].concat(J,Y,[z,M.b,S])]}),G)}}]);